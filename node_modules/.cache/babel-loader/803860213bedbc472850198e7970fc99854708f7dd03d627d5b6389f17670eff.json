{"ast":null,"code":"var _jsxFileName = \"/workspaces/codespaces-blank/src/SynapseReadApp.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { Shield, Upload, Settings, Play, Pause, RotateCcw, Eye, Book, User, Zap, Accessibility, AlertTriangle, CheckCircle, FileText, Loader2, Lightbulb, GraduationCap, HelpCircle, MessageSquare, List, Shuffle, Languages, HardDrive, Smile, Info, ArrowLeft, ArrowRight } from 'lucide-react'; // Added new icons for paragraph navigation\nimport PropTypes from 'prop-types'; // Recommended for type checking in larger applications\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, updateDoc, doc, onSnapshot, query, orderBy, serverTimestamp } from 'firebase/firestore';\n\n// --- Global Error Boundary Component ---\n// Catches JavaScript errors anywhere in its child component tree,\n// logs them, and displays a fallback UI instead of crashing the app.\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      error: null,\n      errorInfo: null\n    };\n  }\n\n  // Invoked after an error has been thrown by a descendant component.\n  // It receives two arguments: the error and an object with errorInfo.\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return {\n      hasError: true,\n      error\n    };\n  }\n\n  // This lifecycle method is called after a component has caught an error.\n  // Use it to log error information.\n  componentDidCatch(error, errorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n    // Call the prop function to log the error\n    if (this.props.onErrorLogged) {\n      this.props.onErrorLogged({\n        message: error.message || 'Unknown error',\n        stack: error.stack || 'No stack trace',\n        componentStack: errorInfo.componentStack || 'N/A'\n      });\n    }\n    // In a production app, you'd send this error to an analytics service (e.g., Sentry)\n    this.setState({\n      errorInfo\n    });\n  }\n  render() {\n    if (this.state.hasError) {\n      // Fallback UI when an error occurs\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center min-h-[400px] p-8 text-center bg-red-50 border border-red-200 rounded-lg shadow-md\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-16 h-16 text-red-500 mb-4 animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-red-800 mb-2\",\n          children: \"Oops! Something went wrong.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"We're sorry for the inconvenience. Please try refreshing the page or contact support if the issue persists.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), process.env.NODE_ENV === 'development' && this.state.errorInfo && /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"text-sm text-gray-500 bg-gray-100 p-4 rounded-md mt-4 text-left overflow-auto max-h-60\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            className: \"cursor-pointer font-semibold text-red-700\",\n            children: \"Error Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"whitespace-pre-wrap break-all\",\n            children: this.state.error && this.state.error.toString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"whitespace-pre-wrap break-all\",\n            children: this.state.errorInfo.componentStack\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this);\n    }\n    return this.props.children;\n  }\n}\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  onErrorLogged: PropTypes.func // Add onErrorLogged propType\n};\n\n// --- Firebase/Firestore Utility Functions ---\nlet dbInstance = null;\nlet authInstance = null;\nlet currentUserId = null; // Stored here for direct use by logErrorToFirestore\n\nconst firebaseInitializeAndAuth = async (firebaseConfig, appId) => {\n  if (dbInstance && authInstance && currentUserId) {\n    return {\n      db: dbInstance,\n      auth: authInstance,\n      userId: currentUserId\n    };\n  }\n  try {\n    const app = initializeApp(firebaseConfig);\n    dbInstance = getFirestore(app);\n    authInstance = getAuth(app);\n    await new Promise(resolve => {\n      const unsubscribe = onAuthStateChanged(authInstance, async user => {\n        if (user) {\n          currentUserId = user.uid;\n          console.log(\"Authenticated user:\", currentUserId);\n          unsubscribe(); // Stop listening once authenticated\n          resolve();\n        } else if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {\n          try {\n            const userCredential = await signInWithCustomToken(authInstance, __initial_auth_token);\n            currentUserId = userCredential.user.uid;\n            console.log(\"Signed in with custom token:\", currentUserId);\n          } catch (error) {\n            console.warn(\"Custom token sign-in failed, falling back to anonymous:\", error);\n            await signInAnonymously(authInstance); // onAuthStateChanged will catch this\n          } finally {\n            unsubscribe();\n            resolve();\n          }\n        } else {\n          try {\n            await signInAnonymously(authInstance); // onAuthStateChanged will catch this\n          } catch (error) {\n            console.error(\"Anonymous sign-in failed:\", error);\n            currentUserId = crypto.randomUUID(); // Fallback to random ID if anonymous fails\n            console.log(\"Using generated random ID for user:\", currentUserId);\n          } finally {\n            unsubscribe();\n            resolve();\n          }\n        }\n      });\n    });\n  } catch (initError) {\n    console.error(\"Firebase initialization or initial authentication failed:\", initError);\n    if (!currentUserId) {\n      // Ensure currentUserId is set even if auth completely fails\n      currentUserId = crypto.randomUUID();\n      console.log(\"Using generated random ID due to Firebase init/auth failure:\", currentUserId);\n    }\n  }\n  return {\n    db: dbInstance,\n    auth: authInstance,\n    userId: currentUserId,\n    appId\n  };\n};\n\n// Function to log errors to Firestore\nconst logErrorToFirestore = async (errorDetails, userId, appId) => {\n  // Ensure dbInstance and userId are available before attempting to log\n  if (!dbInstance || !userId || !appId) {\n    console.error(\"Firestore not ready or user/app ID not available, cannot log error.\");\n    return;\n  }\n  try {\n    const errorLogsCollectionRef = collection(dbInstance, `artifacts/${appId}/users/${userId}/errorLogs`);\n    await addDoc(errorLogsCollectionRef, {\n      message: errorDetails.message || 'Unknown error',\n      stack: errorDetails.stack || 'No stack trace',\n      componentStack: errorDetails.componentStack || 'N/A',\n      timestamp: serverTimestamp(),\n      // Firestore server timestamp\n      fixed: false,\n      // Default to not fixed\n      fixDescription: ''\n    });\n    console.log(\"Error logged to Firestore successfully!\");\n  } catch (e) {\n    console.error(\"Failed to log error to Firestore:\", e);\n  }\n};\n\n// Component to display and manage error logs\nconst ErrorLogViewer = ({\n  userId,\n  db,\n  appId,\n  onToggleVisibility\n}) => {\n  _s();\n  const [errorLogs, setErrorLogs] = useState([]);\n  const [isLoadingLogs, setIsLoadingLogs] = useState(true);\n  const [logError, setLogError] = useState('');\n  const [showContent, setShowContent] = useState(false); // State to control content visibility\n\n  // Toggle visibility and fetch logs if becoming visible\n  const handleToggle = useCallback(() => {\n    setShowContent(prev => !prev);\n    onToggleVisibility && onToggleVisibility(!showContent); // Notify parent\n  }, [showContent, onToggleVisibility]);\n  useEffect(() => {\n    if (!db || !userId || !showContent) {\n      // Only fetch if content is visible and db/userId are ready\n      setIsLoadingLogs(false);\n      return;\n    }\n    const logsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/errorLogs`);\n    // Order by timestamp to show most recent errors first\n    const q = query(logsCollectionRef, orderBy('timestamp', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const logs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setErrorLogs(logs);\n      setIsLoadingLogs(false);\n      setLogError('');\n      console.log(\"Error logs fetched:\", logs);\n    }, error => {\n      console.error(\"Error fetching error logs:\", error);\n      setLogError(`Failed to load error logs: ${error.message}`);\n      setIsLoadingLogs(false);\n    });\n\n    // Cleanup subscription on component unmount or when content is hidden\n    return () => unsubscribe();\n  }, [db, userId, appId, showContent]); // Added showContent to dependencies\n\n  const handleMarkAsFixed = async (logId, currentFixDescription) => {\n    if (!db || !userId) {\n      setLogError(\"Database not ready or user not authenticated. Cannot update error log.\");\n      return;\n    }\n    const docRef = doc(db, `artifacts/${appId}/users/${userId}/errorLogs`, logId);\n    try {\n      const newFixDescription = prompt(\"Enter fix description (optional):\", currentFixDescription || \"\");\n      if (newFixDescription !== null) {\n        // User didn't cancel\n        await updateDoc(docRef, {\n          fixed: true,\n          fixDescription: newFixDescription,\n          fixedAt: serverTimestamp()\n        });\n        console.log(`Error log ${logId} marked as fixed.`);\n      }\n    } catch (e) {\n      console.error(\"Error marking log as fixed:\", e);\n      setLogError(`Failed to mark log as fixed: ${e.message}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg border shadow-lg space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4 cursor-pointer\",\n      onClick: handleToggle,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-5 h-5 text-red-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-red-800\",\n          children: \"Error Logs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), userId && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-500 ml-2\",\n          children: [\"(User ID: \", userId.substring(0, 8), \"...)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 22\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n        children: showContent ? 'Hide' : 'Show'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), showContent && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: isLoadingLogs ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50 rounded-lg shadow-sm flex items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"w-5 h-5 animate-spin mr-2 text-gray-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }, this), \"Loading error logs...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }, this) : logError ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"inline w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 15\n        }, this), logError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }, this) : errorLogs.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-center py-4\",\n        children: \"No errors logged yet. Good job!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 max-h-96 overflow-y-auto custom-scrollbar pr-2\",\n        children: errorLogs.map(log => {\n          var _log$timestamp, _log$fixedAt;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-4 rounded-lg border ${log.fixed ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `font-semibold ${log.fixed ? 'text-green-800' : 'text-red-800'}`,\n                children: log.fixed ? 'Fixed Error' : 'Unfixed Error'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 21\n              }, this), !log.fixed && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleMarkAsFixed(log.id, log.fixDescription),\n                className: \"px-3 py-1 bg-green-600 text-white text-xs rounded-full hover:bg-green-700 transition-colors\",\n                children: \"Mark as Fixed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mb-1\",\n              children: [\"Logged: \", (_log$timestamp = log.timestamp) !== null && _log$timestamp !== void 0 && _log$timestamp.toDate ? log.timestamp.toDate().toLocaleString() : 'N/A', log.fixed && ((_log$fixedAt = log.fixedAt) === null || _log$fixedAt === void 0 ? void 0 : _log$fixedAt.toDate) && ` | Fixed: ${log.fixedAt.toDate().toLocaleString()}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n              className: \"text-sm text-gray-600 cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n                children: \"Stack Trace\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                className: \"whitespace-pre-wrap break-all text-xs bg-gray-100 p-2 rounded-md mt-1\",\n                children: log.stack\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), log.componentStack && log.componentStack !== 'N/A' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-2\",\n                  children: \"Component Stack:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n                  className: \"whitespace-pre-wrap break-all text-xs bg-gray-100 p-2 rounded-md mt-1\",\n                  children: log.componentStack\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this), log.fixed && log.fixDescription && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"Fix:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 23\n              }, this), \" \", log.fixDescription]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 21\n            }, this)]\n          }, log.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 5\n  }, this);\n};\n_s(ErrorLogViewer, \"o14M6KKs0W8HSnyTSh1sXX8QfN4=\");\n_c = ErrorLogViewer;\nErrorLogViewer.propTypes = {\n  userId: PropTypes.string,\n  // userId can be null initially\n  db: PropTypes.object,\n  // db can be null initially\n  appId: PropTypes.string.isRequired,\n  onToggleVisibility: PropTypes.func\n};\n\n// --- Enhanced Security Utilities ---\nconst SecurityUtils = {\n  // Sanitizes text to remove potentially harmful HTML tags and attributes.\n  sanitizeText: text => {\n    if (typeof text !== 'string') return '';\n    // Strips HTML tags, JavaScript URI schemes, and event handlers.\n    return text.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '') // Remove script tags\n    .replace(/<[^>]+>/g, '') // Remove any remaining HTML tags\n    .replace(/javascript:/gi, '') // Remove javascript: URI schemes\n    .replace(/on\\w+=/gi, '') // Remove event handlers (e.g., onclick=)\n    .trim();\n  },\n  // Validates if the file size is within the allowed limit (500MB).\n  validateFileSize: size => size <= 500 * 1024 * 1024,\n  // Increased to 500MB\n  // Validates if the file type is among the allowed types.\n  validateFileType: type => {\n    // Expanded allowed types to include PDF and DOCX\n    const allowedTypes = ['text/plain', 'text/csv', 'application/json', 'application/pdf',\n    // Portable Document Format\n    'application/vnd.openxmlformats-officedocument.wordprocessingml.document' // .docx\n    ];\n    return allowedTypes.includes(type);\n  },\n  // Generates a cryptographically secure random ID.\n  generateSecureId: () => crypto.getRandomValues(new Uint32Array(1))[0].toString(36),\n  // Creates a simple rate-limiting function.\n  createRateLimit: (maxCalls, timeWindow) => {\n    const calls = []; // Stores timestamps of recent calls\n    return () => {\n      const now = Date.now();\n      // Filter out calls that are outside the time window\n      const validCalls = calls.filter(time => now - time < timeWindow);\n      if (validCalls.length >= maxCalls) {\n        throw new Error('Rate limit exceeded');\n      }\n      calls.push(now); // Add current call timestamp\n      return true;\n    };\n  }\n};\n\n// --- Reading Enhancer Engine - Core Innovation ---\nconst ReadingEnhancerEngine = {\n  // Calculates optimal fixation points based on word length and linguistic patterns.\n  calculateFixation: (word, fixationLevel = 0.5) => {\n    if (!word || word.length <= 1) return word.length;\n    const lowerWord = word.toLowerCase();\n    const len = word.length;\n    let fixationPoint;\n\n    // Rule 1: Basic length-based fixation\n    fixationPoint = Math.ceil(len * fixationLevel);\n\n    // Rule 2: Adjust for common prefixes (e.g., 'un', 're', 'pre')\n    const prefixes = ['un', 're', 'pre', 'dis', 'in', 'im', 'ir', 'il', 'anti', 'auto', 'bio', 'co', 'de', 'ex', 'fore', 'inter', 'micro', 'mid', 'mono', 'non', 'over', 'post', 'pro', 'sub', 'super', 'trans', 'tri', 'under'];\n    for (const prefix of prefixes) {\n      if (lowerWord.startsWith(prefix) && len > prefix.length) {\n        fixationPoint = Math.min(fixationPoint, prefix.length);\n        break;\n      }\n    }\n\n    // Rule 3: Adjust for common suffixes (e.g., 'ing', 'ed', 'tion')\n    const suffixes = ['ing', 'ed', 'ly', 'tion', 'sion', 'able', 'ible', 'al', 'ent', 'ence', 'ive', 'ize', 'ise', 'ment', 'ness', 'ous', 'ful', 'less'];\n    for (const suffix of suffixes) {\n      if (lowerWord.endsWith(suffix) && len > suffix.length) {\n        fixationPoint = Math.min(fixationPoint, len - suffix.length);\n        break;\n      }\n    }\n\n    // Rule 4: Balance for very short/long words\n    if (len <= 3) {\n      fixationPoint = 1;\n    } else if (len > 8) {\n      fixationPoint = Math.min(fixationPoint + 1, len - 1);\n    }\n\n    // Ensure fixation point is at least 1 and not the very last character\n    return Math.min(Math.max(1, fixationPoint), len - 1);\n  },\n  // Processes a text into smaller, enhanced reading-formatted chunks.\n  applyEnhancedFormatting: (text, settings) => {\n    if (!text) return [];\n    const {\n      fixation,\n      opacity,\n      maxWordsPerChunk\n    } = settings;\n    const initialChunks = [];\n    const paragraphs = text.split(/(?:\\r?\\n){2,}/).filter(p => p.trim() !== '');\n\n    // --- Stage 1: Natural Chunking (Sentence/Clause-based) ---\n    paragraphs.forEach(paragraphContent => {\n      // Tokens: words (including contractions), punctuation, and spaces\n      // This regex attempts to keep common abbreviations like \"Dr.\" together by using a negative lookbehind.\n      const tokens = paragraphContent.match(/(\\b\\w+'?\\w*\\b(?!\\.)|[.,!?;:—-]+(?!\\.)|\\s+)/g) || [];\n      let currentChunkItems = [];\n      let currentChunkOriginalTextParts = [];\n      tokens.forEach(token => {\n        if (!token) return; // Skip empty tokens\n\n        const isWord = token.match(/^\\b\\w+'?\\w*\\b$/);\n        const isSpace = token.match(/^\\s+$/);\n        // Expanded punctuation check to include all common sentence/clause terminators\n        const isPunctuation = token.match(/^[.,!?;:—-]+$/);\n        if (isWord) {\n          const word = token;\n          const fixationPoint = ReadingEnhancerEngine.calculateFixation(word, fixation);\n          const bold = word.slice(0, fixationPoint);\n          const normal = word.slice(fixationPoint);\n          currentChunkItems.push({\n            type: 'word',\n            content: token,\n            bold,\n            normal,\n            opacity\n          });\n          currentChunkOriginalTextParts.push(token);\n        } else if (isSpace) {\n          currentChunkItems.push({\n            type: 'space',\n            content: token\n          });\n          currentChunkOriginalTextParts.push(token);\n        } else if (isPunctuation) {\n          // Try to append punctuation to the preceding word in the current chunk\n          let appended = false;\n          // Iterate backwards to find the last word, skipping spaces\n          for (let i = currentChunkItems.length - 1; i >= 0; i--) {\n            if (currentChunkItems[i].type === 'word') {\n              currentChunkItems[i].content += token;\n              currentChunkItems[i].normal += token;\n              appended = true;\n              break;\n            } else if (currentChunkItems[i].type === 'space') {\n              // Keep looking backwards past spaces\n              continue;\n            } else {\n              // Found another punctuation or unknown type before a word, stop looking backwards\n              break;\n            }\n          }\n          if (!appended) {\n            // If no preceding word (e.g., starts with punctuation or only spaces so far), add as standalone\n            currentChunkItems.push({\n              type: 'punctuation',\n              content: token,\n              opacity\n            });\n          }\n          currentChunkOriginalTextParts.push(token);\n\n          // Check if this punctuation marks the end of a natural reading chunk (sentence or major clause)\n          // Prioritize full stops, exclamation marks, question marks for hard breaks\n          // Commas, semicolons, em-dashes for softer breaks\n          const endsSentence = token.match(/[.!?]$/);\n          const endsClause = token.match(/[,;—]$/);\n          if ((endsSentence || endsClause) && currentChunkItems.length > 0) {\n            initialChunks.push({\n              words: currentChunkItems,\n              originalContent: currentChunkOriginalTextParts.join('')\n            });\n            currentChunkItems = [];\n            currentChunkOriginalTextParts = [];\n          }\n        }\n      });\n\n      // After processing all tokens in a paragraph, add any remaining content as a chunk\n      if (currentChunkItems.length > 0) {\n        initialChunks.push({\n          words: currentChunkItems,\n          originalContent: currentChunkOriginalTextParts.join('')\n        });\n      }\n\n      // Add a paragraph break marker if not the very last paragraph\n      if (paragraphContent.trim().length > 0 && paragraphContent !== paragraphs[paragraphs.length - 1].trim()) {\n        initialChunks.push({\n          words: [],\n          originalContent: '',\n          isParagraphBreak: true\n        });\n      }\n    });\n\n    // --- Stage 2: maxWordsPerChunk Fallback (for oversized natural chunks) ---\n    const finalChunks = [];\n    initialChunks.forEach(chunk => {\n      if (chunk.isParagraphBreak) {\n        finalChunks.push(chunk); // Preserve paragraph breaks\n        return;\n      }\n      const wordItemsInChunk = chunk.words.filter(item => item.type === 'word');\n      // Only apply maxWordsPerChunk fallback if the chunk's word count exceeds the limit\n      // and it's not a natural break (which should have already been handled).\n      // This is primarily for very long sentences without internal punctuation.\n      if (wordItemsInChunk.length > maxWordsPerChunk) {\n        let currentSubChunkItems = [];\n        let currentSubChunkOriginalTextParts = [];\n        let wordsCountInCurrentSubChunk = 0;\n        chunk.words.forEach((item, index) => {\n          currentSubChunkItems.push(item);\n          currentSubChunkOriginalTextParts.push(item.content);\n          if (item.type === 'word') {\n            wordsCountInCurrentSubChunk++;\n          }\n\n          // If we've hit the maxWordsPerChunk limit OR it's the very last item of the oversized chunk\n          if (wordsCountInCurrentSubChunk >= maxWordsPerChunk || index === chunk.words.length - 1) {\n            // Find the nearest preceding space to break on if possible, for better readability\n            let splitIndex = currentSubChunkItems.length - 1;\n            for (let i = currentSubChunkItems.length - 1; i >= 0; i--) {\n              if (currentSubChunkItems[i].type === 'space') {\n                splitIndex = i;\n                break;\n              }\n            }\n\n            // Create a sub-chunk up to the split point\n            const subChunkToPush = {\n              words: currentSubChunkItems.slice(0, splitIndex + 1),\n              originalContent: currentSubChunkOriginalTextParts.slice(0, splitIndex + 1).join('')\n            };\n\n            // Push if it contains actual content\n            if (subChunkToPush.words.length > 0 && subChunkToPush.originalContent.trim() !== '') {\n              finalChunks.push(subChunkToPush);\n            }\n\n            // Keep the remaining part for the next sub-chunk\n            currentSubChunkItems = currentSubChunkItems.slice(splitIndex + 1);\n            currentSubChunkOriginalTextParts = currentSubChunkOriginalTextParts.slice(splitIndex + 1);\n            wordsCountInCurrentSubChunk = currentSubChunkItems.filter(item => item.type === 'word').length;\n\n            // If we are at the very last item of the original oversized chunk and there's remaining content,\n            // ensure it's pushed as a final sub-chunk.\n            if (index === chunk.words.length - 1 && currentSubChunkItems.length > 0) {\n              finalChunks.push({\n                words: currentSubChunkItems,\n                originalContent: currentSubChunkOriginalTextParts.join('')\n              });\n              currentSubChunkItems = []; // Clear for next iteration\n              currentSubChunkOriginalTextParts = [];\n              wordsCountInCurrentSubChunk = 0;\n            }\n          }\n        });\n      } else {\n        // Chunk is fine, add as is\n        finalChunks.push(chunk);\n      }\n    });\n\n    // Assign final, sequential chunkIndex to all chunks\n    finalChunks.forEach((chunk, index) => {\n      chunk.chunkIndex = index;\n    });\n    return finalChunks;\n  }\n};\n\n// --- Reading Progress Tracker ---\nconst ProgressTracker = {\n  // Calculates Words Per Minute (WPM).\n  calculateWPM: (wordsRead, timeElapsedSeconds) => {\n    if (timeElapsedSeconds <= 0) return 0;\n    // WPM = (Words Read / Time in Minutes)\n    return Math.round(wordsRead / timeElapsedSeconds * 60);\n  },\n  // Calculates a simplified comprehension score (conceptual).\n  calculateComprehensionScore: (readingTime, pauseCount, backtrackCount) => {\n    const baseScore = 100;\n    const pausePenalty = pauseCount * 2; // Each pause reduces score by 2\n    const backtrackPenalty = backtrackCount * 5; // Each backtrack reduces score by 5\n    return Math.max(0, baseScore - pausePenalty - backtrackPenalty); // Score cannot be negative\n  }\n};\n\n// --- Accessibility Features Component ---\nconst AccessibilityPanel = ({\n  settings,\n  onSettingsChange\n}) => {\n  // Predefined accessibility presets for different reading needs.\n  const accessibilityPresets = {\n    dyslexia: {\n      fixation: 0.7,\n      saccade: 1.2,\n      opacity: 0.9,\n      speed: 3.0,\n      maxWordsPerChunk: 5\n    },\n    // Slower speed per chunk, more bolding, smaller chunks\n    adhd: {\n      fixation: 0.6,\n      saccade: 0.8,\n      opacity: 1.0,\n      speed: 1.8,\n      maxWordsPerChunk: 8\n    },\n    // Slightly faster speed per chunk, slightly more bolding, medium chunks\n    default: {\n      fixation: 0.5,\n      saccade: 1.0,\n      opacity: 1.0,\n      speed: 2.5,\n      maxWordsPerChunk: 10\n    } // Standard settings (adjusted for chunk-by-chunk reading, larger chunks)\n  };\n\n  // Applies a selected preset to the current settings.\n  const applyPreset = preset => {\n    onSettingsChange({\n      ...settings,\n      ...accessibilityPresets[preset]\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200 shadow-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Accessibility, {\n        className: \"w-5 h-5 text-purple-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-purple-800\",\n        children: \"Accessibility Presets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-3 gap-3\",\n      children: [\" \", Object.keys(accessibilityPresets).map(preset => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => applyPreset(preset),\n        className: \"p-3 bg-white rounded-lg border hover:bg-purple-100 transition-all duration-300 text-sm font-medium capitalize shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transform hover:scale-[1.02]\",\n        children: preset === 'default' ? 'Standard' : preset\n      }, preset, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 594,\n    columnNumber: 5\n  }, this);\n};\n_c2 = AccessibilityPanel;\nAccessibilityPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  onSettingsChange: PropTypes.func.isRequired\n};\n\n// --- Enhanced Reader Component ---\nconst EnhancedReader = ({\n  text,\n  settings,\n  onProgress,\n  onSummarize,\n  onExplainSelection,\n  onBuildVocabulary,\n  onGenerateStudyQuestions,\n  onSimplifyText,\n  onRephraseSelectedText,\n  onTranslateSelectedText,\n  onAnalyzeSentiment,\n  onGetContextualInfo\n}) => {\n  _s2();\n  const {\n    readingMode\n  } = settings;\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentChunkIndex, setCurrentChunkIndex] = useState(0); // Used for 'chunk' mode\n  const [currentParagraphIndex, setCurrentParagraphIndex] = useState(0); // Used for 'paragraph' mode\n  const [startTime, setStartTime] = useState(null);\n  const [readingStats, setReadingStats] = useState({\n    wordsRead: 0,\n    wpm: 0,\n    timeElapsed: 0,\n    pauseCount: 0,\n    backtrackCount: 0\n  });\n  const [isProcessingTextForEnhancedReading, setIsProcessingTextForEnhancedReading] = useState(false);\n  const [selectedText, setSelectedText] = useState('');\n  const [showLLMButtons, setShowLLMButtons] = useState(false);\n\n  // State to hold the result of enhanced reading processing\n  const [processedChunks, setProcessedChunks] = useState([]);\n\n  // Memoize grouped paragraphs\n  const groupedParagraphs = useMemo(() => {\n    if (!processedChunks.length) return [];\n    const paragraphs = [];\n    let currentParagraph = [];\n    processedChunks.forEach(chunk => {\n      if (chunk.isParagraphBreak) {\n        if (currentParagraph.length > 0) {\n          paragraphs.push(currentParagraph);\n        }\n        currentParagraph = [];\n      } else {\n        currentParagraph.push(chunk);\n      }\n    });\n    if (currentParagraph.length > 0) {\n      paragraphs.push(currentParagraph);\n    }\n    return paragraphs;\n  }, [processedChunks]);\n\n  // Effect to process text into enhanced reading chunks whenever text or settings change\n  useEffect(() => {\n    const processText = () => {\n      setIsProcessingTextForEnhancedReading(true);\n      const chunks = ReadingEnhancerEngine.applyEnhancedFormatting(text, settings);\n      setProcessedChunks(chunks);\n      setIsProcessingTextForEnhancedReading(false);\n      setCurrentChunkIndex(0); // Reset chunk index on new text/settings\n      setCurrentParagraphIndex(0); // Reset paragraph index on new text/settings\n      setIsPlaying(false); // Stop playing\n      setStartTime(null); // Clear start time\n      setReadingStats({\n        wordsRead: 0,\n        wpm: 0,\n        timeElapsed: 0,\n        pauseCount: 0,\n        backtrackCount: 0\n      }); // Reset stats\n    };\n    if (text) {\n      processText();\n    } else {\n      setProcessedChunks([]); // Clear chunks if no text\n    }\n  }, [text, settings]); // Re-run effect when text or settings change\n\n  // Determine current content to display based on readingMode\n  const currentContentToDisplay = useMemo(() => {\n    if (readingMode === 'chunk') {\n      return processedChunks[currentChunkIndex];\n    } else {\n      // 'paragraph' mode\n      const currentParaChunks = groupedParagraphs[currentParagraphIndex];\n      // Flatten the chunks within the current paragraph for rendering\n      return currentParaChunks ? {\n        words: currentParaChunks.flatMap(chunk => chunk.words)\n      } : null;\n    }\n  }, [readingMode, currentChunkIndex, currentParagraphIndex, processedChunks, groupedParagraphs]);\n\n  // Calculate progress based on mode\n  const progress = useMemo(() => {\n    if (readingMode === 'chunk') {\n      return processedChunks.length > 0 ? currentChunkIndex / processedChunks.length * 100 : 0;\n    } else {\n      // 'paragraph' mode\n      return groupedParagraphs.length > 0 ? currentParagraphIndex / groupedParagraphs.length * 100 : 0;\n    }\n  }, [readingMode, currentChunkIndex, currentParagraphIndex, processedChunks, groupedParagraphs]);\n\n  // Effect hook for the automatic reading interval ('chunk' mode only).\n  useEffect(() => {\n    let interval;\n    if (isPlaying && readingMode === 'chunk' && currentChunkIndex < processedChunks.length) {\n      if (!startTime) setStartTime(Date.now()); // Start timer when playing begins\n\n      interval = setInterval(() => {\n        setCurrentChunkIndex(prev => {\n          const newIndex = prev + 1;\n          if (newIndex >= processedChunks.length) {\n            setIsPlaying(false); // Stop playing at end of text\n            return prev;\n          }\n\n          // Sum words read up to the new current chunk for WPM calculation\n          let wordsReadUpToCurrentChunk = 0;\n          for (let i = 0; i < newIndex; i++) {\n            wordsReadUpToCurrentChunk += processedChunks[i].words.filter(word => word.type === 'word').length;\n          }\n          const elapsed = (Date.now() - startTime) / 1000; // Time in seconds\n          const wpm = ProgressTracker.calculateWPM(wordsReadUpToCurrentChunk, elapsed);\n          setReadingStats(prevStats => ({\n            ...prevStats,\n            wordsRead: wordsReadUpToCurrentChunk,\n            wpm,\n            timeElapsed: elapsed\n          }));\n\n          // Notify parent component about reading progress\n          onProgress && onProgress({\n            wordsRead: wordsReadUpToCurrentChunk,\n            wpm,\n            progress: newIndex / processedChunks.length * 100\n          });\n          return newIndex;\n        });\n      }, settings.speed * 1000); // Interval based on user-defined speed (per chunk)\n    }\n\n    // Cleanup function: clear the interval when component unmounts or dependencies change\n    return () => clearInterval(interval);\n  }, [isPlaying, currentChunkIndex, processedChunks.length, settings.speed, startTime, onProgress, processedChunks, readingMode]);\n\n  // Handler for Play/Pause button ('chunk' mode only).\n  const handlePlayPause = useCallback(() => {\n    if (readingMode !== 'chunk') return; // Only allow in chunk mode\n\n    if (!isPlaying && !startTime) {\n      setStartTime(Date.now()); // Set start time only once when playback begins initially\n    } else if (isPlaying) {\n      // If pausing, increment pause count\n      setReadingStats(prev => ({\n        ...prev,\n        pauseCount: prev.pauseCount + 1\n      }));\n    }\n    setIsPlaying(prev => !prev); // Toggle playing state\n  }, [isPlaying, startTime, readingMode]);\n\n  // Handler for Reset button.\n  const handleReset = useCallback(() => {\n    setIsPlaying(false); // Stop playing\n    setCurrentChunkIndex(0); // Reset chunk index to beginning\n    setCurrentParagraphIndex(0); // Reset paragraph index to beginning\n    setStartTime(null); // Clear start time\n    setReadingStats({\n      wordsRead: 0,\n      wpm: 0,\n      timeElapsed: 0,\n      pauseCount: 0,\n      backtrackCount: 0\n    }); // Reset all stats\n  }, []);\n\n  // Handler for text selection\n  const handleTextSelection = useCallback(() => {\n    const selection = window.getSelection();\n    const text = selection.toString().trim();\n    if (text.length > 0) {\n      setSelectedText(text);\n      setShowLLMButtons(true); // Show buttons when text is selected\n    } else {\n      setSelectedText('');\n      setShowLLMButtons(false); // Hide buttons when no text is selected\n    }\n  }, []);\n\n  // Navigation for 'paragraph' mode\n  const handleNextParagraph = useCallback(() => {\n    if (currentParagraphIndex < groupedParagraphs.length - 1) {\n      setCurrentParagraphIndex(prev => prev + 1);\n      // Only increment words read for the current paragraph on forward movement in paragraph mode\n      setReadingStats(prev => {\n        var _groupedParagraphs$cu;\n        return {\n          ...prev,\n          wordsRead: prev.wordsRead + (((_groupedParagraphs$cu = groupedParagraphs[currentParagraphIndex]) === null || _groupedParagraphs$cu === void 0 ? void 0 : _groupedParagraphs$cu.flatMap(chunk => chunk.words).filter(word => word.type === 'word').length) || 0)\n        };\n      });\n    }\n  }, [currentParagraphIndex, groupedParagraphs]);\n  const handlePreviousParagraph = useCallback(() => {\n    if (currentParagraphIndex > 0) {\n      setCurrentParagraphIndex(prev => prev - 1);\n      setReadingStats(prev => ({\n        ...prev,\n        backtrackCount: prev.backtrackCount + 1\n      })); // Increment backtrack count\n    }\n  }, [currentParagraphIndex]);\n\n  // Show loading state if text is being processed.\n  if (isProcessingTextForEnhancedReading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center justify-center bg-white p-12 rounded-lg border shadow-xl min-h-[300px]\",\n      children: [/*#__PURE__*/_jsxDEV(Loader2, {\n        className: \"w-16 h-16 text-blue-500 animate-spin mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 801,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl font-semibold text-gray-700\",\n        children: \"Processing text for enhanced reading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 802,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 text-sm mt-2\",\n        children: \"This might take a moment for very large files.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 800,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Display message if no text content is available after processing.\n  if (!currentContentToDisplay || processedChunks.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8 text-gray-500 bg-white rounded-lg border shadow-xl min-h-[300px] flex flex-col justify-center items-center\",\n      children: [/*#__PURE__*/_jsxDEV(Book, {\n        className: \"w-16 h-16 mx-auto mb-4 opacity-50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 812,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg\",\n        children: \"No text content available for enhanced reading. Please upload a file.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 811,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 sm:p-8 rounded-lg border shadow-xl\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-6 sm:mb-8 min-h-[120px] sm:min-h-[150px] flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl sm:text-3xl lg:text-4xl font-mono leading-relaxed px-4 break-words\",\n        onMouseUp: handleTextSelection // Capture text selection\n        ,\n        children: currentContentToDisplay.words.map((item, idx) => item.type === 'word' || item.type === 'punctuation' ? /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            opacity: item.opacity\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold text-blue-900\",\n            children: item.bold\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-normal text-gray-600\",\n            style: {\n              opacity: item.opacity * 0.7\n            },\n            children: item.normal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 830,\n            columnNumber: 17\n          }, this)]\n        }, item.index + '-' + idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 828,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: item.content\n        }, item.index + '-' + idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 833,\n          columnNumber: 15\n        }, this) // Render spaces\n        )\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 822,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 821,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4\",\n        children: [readingMode === 'chunk' &&\n        /*#__PURE__*/\n        // Show Play/Pause only in chunk mode\n        _jsxDEV(\"button\", {\n          onClick: handlePlayPause,\n          className: \"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\",\n          children: [isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(Play, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 60\n          }, this), isPlaying ? 'Pause' : 'Play']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 13\n        }, this), readingMode === 'paragraph' &&\n        /*#__PURE__*/\n        // Show paragraph navigation buttons\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviousParagraph,\n            disabled: currentParagraphIndex === 0,\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, this), \"Prev Paragraph\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNextParagraph,\n            disabled: currentParagraphIndex >= groupedParagraphs.length - 1,\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: [\"Next Paragraph\", /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 870,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 863,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleReset,\n          className: \"flex items-center justify-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50\",\n          children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 13\n          }, this), \"Reset\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 11\n        }, this), text &&\n        /*#__PURE__*/\n        // Only show summarize button if text is loaded\n        _jsxDEV(\"button\", {\n          onClick: onSummarize,\n          className: \"flex items-center justify-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50\",\n          children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 15\n          }, this), \"Summarize Text \\u2728\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 13\n        }, this), selectedText && showLLMButtons &&\n        /*#__PURE__*/\n        // Show LLM buttons if text is selected\n        _jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onExplainSelection(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 900,\n              columnNumber: 17\n            }, this), \"Explain Selection \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onBuildVocabulary(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(GraduationCap, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 908,\n              columnNumber: 17\n            }, this), \"Build Vocabulary \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 903,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onGenerateStudyQuestions(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-blue-800 text-white rounded-lg hover:bg-blue-900 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(HelpCircle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 916,\n              columnNumber: 17\n            }, this), \"Study Questions \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 911,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onSimplifyText(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-green-800 text-white rounded-lg hover:bg-green-900 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 924,\n              columnNumber: 17\n            }, this), \"Simplify Text \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 919,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onRephraseSelectedText(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Shuffle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 932,\n              columnNumber: 17\n            }, this), \"Rephrase Selection \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 927,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onTranslateSelectedText(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Languages, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 940,\n              columnNumber: 17\n            }, this), \"Translate Selection \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 935,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onAnalyzeSentiment(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Smile, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 948,\n              columnNumber: 17\n            }, this), \"Analyze Sentiment \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 943,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onGetContextualInfo(selectedText);\n              setSelectedText('');\n              setShowLLMButtons(false);\n            },\n            className: \"flex items-center justify-center gap-2 px-6 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50\",\n            children: [/*#__PURE__*/_jsxDEV(Info, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 956,\n              columnNumber: 17\n            }, this), \"Contextual Info \\u2728\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 841,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full bg-gray-200 rounded-full h-3 shadow-inner mt-4\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300\",\n          style: {\n            width: `${progress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 965,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 964,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-center text-sm mt-4\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 p-3 rounded-lg shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-blue-800 text-base sm:text-lg\",\n            children: readingStats.wordsRead\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 974,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-blue-600\",\n            children: \"Words Read\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 975,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 973,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-50 p-3 rounded-lg shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-green-800 text-base sm:text-lg\",\n            children: readingStats.wpm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 978,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-green-600\",\n            children: \"WPM\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 979,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 977,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-purple-50 p-3 rounded-lg shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-purple-800 text-base sm:text-lg\",\n            children: [Math.round(progress), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 982,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-purple-600\",\n            children: \"Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 983,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-orange-50 p-3 rounded-lg shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-bold text-orange-800 text-base sm:text-lg\",\n            children: [Math.round(readingStats.timeElapsed), \"s\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-orange-600\",\n            children: \"Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 987,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 985,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 972,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 840,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 819,\n    columnNumber: 5\n  }, this);\n};\n_s2(EnhancedReader, \"f50qjto5zQk1mj7afjv7LKtMiT4=\");\n_c3 = EnhancedReader;\nEnhancedReader.propTypes = {\n  text: PropTypes.string.isRequired,\n  settings: PropTypes.object.isRequired,\n  onProgress: PropTypes.func,\n  onSummarize: PropTypes.func.isRequired,\n  onExplainSelection: PropTypes.func.isRequired,\n  onBuildVocabulary: PropTypes.func.isRequired,\n  onGenerateStudyQuestions: PropTypes.func.isRequired,\n  onSimplifyText: PropTypes.func.isRequired,\n  onRephraseSelectedText: PropTypes.func.isRequired,\n  onTranslateSelectedText: PropTypes.func.isRequired,\n  onAnalyzeSentiment: PropTypes.func.isRequired,\n  // New prop\n  onGetContextualInfo: PropTypes.func.isRequired // New prop\n};\n\n// --- Enhanced Settings Panel ---\nconst EnhancedSettings = ({\n  settings,\n  onSettingsChange\n}) => {\n  _s3();\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  // Handles changes to settings, applying validation.\n  const handleSettingChange = useCallback((key, value) => {\n    let validatedValue = parseFloat(value);\n    if (isNaN(validatedValue)) {\n      validatedValue = settings[key]; // Fallback to current setting if input is invalid\n    }\n    switch (key) {\n      case 'speed':\n        validatedValue = Math.max(0.5, Math.min(10, validatedValue)); // Speed between 0.5s and 10s per chunk\n        break;\n      case 'fixation':\n        validatedValue = Math.max(0.2, Math.min(0.8, validatedValue)); // Fixation between 20% and 80%\n        break;\n      case 'saccade':\n        validatedValue = Math.max(0.5, Math.min(1.5, validatedValue)); // Saccade between 50% and 150%\n        break;\n      case 'opacity':\n        validatedValue = Math.max(0.3, Math.min(1, validatedValue)); // Opacity between 30% and 100%\n        break;\n      case 'maxWordsPerChunk':\n        // New case for maxWordsPerChunk\n        validatedValue = Math.max(3, Math.min(20, Math.round(validatedValue))); // 3 to 20 words per chunk, integer\n        break;\n      case 'readingMode':\n        validatedValue = value; // 'chunk' or 'paragraph'\n        break;\n      default:\n        break;\n    }\n    onSettingsChange({\n      ...settings,\n      [key]: validatedValue\n    });\n  }, [settings, onSettingsChange]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg border shadow-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Zap, {\n            className: \"w-5 h-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1052,\n            columnNumber: 13\n          }, this), \"Enhanced Reading Settings\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowAdvanced(prev => !prev),\n          className: \"text-blue-600 hover:text-blue-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-300 rounded-md px-2 py-1 transition-colors duration-200\",\n          children: [showAdvanced ? 'Hide' : 'Show', \" Advanced\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1055,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1050,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Reading Mode\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1066,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"inline-flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                className: \"form-radio h-4 w-4 text-blue-600\",\n                name: \"readingMode\",\n                value: \"chunk\",\n                checked: settings.readingMode === 'chunk',\n                onChange: e => handleSettingChange('readingMode', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1071,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 text-gray-700\",\n                children: \"Chunk by Chunk\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1079,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1070,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"inline-flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                className: \"form-radio h-4 w-4 text-blue-600\",\n                name: \"readingMode\",\n                value: \"paragraph\",\n                checked: settings.readingMode === 'paragraph',\n                onChange: e => handleSettingChange('readingMode', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1082,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 text-gray-700\",\n                children: \"Full Paragraph\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1090,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1081,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1069,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1065,\n          columnNumber: 11\n        }, this), settings.readingMode === 'chunk' &&\n        /*#__PURE__*/\n        // Only show speed control for chunk mode\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"speed-range\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [\"Reading Speed (\", settings.speed.toFixed(1), \"s per chunk)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1098,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"speed-range\",\n            type: \"range\",\n            min: \"0.5\",\n            max: \"10\",\n            step: \"0.1\",\n            value: settings.speed,\n            onChange: e => handleSettingChange('speed', e.target.value),\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-xs text-gray-500 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Fast (0.5s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1112,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Slow (10s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1113,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1111,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1097,\n          columnNumber: 13\n        }, this), settings.readingMode === 'chunk' &&\n        /*#__PURE__*/\n        // Only show max words per chunk for chunk mode\n        _jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"max-words-per-chunk-range\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [\"Max Words Per Chunk (\", settings.maxWordsPerChunk, \" words)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"max-words-per-chunk-range\",\n            type: \"range\",\n            min: \"3\",\n            max: \"20\",\n            step: \"1\",\n            value: settings.maxWordsPerChunk,\n            onChange: e => handleSettingChange('maxWordsPerChunk', e.target.value),\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-xs text-gray-500 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Smaller Chunks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1135,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Larger Chunks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1136,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1134,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fixation-range\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: [\"Fixation Level (\", Math.round(settings.fixation * 100), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"fixation-range\",\n            type: \"range\",\n            min: \"0.2\",\n            max: \"0.8\",\n            step: \"0.1\",\n            value: settings.fixation,\n            onChange: e => handleSettingChange('fixation', e.target.value),\n            className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-xs text-gray-500 mt-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Less Bold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1157,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"More Bold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1158,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 11\n        }, this), showAdvanced && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"saccade-range\",\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: [\"Saccade (\", Math.round(settings.saccade * 100), \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1166,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"saccade-range\",\n              type: \"range\",\n              min: \"0.5\",\n              max: \"1.5\",\n              step: \"0.1\",\n              value: settings.saccade,\n              onChange: e => handleSettingChange('saccade', e.target.value),\n              className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-xs text-gray-500 mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Narrow Gaze\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Wide Gaze\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1181,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1179,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"opacity-range\",\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: [\"Text Opacity (\", Math.round(settings.opacity * 100), \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"opacity-range\",\n              type: \"range\",\n              min: \"0.3\",\n              max: \"1\",\n              step: \"0.1\",\n              value: settings.opacity,\n              onChange: e => handleSettingChange('opacity', e.target.value),\n              className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-xs text-gray-500 mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Fainter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Full Visibility\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1202,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1200,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1186,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1049,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccessibilityPanel, {\n      settings: settings,\n      onSettingsChange: onSettingsChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1048,\n    columnNumber: 5\n  }, this);\n};\n_s3(EnhancedSettings, \"gE7BUm5TmeeoJRQtCM14IuDX7NQ=\");\n_c4 = EnhancedSettings;\nEnhancedSettings.propTypes = {\n  settings: PropTypes.object.isRequired,\n  onSettingsChange: PropTypes.func.isRequired\n};\n\n// --- Secure File Importer ---\nconst SecureFileImporter = ({\n  onFileLoaded,\n  onSecurityStatus\n}) => {\n  _s4();\n  const [isDragging, setIsDragging] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState([]);\n  const [showDriveMessage, setShowDriveMessage] = useState(false); // New state for Drive message\n\n  // Dynamically load PDF.js library\n  const loadPdfJs = useCallback(async () => {\n    // Only load if not already loaded\n    if (typeof window.pdfjsLib === 'undefined') {\n      console.log(\"Loading PDF.js...\");\n      try {\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js';\n          script.onload = () => {\n            // Set up the worker source\n            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';\n            console.log(\"PDF.js loaded successfully.\");\n            resolve();\n          };\n          script.onerror = e => {\n            console.error(\"Failed to load PDF.js script:\", e);\n            reject(new Error(\"Failed to load PDF.js script from CDN. This is likely due to network issues or a Content Security Policy (CSP) blocking external scripts. If you control the environment, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library locally.\"));\n          };\n          document.head.appendChild(script);\n        });\n      } catch (error) {\n        throw new Error(`Failed to load PDF.js: ${error.message}`);\n      }\n    }\n  }, []);\n\n  // Dynamically load Mammoth.js library\n  const loadMammothJs = useCallback(async () => {\n    // Only load if not already loaded\n    if (typeof window.mammoth === 'undefined') {\n      console.log(\"Loading Mammoth.js...\");\n      try {\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mammoth.js/1.6.0/mammoth.browser.min.js';\n          script.onload = () => {\n            console.log(\"Mammoth.js loaded successfully.\");\n            resolve();\n          };\n          script.onerror = e => {\n            console.error(\"Failed to load Mammoth.js script:\", e);\n            reject(new Error(\"Failed to load Mammoth.js script from CDN. This is likely due to network issues or a Content Security Policy (CSP) blocking external scripts. If you control the environment, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library locally.\"));\n          };\n          document.head.appendChild(script);\n        });\n      } catch (error) {\n        throw new Error(`Failed to load Mammoth.js: ${error.message}`);\n      }\n    }\n  }, []);\n\n  // Parses PDF file content\n  const parsePdf = useCallback(async file => {\n    console.log(\"Starting PDF parsing for file:\", file.name);\n    try {\n      await loadPdfJs(); // Ensure PDF.js is loaded\n      const arrayBuffer = await file.arrayBuffer();\n      const loadingTask = window.pdfjsLib.getDocument({\n        data: arrayBuffer\n      });\n      const pdf = await loadingTask.promise;\n      let fullText = '';\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i); // Corrected: use `pdf.getPage`\n        const textContent = await page.getTextContent();\n        fullText += textContent.items.map(item => item.str).join(' ') + '\\n\\n';\n      }\n      console.log(\"PDF parsing completed.\");\n      return fullText;\n    } catch (error) {\n      console.error(\"Error during PDF parsing:\", error);\n      throw new Error(`PDF parsing failed: ${error.message || error.toString()}`);\n    }\n  }, [loadPdfJs]);\n\n  // Parses DOCX file content\n  const parseDocx = useCallback(async file => {\n    console.log(\"Starting DOCX parsing for file:\", file.name);\n    try {\n      await loadMammothJs(); // Ensure Mammoth.js is loaded\n      const arrayBuffer = await file.arrayBuffer();\n      const result = await window.mammoth.extractRawText({\n        arrayBuffer: arrayBuffer\n      });\n      console.log(\"DOCX parsing completed.\");\n      return result.value; // The raw text\n    } catch (error) {\n      console.error(\"Error during DOCX parsing:\", error);\n      throw new Error(`DOCX parsing failed: ${error.message || error.toString()}`);\n    }\n  }, [loadMammothJs]);\n\n  // Validates and processes the selected file.\n  const validateAndProcessFile = useCallback(async file => {\n    let newErrors = [];\n    console.log(\"File object received in validateAndProcessFile:\", file); // Debugging line\n    console.log(\"Type of file:\", typeof file, \"Is File instance:\", file instanceof File, \"Is Blob instance:\", file instanceof Blob); // Debugging line\n\n    try {\n      if (!file) {\n        newErrors.push('No file selected.');\n      } else {\n        // Add explicit type check for robustness\n        if (!(file instanceof File) && !(file instanceof Blob)) {\n          newErrors.push('Provided input is not a valid file or blob. Please select a file from your device.');\n          setErrors(newErrors);\n          onSecurityStatus(false, newErrors);\n          return;\n        }\n\n        // Validate file size and type using SecurityUtils\n        if (!SecurityUtils.validateFileSize(file.size)) {\n          newErrors.push(`File size (${(file.size / (1024 * 1024)).toFixed(2)}MB) exceeds 500MB limit. Please choose a smaller file.`);\n        }\n        if (!SecurityUtils.validateFileType(file.type)) {\n          newErrors.push(`Unsupported file type: \"${file.type}\". Please upload .txt, .csv, .json, .pdf, or .docx files.`);\n        }\n      }\n      if (newErrors.length > 0) {\n        setErrors(newErrors);\n        onSecurityStatus(false, newErrors);\n        return; // Stop if there are initial validation errors\n      }\n      setIsLoading(true); // Indicate loading state\n      let rawText = '';\n\n      // Determine how to read the file based on its type\n      if (file.type === 'application/pdf') {\n        rawText = await parsePdf(file);\n      } else if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n        rawText = await parseDocx(file);\n      } else {\n        // For text-based files\n        rawText = await file.text();\n      }\n      console.log(\"Raw text extracted. Length:\", rawText.length);\n      const sanitizedText = SecurityUtils.sanitizeText(rawText); // Sanitize content after extraction\n      console.log(\"Text sanitized. Length:\", sanitizedText.length);\n      if (sanitizedText.length === 0) {\n        newErrors.push('The file appears to be empty or contains only disallowed content after security sanitization. Please ensure the file has valid text.');\n        setErrors(newErrors);\n        onSecurityStatus(false, newErrors);\n        return;\n      }\n      setErrors([]); // Clear any previous errors\n      onSecurityStatus(true, []); // Indicate secure status\n      onFileLoaded(sanitizedText); // Pass the sanitized text to the parent component\n    } catch (error) {\n      // Catch any unexpected errors during file processing\n      let errorMsg;\n      if (error instanceof Error) {\n        errorMsg = `File processing failed: ${error.message}. Please try again or use a different file.`;\n      } else if (typeof error === 'object' && error !== null && 'isTrusted' in error) {\n        // This specifically targets the {\"isTrusted\": true} type of error for CDN loading\n        errorMsg = `A script required for file processing (e.g., PDF/DOCX) could not be loaded from its CDN. This might be due to a network issue, ad blocker, or Content Security Policy (CSP). To resolve, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library files (pdf.js and mammoth.js) locally with your application.`;\n        console.warn(\"Non-Error object (likely a script load event) caught in file processing:\", error);\n      } else if (typeof error === 'object' && error !== null) {\n        errorMsg = `File operation failed (unexpected error format: ${JSON.stringify(error)}). Please try again or use a different file.`;\n        console.warn(\"Non-Error object caught in file processing:\", error); // Log this unusual object\n      } else {\n        errorMsg = `An unknown error occurred during file processing: ${error}. Please try again.`;\n      }\n      setErrors([errorMsg]);\n      onSecurityStatus(false, [errorMsg]);\n      console.error(\"Final catch block received error:\", error); // Log the full error object for debugging\n    } finally {\n      setIsLoading(false); // End loading state\n    }\n  }, [onFileLoaded, onSecurityStatus, parsePdf, parseDocx]); // Dependencies for useCallback\n\n  // Handles file drop event for drag-and-drop functionality.\n  const handleDrop = useCallback(e => {\n    e.preventDefault();\n    setIsDragging(false);\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      validateAndProcessFile(files[0]); // Process the first dropped file\n    }\n  }, [validateAndProcessFile]); // Dependency on validateAndProcessFile\n\n  // Handles file selection via input field.\n  const handleFileSelect = useCallback(e => {\n    const file = e.target.files[0];\n    if (file) {\n      validateAndProcessFile(file); // Process the selected file\n    }\n  }, [validateAndProcessFile]); // Dependency on validateAndProcessFile\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `border-2 border-dashed rounded-lg p-8 text-center transition-all duration-300 ${isDragging ? 'border-blue-500 bg-blue-50 scale-[1.02] shadow-lg' : 'border-gray-300 bg-white shadow-md'} ${isLoading ? 'opacity-70 cursor-not-allowed' : 'cursor-pointer'}`,\n      onDrop: handleDrop,\n      onDragOver: e => e.preventDefault() // Required to allow drop\n      ,\n      onDragEnter: () => setIsDragging(true),\n      onDragLeave: () => setIsDragging(false),\n      children: [/*#__PURE__*/_jsxDEV(Upload, {\n        className: \"w-12 h-12 mx-auto mb-4 text-gray-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lg font-medium text-gray-700 mb-2\",\n        children: isLoading ? 'Processing file, please wait...' : 'Drag & drop your text file here or click to browse'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-500 mb-4\",\n        children: \"Supported formats: .txt, .csv, .json, .pdf, .docx (max 500MB)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".txt,.csv,.json,.pdf,.docx\" // Updated accept attribute\n        ,\n        onChange: handleFileSelect,\n        className: \"hidden\",\n        id: \"fileInput\",\n        disabled: isLoading // Disable input while loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        className: \"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 cursor-pointer disabled:opacity-50 shadow-lg transform hover:scale-[1.05] transition-transform duration-200\",\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1451,\n          columnNumber: 11\n        }, this), \"Choose File\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1447,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowDriveMessage(true),\n      className: \"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-lime-600 text-white rounded-lg hover:from-green-600 hover:to-lime-700 cursor-pointer disabled:opacity-50 shadow-lg transform hover:scale-[1.02] transition-transform duration-200\",\n      disabled: isLoading,\n      children: [/*#__PURE__*/_jsxDEV(HardDrive, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1462,\n        columnNumber: 9\n      }, this), \"Load from Google Drive (Beta)\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1457,\n      columnNumber: 7\n    }, this), showDriveMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg p-6 shadow-2xl max-w-md w-full space-y-4 animate-fade-in-up\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-bold text-gray-800 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(HardDrive, {\n            className: \"w-6 h-6 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1471,\n            columnNumber: 15\n          }, this), \" Google Drive Integration\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1470,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: \"For a full, secure Google Drive integration, a real-world application would typically:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1473,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-disc list-inside text-gray-600 space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Utilize Google OAuth 2.0 for secure user authentication.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1477,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Employ the Google Picker API for a user-friendly file selection interface.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1478,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Require a secure backend server to handle file content retrieval due to browser CORS policies and authentication complexities.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1479,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1476,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 font-semibold\",\n          children: \"In this client-side demo environment, direct fetching of arbitrary files from Google Drive is not supported due to these technical limitations and security requirements.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1481,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowDriveMessage(false),\n          className: \"w-full px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md transform hover:scale-[1.02]\",\n          children: \"Got It!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1484,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1469,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1468,\n      columnNumber: 9\n    }, this), errors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-red-50 border border-red-200 rounded-lg shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"w-5 h-5 text-red-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-medium text-red-800\",\n          children: \"Security Issues Detected:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1499,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1497,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-sm text-red-700 space-y-1 list-disc pl-5\",\n        children: errors.map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: error\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1503,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1501,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1496,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1422,\n    columnNumber: 5\n  }, this);\n};\n_s4(SecureFileImporter, \"GSFEyDDoNhMLQBUqxBXz6UdyWE8=\");\n_c5 = SecureFileImporter;\nSecureFileImporter.propTypes = {\n  onFileLoaded: PropTypes.func.isRequired,\n  onSecurityStatus: PropTypes.func.isRequired\n};\n\n// --- Security Status Component ---\nconst SecurityStatus = ({\n  isSecure,\n  errors\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `flex items-center gap-2 p-3 rounded-lg border shadow-md\n    ${isSecure ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`,\n  children: [/*#__PURE__*/_jsxDEV(Shield, {\n    className: `w-5 h-5 ${isSecure ? 'text-green-600' : 'text-red-600'}`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1522,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    className: `font-medium ${isSecure ? 'text-green-800' : 'text-red-800'}`,\n    children: [\"Security Status: \", isSecure ? 'Secure' : 'Issues Detected']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1523,\n    columnNumber: 5\n  }, this), errors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ml-auto text-sm font-semibold text-red-600\",\n    children: [\"(\", errors.length, \" issue\", errors.length > 1 ? 's' : '', \")\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1527,\n    columnNumber: 7\n  }, this), isSecure && errors.length === 0 && /*#__PURE__*/_jsxDEV(CheckCircle, {\n    className: \"w-5 h-5 text-green-600 ml-auto\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1532,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 1519,\n  columnNumber: 3\n}, this);\n_c6 = SecurityStatus;\nSecurityStatus.propTypes = {\n  isSecure: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired\n};\n\n// --- Main App Component: SynapseReadApp ---\nconst SynapseReadApp = () => {\n  _s5();\n  const [fileContent, setFileContent] = useState('');\n  const [settings, setSettings] = useState({\n    speed: 2.5,\n    // Adjusted default speed for chunk-by-chunk reading\n    fixation: 0.5,\n    saccade: 1,\n    opacity: 1,\n    maxWordsPerChunk: 10,\n    // New default setting for max words per chunk\n    readingMode: 'chunk' // New setting: 'chunk' or 'paragraph'\n  });\n  const [securityStatus, setSecurityStatus] = useState({\n    isSecure: true,\n    errors: []\n  });\n  const [readingProgress, setReadingProgress] = useState(null);\n  const [summary, setSummary] = useState(''); // State to store the generated summary\n  const [isSummarizing, setIsSummarizing] = useState(false); // State for summarization loading\n  const [summaryError, setSummaryError] = useState(''); // State for summary errors\n  const [showSummary, setShowSummary] = useState(false); // State to toggle summary visibility\n\n  const [explanation, setExplanation] = useState(''); // State to store the generated explanation\n  const [isExplaining, setIsExplaining] = useState(false); // State for explanation loading\n  const [explanationError, setExplanationError] = useState(''); // State for explanation errors\n  const [showExplanation, setShowExplanation] = useState(false); // State to toggle explanation visibility\n\n  const [vocabulary, setVocabulary] = useState(null); // State to store vocabulary data (object with definition, synonyms, antonyms, examples)\n  const [isBuildingVocabulary, setIsBuildingVocabulary] = useState(false); // State for vocabulary loading\n  const [vocabularyError, setVocabularyError] = useState(''); // State for vocabulary errors\n  const [showVocabulary, setShowVocabulary] = useState(false); // State to toggle vocabulary visibility\n\n  const [studyQuestions, setStudyQuestions] = useState(null); // State for study questions\n  const [isGeneratingStudyQuestions, setIsGeneratingStudyQuestions] = useState(false);\n  const [studyQuestionsError, setStudyQuestionsError] = useState('');\n  const [showStudyQuestions, setShowStudyQuestions] = useState(false);\n  const [simplifiedText, setSimplifiedText] = useState(''); // State for simplified text\n  const [isSimplifying, setIsSimplifying] = useState(false);\n  const [simplifyError, setSimplifyError] = useState('');\n  const [showSimplifiedText, setShowSimplifiedText] = useState(false);\n  const [faqAnswers, setFaqAnswers] = useState(null); // State for FAQ answers\n  const [isAnsweringFaq, setIsAnsweringFaq] = useState(false);\n  const [faqError, setFaqError] = useState('');\n  const [showFaq, setShowFaq] = useState(false);\n  const [keyTakeaways, setKeyTakeaways] = useState(null); // State for key takeaways\n  const [isGeneratingKeyTakeaways, setIsGeneratingKeyTakeaways] = useState(false);\n  const [keyTakeawaysError, setKeyTakeawaysError] = useState('');\n  const [showKeyTakeaways, setShowKeyTakeaways] = useState(false);\n  const [rephrasedText, setRephrasedText] = useState(''); // State for rephrased text\n  const [isRephrasingText, setIsRephrasingText] = useState(false);\n  const [rephraseError, setRephraseError] = useState('');\n  const [showRephrasedText, setShowRephrasedText] = useState(false);\n  const [translatedText, setTranslatedText] = useState(''); // State for translated text\n  const [isTranslatingText, setIsTranslatingText] = useState(false);\n  const [translateError, setTranslateError] = useState('');\n  const [showTranslatedText, setShowTranslatedText] = useState(false);\n  const [sentimentAnalysis, setSentimentAnalysis] = useState(null); // New state for sentiment\n  const [isAnalyzingSentiment, setIsAnalyzingSentiment] = useState(false);\n  const [sentimentError, setSentimentError] = useState('');\n  const [showSentiment, setShowSentiment] = useState(false);\n  const [contextualInfo, setContextualInfo] = useState(''); // New state for contextual info\n  const [isGettingContextualInfo, setIsGettingContextualInfo] = useState(false);\n  const [contextualInfoError, setContextualInfoError] = useState('');\n  const [showContextualInfo, setShowContextualInfo] = useState(false);\n\n  // Firestore states\n  const [firebaseDb, setFirebaseDb] = useState(null);\n  const [firebaseAuth, setFirebaseAuth] = useState(null);\n  const [appUserId, setAppUserId] = useState(null);\n  const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-synapse-read-app'; // Use provided __app_id or default\n\n  // Initialize Firebase and authenticate\n  useEffect(() => {\n    const initFirebase = async () => {\n      const {\n        db,\n        auth,\n        userId\n      } = await firebaseInitializeAndAuth(JSON.parse(__firebase_config), appId);\n      setFirebaseDb(db);\n      setFirebaseAuth(auth);\n      setAppUserId(userId);\n    };\n    initFirebase();\n  }, [appId]); // Depend on appId\n\n  // Callback for when a file's content is successfully loaded.\n  const handleFileLoaded = useCallback(content => {\n    setFileContent(content);\n    // Clear all previous LLM results when a new file is loaded\n    setSummary('');\n    setSummaryError('');\n    setShowSummary(false);\n    setExplanation('');\n    setExplanationError('');\n    setShowExplanation(false);\n    setVocabulary(null);\n    setVocabularyError('');\n    setShowVocabulary(false);\n    setStudyQuestions(null);\n    setStudyQuestionsError('');\n    setShowStudyQuestions(false);\n    setSimplifiedText('');\n    setSimplifyError('');\n    setShowSimplifiedText(false);\n    setFaqAnswers(null);\n    setFaqError('');\n    setShowFaq(false);\n    setKeyTakeaways(null);\n    setKeyTakeawaysError('');\n    setShowKeyTakeaways(false);\n    setRephrasedText('');\n    setRephraseError('');\n    setShowRephrasedText(false);\n    setTranslatedText('');\n    setTranslateError('');\n    setShowTranslatedText(false);\n    setSentimentAnalysis(null); // Clear new sentiment state\n    setSentimentError('');\n    setShowSentiment(false);\n    setContextualInfo(''); // Clear new contextual info state\n    setContextualInfoError('');\n    setShowContextualInfo(false);\n  }, []);\n\n  // Callback for when settings are changed.\n  const handleSettingsChange = useCallback(newSettings => {\n    setSettings(newSettings);\n  }, []);\n\n  // Callback to update the security status.\n  const handleSecurityStatus = useCallback((isSecure, errors) => {\n    setSecurityStatus({\n      isSecure,\n      errors\n    });\n  }, []);\n\n  // Callback to receive reading progress updates from EnhancedReader.\n  const handleReadingProgress = useCallback(progress => {\n    setReadingProgress(progress);\n  }, []);\n\n  // Handler for logging errors from ErrorBoundary\n  const handleLogError = useCallback(errorDetails => {\n    if (firebaseDb && appUserId) {\n      logErrorToFirestore(errorDetails, appUserId, appId);\n    } else {\n      console.warn(\"Firestore not ready for logging. Error details:\", errorDetails);\n    }\n  }, [firebaseDb, appUserId, appId]);\n\n  // --- LLM Powered Summarization Feature ---\n  const handleSummarizeText = useCallback(async () => {\n    if (!fileContent) {\n      setSummaryError(\"Please upload a document first to summarize.\");\n      return;\n    }\n\n    // Clear previous summary and errors\n    setSummary('');\n    setSummaryError('');\n    setIsSummarizing(true);\n    setShowSummary(true); // Show summary section while loading\n\n    try {\n      const prompt = `Summarize the following text concisely and accurately. Focus on the main points and key information. Ensure the summary is easy to understand and flows well:\\n\\n\"${fileContent}\"`;\n      const chatHistory = [{\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      }];\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for summarization...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setSummary(generatedText);\n        console.log(\"Summary generated successfully.\");\n      } else {\n        throw new Error(\"No summary content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error summarizing text:\", error);\n      setSummaryError(`Failed to generate summary: ${error.message}. Please try again.`);\n      setSummary(''); // Clear any partial summary\n    } finally {\n      setIsSummarizing(false);\n    }\n  }, [fileContent]); // Dependency on fileContent\n\n  // --- LLM Powered Explanation Feature ---\n  const handleExplainSelection = useCallback(async textToExplain => {\n    if (!textToExplain) {\n      setExplanationError(\"No text selected for explanation.\");\n      return;\n    }\n\n    // Clear previous explanation and errors\n    setExplanation('');\n    setExplanationError('');\n    setIsExplaining(true);\n    setShowExplanation(true); // Show explanation section while loading\n\n    try {\n      const prompt = `Explain the following text or concept in simple, easy-to-understand terms, suitable for someone with reading difficulties. Keep it concise:\\n\\n\"${textToExplain}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for explanation...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error2;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error2 = errorData.error) === null || _errorData$error2 === void 0 ? void 0 : _errorData$error2.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setExplanation(generatedText);\n        console.log(\"Explanation generated successfully.\");\n      } else {\n        throw new Error(\"No explanation content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error explaining text:\", error);\n      setExplanationError(`Failed to get explanation: ${error.message}. Please try again.`);\n      setExplanation(''); // Clear any partial explanation\n    } finally {\n      setIsExplaining(false);\n    }\n  }, []); // No dependencies for now as it uses local state and parameters\n\n  // --- LLM Powered Vocabulary Builder Feature ---\n  const handleBuildVocabulary = useCallback(async wordToLookup => {\n    if (!wordToLookup) {\n      setVocabularyError(\"No word selected for vocabulary lookup.\");\n      return;\n    }\n    setVocabulary(null);\n    setVocabularyError('');\n    setIsBuildingVocabulary(true);\n    setShowVocabulary(true);\n    try {\n      // Use a structured prompt to get JSON output\n      const prompt = `Provide definition, 3 synonyms, 3 antonyms (if applicable), and 2 example sentences for the word \"${wordToLookup}\". Format the output as a JSON object with keys: \"word\", \"definition\", \"synonyms\" (array of strings), \"antonyms\" (array of strings, can be empty), \"examples\" (array of strings).`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"OBJECT\",\n            properties: {\n              \"word\": {\n                \"type\": \"STRING\"\n              },\n              \"definition\": {\n                \"type\": \"STRING\"\n              },\n              \"synonyms\": {\n                \"type\": \"ARRAY\",\n                \"items\": {\n                  \"type\": \"STRING\"\n                }\n              },\n              \"antonyms\": {\n                \"type\": \"ARRAY\",\n                \"items\": {\n                  \"type\": \"STRING\"\n                }\n              },\n              \"examples\": {\n                \"type\": \"ARRAY\",\n                \"items\": {\n                  \"type\": \"STRING\"\n                }\n              }\n            },\n            \"propertyOrdering\": [\"word\", \"definition\", \"synonyms\", \"antonyms\", \"examples\"]\n          }\n        }\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for vocabulary...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error3;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error3 = errorData.error) === null || _errorData$error3 === void 0 ? void 0 : _errorData$error3.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedVocabulary = JSON.parse(jsonString);\n        setVocabulary(parsedVocabulary);\n        console.log(\"Vocabulary generated successfully:\", parsedVocabulary);\n      } else {\n        throw new Error(\"No vocabulary content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error building vocabulary:\", error);\n      setVocabularyError(`Failed to build vocabulary: ${error.message}. Please try again.`);\n      setVocabulary(null);\n    } finally {\n      setIsBuildingVocabulary(false);\n    }\n  }, []);\n\n  // --- LLM Powered Study Questions Feature ---\n  const handleGenerateStudyQuestions = useCallback(async textToGenerateQuestionsFrom => {\n    if (!textToGenerateQuestionsFrom) {\n      setStudyQuestionsError(\"No text selected to generate study questions from.\");\n      return;\n    }\n    setStudyQuestions(null);\n    setStudyQuestionsError('');\n    setIsGeneratingStudyQuestions(true);\n    setShowStudyQuestions(true);\n    try {\n      const prompt = `Generate 3-5 study questions (mix of multiple choice and open-ended) based on the following text. For multiple-choice questions, provide 3 options (A, B, C) and indicate the correct answer. Format the output as a JSON array of objects. Each object should have a \"type\" (either \"multiple-choice\" or \"open-ended\"), a \"question\" string. If \"multiple-choice\", include \"options\" (array of strings) and \"correctAnswer\" (string). If \"open-ended\", omit options and correctAnswer. Example: [{\"type\": \"multiple-choice\", \"question\": \"What is...\", \"options\": [\"A:...\", \"B:...\", \"C:...\"], \"correctAnswer\": \"A:...\"}, {\"type\": \"open-ended\", \"question\": \"Explain...\"}]:\\n\\n\"${textToGenerateQuestionsFrom}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: {\n              type: \"OBJECT\",\n              properties: {\n                \"type\": {\n                  \"type\": \"STRING\",\n                  \"enum\": [\"multiple-choice\", \"open-ended\"]\n                },\n                \"question\": {\n                  \"type\": \"STRING\"\n                },\n                \"options\": {\n                  \"type\": \"ARRAY\",\n                  \"items\": {\n                    \"type\": \"STRING\"\n                  }\n                },\n                \"correctAnswer\": {\n                  \"type\": \"STRING\"\n                }\n              },\n              \"required\": [\"type\", \"question\"]\n            }\n          }\n        }\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for study questions...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error4;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error4 = errorData.error) === null || _errorData$error4 === void 0 ? void 0 : _errorData$error4.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedQuestions = JSON.parse(jsonString);\n        setStudyQuestions(parsedQuestions);\n        console.log(\"Study questions generated successfully:\", parsedQuestions);\n      } else {\n        throw new Error(\"No study questions content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating study questions:\", error);\n      setStudyQuestionsError(`Failed to generate study questions: ${error.message}. Please try again.`);\n      setStudyQuestions(null);\n    } finally {\n      setIsGeneratingStudyQuestions(false);\n    }\n  }, []);\n\n  // --- LLM Powered Simplify Text Feature ---\n  const handleSimplifyText = useCallback(async textToSimplify => {\n    if (!textToSimplify) {\n      setSimplifyError(\"No text selected for simplification.\");\n      return;\n    }\n    setSimplifiedText('');\n    setSimplifyError('');\n    setIsSimplifying(true);\n    setShowSimplifiedText(true);\n    try {\n      const prompt = `Simplify the following text, making it easier to read and understand for someone with reading difficulties like dyslexia or ADHD. Keep the core meaning intact but use simpler vocabulary and sentence structures:\\n\\n\"${textToSimplify}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for text simplification...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error5;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error5 = errorData.error) === null || _errorData$error5 === void 0 ? void 0 : _errorData$error5.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setSimplifiedText(generatedText);\n        console.log(\"Text simplified successfully.\");\n      } else {\n        throw new Error(\"No simplified text content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error simplifying text:\", error);\n      setSimplifyError(`Failed to simplify text: ${error.message}. Please try again.`);\n      setSimplifiedText(''); // Clear any partial simplified text\n    } finally {\n      setIsSimplifying(false);\n    }\n  }, []);\n\n  // --- LLM Powered FAQ Feature ---\n  const handleGenerateFAQ = useCallback(async () => {\n    if (!fileContent) {\n      setFaqError(\"Please upload a document first to generate FAQs.\");\n      return;\n    }\n    setFaqAnswers(null);\n    setFaqError('');\n    setIsAnsweringFaq(true);\n    setShowFaq(true);\n    try {\n      const prompt = `Based on the following document, generate 3-5 frequently asked questions (FAQs) and their concise answers. Focus on key information and common queries a user might have after reading the text. Format the output as a JSON array of objects, each with a \"question\" string and an \"answer\" string. Example: [{\"question\": \"What is...\", \"answer\": \"It is...\"}, {\"question\": \"How does...\", \"answer\": \"It works by...\"}]:\\n\\n\"${fileContent}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: {\n              type: \"OBJECT\",\n              properties: {\n                \"question\": {\n                  \"type\": \"STRING\"\n                },\n                \"answer\": {\n                  \"type\": \"STRING\"\n                }\n              },\n              \"required\": [\"question\", \"answer\"]\n            }\n          }\n        }\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for FAQ generation...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error6;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error6 = errorData.error) === null || _errorData$error6 === void 0 ? void 0 : _errorData$error6.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedFaq = JSON.parse(jsonString);\n        setFaqAnswers(parsedFaq);\n        console.log(\"FAQ generated successfully:\", parsedFaq);\n      } else {\n        throw new Error(\"No FAQ content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating FAQ:\", error);\n      setFaqError(`Failed to generate FAQ: ${error.message}. Please try again.`);\n      setFaqAnswers(null);\n    } finally {\n      setIsAnsweringFaq(false);\n    }\n  }, [fileContent]);\n\n  // --- LLM Powered Key Takeaways Feature ---\n  const handleGenerateKeyTakeaways = useCallback(async () => {\n    if (!fileContent) {\n      setKeyTakeawaysError(\"Please upload a document first to generate key takeaways.\");\n      return;\n    }\n    setKeyTakeaways(null);\n    setKeyTakeawaysError('');\n    setIsGeneratingKeyTakeaways(true);\n    setShowKeyTakeaways(true);\n    try {\n      const prompt = `From the following text, extract 3-5 crucial key takeaways or actionable insights. Present them as a concise bulleted list:\\n\\n\"${fileContent}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: {\n              \"type\": \"STRING\"\n            }\n          }\n        }\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for key takeaways...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error7;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error7 = errorData.error) === null || _errorData$error7 === void 0 ? void 0 : _errorData$error7.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedTakeaways = JSON.parse(jsonString);\n        setKeyTakeaways(parsedTakeaways);\n        console.log(\"Key takeaways generated successfully:\", parsedTakeaways);\n      } else {\n        throw new Error(\"No key takeaways content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating key takeaways:\", error);\n      setKeyTakeawaysError(`Failed to generate key takeaways: ${error.message}. Please try again.`);\n      setKeyTakeaways(null);\n    } finally {\n      setIsGeneratingKeyTakeaways(false);\n    }\n  }, [fileContent]);\n\n  // --- LLM Powered Rephrase Selected Text Feature ---\n  const handleRephraseSelectedText = useCallback(async textToRephrase => {\n    if (!textToRephrase) {\n      setRephraseError(\"No text selected to rephrase.\");\n      return;\n    }\n    setRephrasedText('');\n    setRephraseError('');\n    setIsRephrasingText(true);\n    setShowRephrasedText(true);\n    try {\n      const prompt = `Rephrase the following text. Make it more clear and concise without losing its original meaning:\\n\\n\"${textToRephrase}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for rephrasing...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error8;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error8 = errorData.error) === null || _errorData$error8 === void 0 ? void 0 : _errorData$error8.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setRephrasedText(generatedText);\n        console.log(\"Text rephrased successfully.\");\n      } else {\n        throw new Error(\"No rephrased content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error rephrasing text:\", error);\n      setRephraseError(`Failed to rephrase text: ${error.message}. Please try again.`);\n      setRephrasedText('');\n    } finally {\n      setIsRephrasingText(false);\n    }\n  }, []);\n\n  // --- LLM Powered Translate Selected Text Feature ---\n  const handleTranslateSelectedText = useCallback(async textToTranslate => {\n    if (!textToTranslate) {\n      setTranslateError(\"No text selected to translate.\");\n      return;\n    }\n    const targetLanguage = prompt(\"Enter target language (e.g., 'French', 'Spanish', 'German'):\");\n    if (!targetLanguage) {\n      setTranslateError(\"Translation cancelled. Please enter a target language.\");\n      return;\n    }\n    setTranslatedText('');\n    setTranslateError('');\n    setIsTranslatingText(true);\n    setShowTranslatedText(true);\n    try {\n      const prompt = `Translate the following English text into ${targetLanguage}:\\n\\n\"${textToTranslate}\"`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for translation...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error9;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error9 = errorData.error) === null || _errorData$error9 === void 0 ? void 0 : _errorData$error9.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setTranslatedText(generatedText);\n        console.log(\"Text translated successfully.\");\n      } else {\n        throw new Error(\"No translated content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error translating text:\", error);\n      setTranslateError(`Failed to translate text: ${error.message}. Please try again.`);\n      setTranslatedText('');\n    } finally {\n      setIsTranslatingText(false);\n    }\n  }, []);\n\n  // --- LLM Powered Sentiment Analysis Feature ---\n  const handleAnalyzeSentiment = useCallback(async textToAnalyze => {\n    if (!textToAnalyze) {\n      setSentimentError(\"No text selected for sentiment analysis.\");\n      return;\n    }\n    setSentimentAnalysis(null);\n    setSentimentError('');\n    setIsAnalyzingSentiment(true);\n    setShowSentiment(true);\n    try {\n      const prompt = `Analyze the dominant sentiment (e.g., positive, negative, neutral, argumentative, informative, persuasive, critical, humorous) and tone of the following text: \"${textToAnalyze}\". Explain why you chose that sentiment/tone with a brief justification. Format the output as a JSON object with keys: \"sentiment\", \"justification\".`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"OBJECT\",\n            properties: {\n              \"sentiment\": {\n                \"type\": \"STRING\"\n              },\n              \"justification\": {\n                \"type\": \"STRING\"\n              }\n            },\n            \"required\": [\"sentiment\", \"justification\"]\n          }\n        }\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for sentiment analysis...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error0;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error0 = errorData.error) === null || _errorData$error0 === void 0 ? void 0 : _errorData$error0.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedSentiment = JSON.parse(jsonString);\n        setSentimentAnalysis(parsedSentiment);\n        console.log(\"Sentiment analysis generated successfully:\", parsedSentiment);\n      } else {\n        throw new Error(\"No sentiment analysis content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error analyzing sentiment:\", error);\n      setSentimentError(`Failed to analyze sentiment: ${error.message}. Please try again.`);\n      setSentimentAnalysis(null);\n    } finally {\n      setIsAnalyzingSentiment(false);\n    }\n  }, []);\n\n  // --- LLM Powered Contextual Background Information Feature ---\n  const handleGetContextualInfo = useCallback(async selectedTerm => {\n    if (!selectedTerm) {\n      setContextualInfoError(\"No term selected for contextual information.\");\n      return;\n    }\n    setContextualInfo('');\n    setContextualInfoError('');\n    setIsGettingContextualInfo(true);\n    setShowContextualInfo(true);\n    try {\n      const prompt = `Provide concise background information for the term or concept: \"${selectedTerm}\". Focus on its relevance and general context, assuming the user might not be familiar with it, but don't re-summarize the provided document. Keep it brief, no more than 3-4 sentences.`;\n      let chatHistory = [];\n      chatHistory.push({\n        role: \"user\",\n        parts: [{\n          text: prompt\n        }]\n      });\n      const payload = {\n        contents: chatHistory\n      };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n      console.log(\"Calling Gemini API for contextual info...\");\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        var _errorData$error1;\n        const errorData = await response.json();\n        throw new Error(`API Error: ${response.status} ${response.statusText} - ${((_errorData$error1 = errorData.error) === null || _errorData$error1 === void 0 ? void 0 : _errorData$error1.message) || 'Unknown error'}`);\n      }\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setContextualInfo(generatedText);\n        console.log(\"Contextual info generated successfully.\");\n      } else {\n        throw new Error(\"No contextual information content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error getting contextual info:\", error);\n      setContextualInfoError(`Failed to get contextual information: ${error.message}. Please try again.`);\n      setContextualInfo('');\n    } finally {\n      setIsGettingContextualInfo(false);\n    }\n  }, []);\n  return (\n    /*#__PURE__*/\n    // Wrap the entire application with the ErrorBoundary\n    _jsxDEV(ErrorBoundary, {\n      onErrorLogged: handleLogError,\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4 sm:p-6 lg:p-8 font-inter\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto space-y-6 lg:space-y-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"header\", {\n            className: \"text-center py-6 sm:py-8 lg:py-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center gap-3 sm:gap-4 mb-3 sm:mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-2 sm:p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-lg transform rotate-6\",\n                children: /*#__PURE__*/_jsxDEV(Eye, {\n                  className: \"w-7 h-7 sm:w-8 sm:h-8 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2383,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2382,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-4xl sm:text-5xl lg:text-6xl font-extrabold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-md\",\n                children: \"SynapseRead\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2385,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2381,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-base sm:text-xl text-gray-600 max-w-xl sm:max-w-2xl mx-auto leading-relaxed\",\n              children: \"Enterprise-grade Enhanced Reading technology designed to enhance focus and comprehension for individuals with ADHD and dyslexia.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2389,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2380,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(SecurityStatus, {\n            isSecure: securityStatus.isSecure,\n            errors: securityStatus.errors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2396,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"xl:col-span-1 space-y-6 lg:space-y-8\",\n              children: [/*#__PURE__*/_jsxDEV(SecureFileImporter, {\n                onFileLoaded: handleFileLoaded,\n                onSecurityStatus: handleSecurityStatus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2405,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(EnhancedSettings, {\n                settings: settings,\n                onSettingsChange: handleSettingsChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2409,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(ErrorLogViewer, {\n                userId: appUserId,\n                db: firebaseDb,\n                appId: appId,\n                onToggleVisibility: isVisible => console.log('Error logs visibility toggled:', isVisible)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2414,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2404,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"xl:col-span-2\",\n              children: fileContent && securityStatus.isSecure ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(EnhancedReader, {\n                  text: fileContent,\n                  settings: settings,\n                  onProgress: handleReadingProgress,\n                  onSummarize: handleSummarizeText // Pass the summarization handler\n                  ,\n                  onExplainSelection: handleExplainSelection // Pass the explanation handler\n                  ,\n                  onBuildVocabulary: handleBuildVocabulary // Pass the vocabulary handler\n                  ,\n                  onGenerateStudyQuestions: handleGenerateStudyQuestions // Pass the study questions handler\n                  ,\n                  onSimplifyText: handleSimplifyText // Pass the simplify text handler\n                  ,\n                  onRephraseSelectedText: handleRephraseSelectedText // Pass rephrase handler\n                  ,\n                  onTranslateSelectedText: handleTranslateSelectedText // Pass translate handler\n                  ,\n                  onAnalyzeSentiment: handleAnalyzeSentiment // Pass new sentiment handler\n                  ,\n                  onGetContextualInfo: handleGetContextualInfo // Pass new contextual info handler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2426,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 mt-6\",\n                  children: [fileContent && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleGenerateFAQ,\n                    className: \"flex items-center justify-center gap-2 px-6 py-3 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-purple-700 focus:ring-opacity-50\",\n                    children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2449,\n                      columnNumber: 31\n                    }, this), \"Generate FAQs \\u2728\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2444,\n                    columnNumber: 27\n                  }, this), fileContent && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleGenerateKeyTakeaways,\n                    className: \"flex items-center justify-center gap-2 px-6 py-3 bg-fuchsia-600 text-white rounded-lg hover:bg-fuchsia-700 transition-all duration-300 shadow-md transform hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-fuchsia-500 focus:ring-opacity-50\",\n                    children: [/*#__PURE__*/_jsxDEV(List, {\n                      className: \"w-5 h-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2459,\n                      columnNumber: 31\n                    }, this), \"Key Takeaways \\u2728\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2454,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2442,\n                  columnNumber: 19\n                }, this), showSummary && (summary || isSummarizing || summaryError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                        className: \"w-5 h-5 text-purple-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2471,\n                        columnNumber: 27\n                      }, this), \"Document Summary\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2470,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowSummary(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2474,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2469,\n                    columnNumber: 23\n                  }, this), isSummarizing ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-purple-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2483,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Generating summary...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2484,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2482,\n                    columnNumber: 25\n                  }, this) : summaryError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2488,\n                      columnNumber: 27\n                    }, this), summaryError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2487,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: summary\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2492,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2468,\n                  columnNumber: 21\n                }, this), showExplanation && (explanation || isExplaining || explanationError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                        className: \"w-5 h-5 text-indigo-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2502,\n                        columnNumber: 27\n                      }, this), \"Explanation\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2501,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowExplanation(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2505,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2500,\n                    columnNumber: 23\n                  }, this), isExplaining ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-indigo-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2514,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Generating explanation...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2515,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2513,\n                    columnNumber: 25\n                  }, this) : explanationError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2519,\n                      columnNumber: 27\n                    }, this), explanationError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2518,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: explanation\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2523,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2499,\n                  columnNumber: 21\n                }, this), showVocabulary && (vocabulary || isBuildingVocabulary || vocabularyError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(GraduationCap, {\n                        className: \"w-5 h-5 text-teal-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2533,\n                        columnNumber: 27\n                      }, this), \"Vocabulary Builder\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2532,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowVocabulary(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2536,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2531,\n                    columnNumber: 23\n                  }, this), isBuildingVocabulary ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-teal-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2545,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Building vocabulary...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2546,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2544,\n                    columnNumber: 25\n                  }, this) : vocabularyError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2550,\n                      columnNumber: 27\n                    }, this), vocabularyError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2549,\n                    columnNumber: 25\n                  }, this) : vocabulary && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-gray-800 font-bold text-lg mb-1\",\n                        children: vocabulary.word\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2557,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-gray-700\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"font-semibold\",\n                          children: \"Definition:\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2558,\n                          columnNumber: 60\n                        }, this), \" \", vocabulary.definition]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2558,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2556,\n                      columnNumber: 29\n                    }, this), vocabulary.synonyms && vocabulary.synonyms.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-700\",\n                        children: \"Synonyms:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2562,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"list-disc list-inside text-gray-600 text-sm\",\n                        children: vocabulary.synonyms.map((syn, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: syn\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2564,\n                          columnNumber: 74\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2563,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2561,\n                      columnNumber: 31\n                    }, this), vocabulary.antonyms && vocabulary.antonyms.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-700\",\n                        children: \"Antonyms:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2570,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"list-disc list-inside text-gray-600 text-sm\",\n                        children: vocabulary.antonyms.map((ant, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: ant\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2572,\n                          columnNumber: 74\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2571,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2569,\n                      columnNumber: 31\n                    }, this), vocabulary.examples && vocabulary.examples.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-700\",\n                        children: \"Examples:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2578,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                        className: \"list-disc list-inside text-gray-600 text-sm\",\n                        children: vocabulary.examples.map((ex, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                          children: ex\n                        }, idx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2580,\n                          columnNumber: 73\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2579,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2577,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2555,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2530,\n                  columnNumber: 21\n                }, this), showStudyQuestions && (studyQuestions || isGeneratingStudyQuestions || studyQuestionsError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(HelpCircle, {\n                        className: \"w-5 h-5 text-blue-800\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2595,\n                        columnNumber: 27\n                      }, this), \"Study Questions\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2594,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowStudyQuestions(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2598,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2593,\n                    columnNumber: 23\n                  }, this), isGeneratingStudyQuestions ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-blue-800 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2607,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Generating study questions...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2608,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2606,\n                    columnNumber: 25\n                  }, this) : studyQuestionsError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2612,\n                      columnNumber: 27\n                    }, this), studyQuestionsError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2611,\n                    columnNumber: 25\n                  }, this) : studyQuestions && studyQuestions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-6\",\n                    children: studyQuestions.map((q, qIdx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"p-4 border rounded-lg bg-gray-50\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"font-semibold text-gray-800 mb-2\",\n                        children: [\"Q\", qIdx + 1, \": \", q.question]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2620,\n                        columnNumber: 33\n                      }, this), q.type === \"multiple-choice\" && q.options && q.options.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"space-y-1\",\n                        children: [q.options.map((option, optIdx) => /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-gray-700 text-sm ml-2\",\n                          children: option\n                        }, optIdx, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2624,\n                          columnNumber: 39\n                        }, this)), q.correctAnswer && /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"font-semibold text-green-700 text-sm mt-2\",\n                          children: [\"Correct Answer: \", q.correctAnswer]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2629,\n                          columnNumber: 39\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2622,\n                        columnNumber: 35\n                      }, this)]\n                    }, qIdx, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2619,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2617,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500 text-center py-4\",\n                    children: \"No study questions generated.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2639,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2592,\n                  columnNumber: 21\n                }, this), showSimplifiedText && (simplifiedText || isSimplifying || simplifyError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                        className: \"w-5 h-5 text-green-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2650,\n                        columnNumber: 27\n                      }, this), \"Simplified Text\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2649,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowSimplifiedText(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2653,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2648,\n                    columnNumber: 23\n                  }, this), isSimplifying ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-green-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2662,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Simplifying text...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2663,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2661,\n                    columnNumber: 25\n                  }, this) : simplifyError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2667,\n                      columnNumber: 27\n                    }, this), simplifyError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2666,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: simplifiedText\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2671,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2647,\n                  columnNumber: 21\n                }, this), showRephrasedText && (rephrasedText || isRephrasingText || rephraseError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Shuffle, {\n                        className: \"w-5 h-5 text-orange-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2681,\n                        columnNumber: 27\n                      }, this), \"Rephrased Text\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2680,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowRephrasedText(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2684,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2679,\n                    columnNumber: 23\n                  }, this), isRephrasingText ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-orange-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2693,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Rephrasing text...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2694,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2692,\n                    columnNumber: 25\n                  }, this) : rephraseError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2698,\n                      columnNumber: 27\n                    }, this), rephraseError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2697,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: rephrasedText\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2702,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2678,\n                  columnNumber: 21\n                }, this), showTranslatedText && (translatedText || isTranslatingText || translateError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Languages, {\n                        className: \"w-5 h-5 text-pink-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2712,\n                        columnNumber: 27\n                      }, this), \"Translated Text\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2711,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowTranslatedText(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2715,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2710,\n                    columnNumber: 23\n                  }, this), isTranslatingText ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-pink-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2724,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Translating text...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2725,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2723,\n                    columnNumber: 25\n                  }, this) : translateError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2729,\n                      columnNumber: 27\n                    }, this), translateError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2728,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: translatedText\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2733,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2709,\n                  columnNumber: 21\n                }, this), showSentiment && (sentimentAnalysis || isAnalyzingSentiment || sentimentError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Smile, {\n                        className: \"w-5 h-5 text-yellow-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2743,\n                        columnNumber: 27\n                      }, this), \"Sentiment/Tone Analysis\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2742,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowSentiment(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2746,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2741,\n                    columnNumber: 23\n                  }, this), isAnalyzingSentiment ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-yellow-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2755,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Analyzing sentiment...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2756,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2754,\n                    columnNumber: 25\n                  }, this) : sentimentError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2760,\n                      columnNumber: 27\n                    }, this), sentimentError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2759,\n                    columnNumber: 25\n                  }, this) : sentimentAnalysis && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-gray-800\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-semibold\",\n                        children: \"Dominant Sentiment/Tone:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2766,\n                        columnNumber: 58\n                      }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"capitalize\",\n                        children: sentimentAnalysis.sentiment\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2766,\n                        columnNumber: 122\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2766,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-gray-700\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"font-semibold\",\n                        children: \"Justification:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2767,\n                        columnNumber: 58\n                      }, this), \" \", sentimentAnalysis.justification]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2767,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2765,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2740,\n                  columnNumber: 21\n                }, this), showContextualInfo && (contextualInfo || isGettingContextualInfo || contextualInfoError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(Info, {\n                        className: \"w-5 h-5 text-cyan-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2779,\n                        columnNumber: 27\n                      }, this), \"Contextual Information\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2778,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowContextualInfo(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2782,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2777,\n                    columnNumber: 23\n                  }, this), isGettingContextualInfo ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-cyan-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2791,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Getting contextual information...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2792,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2790,\n                    columnNumber: 25\n                  }, this) : contextualInfoError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2796,\n                      columnNumber: 27\n                    }, this), contextualInfoError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2795,\n                    columnNumber: 25\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-700 whitespace-pre-wrap\",\n                    children: contextualInfo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2800,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2776,\n                  columnNumber: 21\n                }, this), showFaq && (faqAnswers || isAnsweringFaq || faqError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                        className: \"w-5 h-5 text-purple-800\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2810,\n                        columnNumber: 27\n                      }, this), \"Frequently Asked Questions\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2809,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowFaq(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2813,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2808,\n                    columnNumber: 23\n                  }, this), isAnsweringFaq ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-purple-800 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2822,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Generating FAQs...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2823,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2821,\n                    columnNumber: 25\n                  }, this) : faqError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2827,\n                      columnNumber: 27\n                    }, this), faqError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2826,\n                    columnNumber: 25\n                  }, this) : faqAnswers && faqAnswers.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-4\",\n                    children: faqAnswers.map((item, index) => /*#__PURE__*/_jsxDEV(\"details\", {\n                      className: \"p-3 bg-gray-50 rounded-lg border cursor-pointer\",\n                      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n                        className: \"font-semibold text-gray-800 text-base\",\n                        children: item.question\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2835,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-gray-700 mt-2 ml-4\",\n                        children: item.answer\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2836,\n                        columnNumber: 33\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2834,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2832,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500 text-center py-4\",\n                    children: \"No FAQs generated for this document.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2841,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2807,\n                  columnNumber: 21\n                }, this), showKeyTakeaways && (keyTakeaways || isGeneratingKeyTakeaways || keyTakeawaysError) && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-6 bg-white p-6 rounded-lg border shadow-xl\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-lg font-semibold flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(List, {\n                        className: \"w-5 h-5 text-fuchsia-600\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2852,\n                        columnNumber: 27\n                      }, this), \"Key Takeaways\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2851,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setShowKeyTakeaways(false),\n                      className: \"text-gray-500 hover:text-gray-700 text-sm font-medium\",\n                      children: \"Hide\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2855,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2850,\n                    columnNumber: 23\n                  }, this), isGeneratingKeyTakeaways ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-center py-4\",\n                    children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                      className: \"w-6 h-6 text-fuchsia-500 animate-spin mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2864,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-gray-600\",\n                      children: \"Generating key takeaways...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2865,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2863,\n                    columnNumber: 25\n                  }, this) : keyTakeawaysError ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                      className: \"inline w-4 h-4 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2869,\n                      columnNumber: 27\n                    }, this), keyTakeawaysError]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2868,\n                    columnNumber: 25\n                  }, this) : keyTakeaways && keyTakeaways.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n                    className: \"list-disc list-inside text-gray-700 space-y-2\",\n                    children: keyTakeaways.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: item\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2876,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2874,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500 text-center py-4\",\n                    children: \"No key takeaways generated for this document.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2880,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2849,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white p-8 sm:p-12 rounded-lg border shadow-xl text-center text-gray-500 min-h-[400px] flex flex-col justify-center items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-4 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full w-20 h-20 sm:w-24 sm:h-24 mx-auto mb-6 flex items-center justify-center shadow-lg\",\n                  children: /*#__PURE__*/_jsxDEV(Book, {\n                    className: \"w-10 h-10 sm:w-12 sm:h-12 text-blue-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2889,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2888,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-xl sm:text-2xl font-semibold text-gray-700 mb-2\",\n                  children: \"Ready for Your Enhanced Reading Experience\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2891,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-base sm:text-lg\",\n                  children: \"Upload a secure text file to begin your journey with SynapseRead.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2894,\n                  columnNumber: 19\n                }, this), !securityStatus.isSecure && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 text-red-600 font-medium flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2899,\n                    columnNumber: 23\n                  }, this), \"Please resolve security issues to proceed.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2898,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2887,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2423,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2402,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            className: \"text-center text-sm text-gray-500 pt-6 sm:pt-8 border-t border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: \"Built with enterprise security standards \\u2022 POPIA & GDPR compliant \\u2022 All data processed locally \\u2022 Designed as an assistive reading tool\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2910,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\xA9 \", new Date().getFullYear(), \" SynapseRead. All rights reserved.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2914,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2909,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2378,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2377,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2376,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s5(SynapseReadApp, \"HMnJ22jFLmjs4mIc4dXUSjGZ0j0=\");\n_c7 = SynapseReadApp;\nexport default SynapseReadApp;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"ErrorLogViewer\");\n$RefreshReg$(_c2, \"AccessibilityPanel\");\n$RefreshReg$(_c3, \"EnhancedReader\");\n$RefreshReg$(_c4, \"EnhancedSettings\");\n$RefreshReg$(_c5, \"SecureFileImporter\");\n$RefreshReg$(_c6, \"SecurityStatus\");\n$RefreshReg$(_c7, \"SynapseReadApp\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","useMemo","Shield","Upload","Settings","Play","Pause","RotateCcw","Eye","Book","User","Zap","Accessibility","AlertTriangle","CheckCircle","FileText","Loader2","Lightbulb","GraduationCap","HelpCircle","MessageSquare","List","Shuffle","Languages","HardDrive","Smile","Info","ArrowLeft","ArrowRight","PropTypes","initializeApp","getAuth","signInAnonymously","signInWithCustomToken","onAuthStateChanged","getFirestore","collection","addDoc","updateDoc","doc","onSnapshot","query","orderBy","serverTimestamp","jsxDEV","_jsxDEV","Fragment","_Fragment","ErrorBoundary","Component","constructor","props","state","hasError","error","errorInfo","getDerivedStateFromError","componentDidCatch","console","onErrorLogged","message","stack","componentStack","setState","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","process","env","NODE_ENV","toString","propTypes","node","isRequired","func","dbInstance","authInstance","currentUserId","firebaseInitializeAndAuth","firebaseConfig","appId","db","auth","userId","app","Promise","resolve","unsubscribe","user","uid","log","__initial_auth_token","userCredential","warn","crypto","randomUUID","initError","logErrorToFirestore","errorDetails","errorLogsCollectionRef","timestamp","fixed","fixDescription","e","ErrorLogViewer","onToggleVisibility","_s","errorLogs","setErrorLogs","isLoadingLogs","setIsLoadingLogs","logError","setLogError","showContent","setShowContent","handleToggle","prev","logsCollectionRef","q","snapshot","logs","docs","map","id","data","handleMarkAsFixed","logId","currentFixDescription","docRef","newFixDescription","prompt","fixedAt","onClick","substring","length","_log$timestamp","_log$fixedAt","toDate","toLocaleString","_c","string","object","SecurityUtils","sanitizeText","text","replace","trim","validateFileSize","size","validateFileType","type","allowedTypes","includes","generateSecureId","getRandomValues","Uint32Array","createRateLimit","maxCalls","timeWindow","calls","now","Date","validCalls","filter","time","Error","push","ReadingEnhancerEngine","calculateFixation","word","fixationLevel","lowerWord","toLowerCase","len","fixationPoint","Math","ceil","prefixes","prefix","startsWith","min","suffixes","suffix","endsWith","max","applyEnhancedFormatting","settings","fixation","opacity","maxWordsPerChunk","initialChunks","paragraphs","split","p","forEach","paragraphContent","tokens","match","currentChunkItems","currentChunkOriginalTextParts","token","isWord","isSpace","isPunctuation","bold","slice","normal","content","appended","i","endsSentence","endsClause","words","originalContent","join","isParagraphBreak","finalChunks","chunk","wordItemsInChunk","item","currentSubChunkItems","currentSubChunkOriginalTextParts","wordsCountInCurrentSubChunk","index","splitIndex","subChunkToPush","chunkIndex","ProgressTracker","calculateWPM","wordsRead","timeElapsedSeconds","round","calculateComprehensionScore","readingTime","pauseCount","backtrackCount","baseScore","pausePenalty","backtrackPenalty","AccessibilityPanel","onSettingsChange","accessibilityPresets","dyslexia","saccade","speed","adhd","default","applyPreset","preset","Object","keys","_c2","EnhancedReader","onProgress","onSummarize","onExplainSelection","onBuildVocabulary","onGenerateStudyQuestions","onSimplifyText","onRephraseSelectedText","onTranslateSelectedText","onAnalyzeSentiment","onGetContextualInfo","_s2","readingMode","isPlaying","setIsPlaying","currentChunkIndex","setCurrentChunkIndex","currentParagraphIndex","setCurrentParagraphIndex","startTime","setStartTime","readingStats","setReadingStats","wpm","timeElapsed","isProcessingTextForEnhancedReading","setIsProcessingTextForEnhancedReading","selectedText","setSelectedText","showLLMButtons","setShowLLMButtons","processedChunks","setProcessedChunks","groupedParagraphs","currentParagraph","processText","chunks","currentContentToDisplay","currentParaChunks","flatMap","progress","interval","setInterval","newIndex","wordsReadUpToCurrentChunk","elapsed","prevStats","clearInterval","handlePlayPause","handleReset","handleTextSelection","selection","window","getSelection","handleNextParagraph","_groupedParagraphs$cu","handlePreviousParagraph","onMouseUp","idx","style","disabled","width","_c3","EnhancedSettings","_s3","showAdvanced","setShowAdvanced","handleSettingChange","key","value","validatedValue","parseFloat","isNaN","name","checked","onChange","target","htmlFor","toFixed","step","_c4","SecureFileImporter","onFileLoaded","onSecurityStatus","_s4","isDragging","setIsDragging","isLoading","setIsLoading","errors","setErrors","showDriveMessage","setShowDriveMessage","loadPdfJs","pdfjsLib","reject","script","document","createElement","src","onload","GlobalWorkerOptions","workerSrc","onerror","head","appendChild","loadMammothJs","mammoth","parsePdf","file","arrayBuffer","loadingTask","getDocument","pdf","promise","fullText","numPages","page","getPage","textContent","getTextContent","items","str","parseDocx","result","extractRawText","validateAndProcessFile","newErrors","File","Blob","rawText","sanitizedText","errorMsg","JSON","stringify","handleDrop","preventDefault","files","Array","from","dataTransfer","handleFileSelect","onDrop","onDragOver","onDragEnter","onDragLeave","accept","_c5","SecurityStatus","isSecure","_c6","bool","array","SynapseReadApp","_s5","fileContent","setFileContent","setSettings","securityStatus","setSecurityStatus","readingProgress","setReadingProgress","summary","setSummary","isSummarizing","setIsSummarizing","summaryError","setSummaryError","showSummary","setShowSummary","explanation","setExplanation","isExplaining","setIsExplaining","explanationError","setExplanationError","showExplanation","setShowExplanation","vocabulary","setVocabulary","isBuildingVocabulary","setIsBuildingVocabulary","vocabularyError","setVocabularyError","showVocabulary","setShowVocabulary","studyQuestions","setStudyQuestions","isGeneratingStudyQuestions","setIsGeneratingStudyQuestions","studyQuestionsError","setStudyQuestionsError","showStudyQuestions","setShowStudyQuestions","simplifiedText","setSimplifiedText","isSimplifying","setIsSimplifying","simplifyError","setSimplifyError","showSimplifiedText","setShowSimplifiedText","faqAnswers","setFaqAnswers","isAnsweringFaq","setIsAnsweringFaq","faqError","setFaqError","showFaq","setShowFaq","keyTakeaways","setKeyTakeaways","isGeneratingKeyTakeaways","setIsGeneratingKeyTakeaways","keyTakeawaysError","setKeyTakeawaysError","showKeyTakeaways","setShowKeyTakeaways","rephrasedText","setRephrasedText","isRephrasingText","setIsRephrasingText","rephraseError","setRephraseError","showRephrasedText","setShowRephrasedText","translatedText","setTranslatedText","isTranslatingText","setIsTranslatingText","translateError","setTranslateError","showTranslatedText","setShowTranslatedText","sentimentAnalysis","setSentimentAnalysis","isAnalyzingSentiment","setIsAnalyzingSentiment","sentimentError","setSentimentError","showSentiment","setShowSentiment","contextualInfo","setContextualInfo","isGettingContextualInfo","setIsGettingContextualInfo","contextualInfoError","setContextualInfoError","showContextualInfo","setShowContextualInfo","firebaseDb","setFirebaseDb","firebaseAuth","setFirebaseAuth","appUserId","setAppUserId","__app_id","initFirebase","parse","__firebase_config","handleFileLoaded","handleSettingsChange","newSettings","handleSecurityStatus","handleReadingProgress","handleLogError","handleSummarizeText","chatHistory","role","parts","payload","contents","apiKey","apiUrl","response","fetch","method","headers","body","ok","_errorData$error","errorData","json","status","statusText","candidates","generatedText","handleExplainSelection","textToExplain","_errorData$error2","handleBuildVocabulary","wordToLookup","generationConfig","responseMimeType","responseSchema","properties","_errorData$error3","jsonString","parsedVocabulary","handleGenerateStudyQuestions","textToGenerateQuestionsFrom","_errorData$error4","parsedQuestions","handleSimplifyText","textToSimplify","_errorData$error5","handleGenerateFAQ","_errorData$error6","parsedFaq","handleGenerateKeyTakeaways","_errorData$error7","parsedTakeaways","handleRephraseSelectedText","textToRephrase","_errorData$error8","handleTranslateSelectedText","textToTranslate","targetLanguage","_errorData$error9","handleAnalyzeSentiment","textToAnalyze","_errorData$error0","parsedSentiment","handleGetContextualInfo","selectedTerm","_errorData$error1","isVisible","definition","synonyms","syn","antonyms","ant","examples","ex","qIdx","question","options","option","optIdx","correctAnswer","sentiment","justification","answer","getFullYear","_c7","$RefreshReg$"],"sources":["/workspaces/codespaces-blank/src/SynapseReadApp.js"],"sourcesContent":["import React, { useState, useCallback, useEffect, useMemo } from 'react';\nimport { Shield, Upload, Settings, Play, Pause, RotateCcw, Eye, Book, User, Zap, Accessibility, AlertTriangle, CheckCircle, FileText, Loader2, Lightbulb, GraduationCap, HelpCircle, MessageSquare, List, Shuffle, Languages, HardDrive, Smile, Info, ArrowLeft, ArrowRight } from 'lucide-react'; // Added new icons for paragraph navigation\nimport PropTypes from 'prop-types'; // Recommended for type checking in larger applications\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, updateDoc, doc, onSnapshot, query, orderBy, serverTimestamp } from 'firebase/firestore';\n\n\n// --- Global Error Boundary Component ---\n// Catches JavaScript errors anywhere in its child component tree,\n// logs them, and displays a fallback UI instead of crashing the app.\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  // Invoked after an error has been thrown by a descendant component.\n  // It receives two arguments: the error and an object with errorInfo.\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true, error };\n  }\n\n  // This lifecycle method is called after a component has caught an error.\n  // Use it to log error information.\n  componentDidCatch(error, errorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n    // Call the prop function to log the error\n    if (this.props.onErrorLogged) {\n        this.props.onErrorLogged({\n            message: error.message || 'Unknown error',\n            stack: error.stack || 'No stack trace',\n            componentStack: errorInfo.componentStack || 'N/A'\n        });\n    }\n    // In a production app, you'd send this error to an analytics service (e.g., Sentry)\n    this.setState({ errorInfo });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Fallback UI when an error occurs\n      return (\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] p-8 text-center bg-red-50 border border-red-200 rounded-lg shadow-md\">\n          <AlertTriangle className=\"w-16 h-16 text-red-500 mb-4 animate-pulse\" />\n          <h2 className=\"text-2xl font-bold text-red-800 mb-2\">Oops! Something went wrong.</h2>\n          <p className=\"text-gray-600 mb-4\">\n            We're sorry for the inconvenience. Please try refreshing the page or contact support if the issue persists.\n          </p>\n          {/* Display error details in development mode for debugging */}\n          {process.env.NODE_ENV === 'development' && this.state.errorInfo && (\n            <details className=\"text-sm text-gray-500 bg-gray-100 p-4 rounded-md mt-4 text-left overflow-auto max-h-60\">\n              <summary className=\"cursor-pointer font-semibold text-red-700\">Error Details</summary>\n              <pre className=\"whitespace-pre-wrap break-all\">{this.state.error && this.state.error.toString()}</pre>\n              <pre className=\"whitespace-pre-wrap break-all\">{this.state.errorInfo.componentStack}</pre>\n            </details>\n          )}\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  onErrorLogged: PropTypes.func, // Add onErrorLogged propType\n};\n\n// --- Firebase/Firestore Utility Functions ---\nlet dbInstance = null;\nlet authInstance = null;\nlet currentUserId = null; // Stored here for direct use by logErrorToFirestore\n\nconst firebaseInitializeAndAuth = async (firebaseConfig, appId) => {\n  if (dbInstance && authInstance && currentUserId) {\n    return { db: dbInstance, auth: authInstance, userId: currentUserId };\n  }\n\n  try {\n    const app = initializeApp(firebaseConfig);\n    dbInstance = getFirestore(app);\n    authInstance = getAuth(app);\n\n    await new Promise(resolve => {\n        const unsubscribe = onAuthStateChanged(authInstance, async (user) => {\n            if (user) {\n                currentUserId = user.uid;\n                console.log(\"Authenticated user:\", currentUserId);\n                unsubscribe(); // Stop listening once authenticated\n                resolve();\n            } else if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {\n                try {\n                    const userCredential = await signInWithCustomToken(authInstance, __initial_auth_token);\n                    currentUserId = userCredential.user.uid;\n                    console.log(\"Signed in with custom token:\", currentUserId);\n                } catch (error) {\n                    console.warn(\"Custom token sign-in failed, falling back to anonymous:\", error);\n                    await signInAnonymously(authInstance); // onAuthStateChanged will catch this\n                } finally {\n                    unsubscribe();\n                    resolve();\n                }\n            } else {\n                try {\n                    await signInAnonymously(authInstance); // onAuthStateChanged will catch this\n                } catch (error) {\n                    console.error(\"Anonymous sign-in failed:\", error);\n                    currentUserId = crypto.randomUUID(); // Fallback to random ID if anonymous fails\n                    console.log(\"Using generated random ID for user:\", currentUserId);\n                } finally {\n                    unsubscribe();\n                    resolve();\n                }\n            }\n        });\n    });\n  } catch (initError) {\n    console.error(\"Firebase initialization or initial authentication failed:\", initError);\n    if (!currentUserId) { // Ensure currentUserId is set even if auth completely fails\n      currentUserId = crypto.randomUUID();\n      console.log(\"Using generated random ID due to Firebase init/auth failure:\", currentUserId);\n    }\n  }\n\n  return { db: dbInstance, auth: authInstance, userId: currentUserId, appId };\n};\n\n// Function to log errors to Firestore\nconst logErrorToFirestore = async (errorDetails, userId, appId) => {\n  // Ensure dbInstance and userId are available before attempting to log\n  if (!dbInstance || !userId || !appId) {\n    console.error(\"Firestore not ready or user/app ID not available, cannot log error.\");\n    return;\n  }\n\n  try {\n    const errorLogsCollectionRef = collection(dbInstance, `artifacts/${appId}/users/${userId}/errorLogs`);\n    await addDoc(errorLogsCollectionRef, {\n      message: errorDetails.message || 'Unknown error',\n      stack: errorDetails.stack || 'No stack trace',\n      componentStack: errorDetails.componentStack || 'N/A',\n      timestamp: serverTimestamp(), // Firestore server timestamp\n      fixed: false, // Default to not fixed\n      fixDescription: ''\n    });\n    console.log(\"Error logged to Firestore successfully!\");\n  } catch (e) {\n    console.error(\"Failed to log error to Firestore:\", e);\n  }\n};\n\n\n// Component to display and manage error logs\nconst ErrorLogViewer = ({ userId, db, appId, onToggleVisibility }) => {\n  const [errorLogs, setErrorLogs] = useState([]);\n  const [isLoadingLogs, setIsLoadingLogs] = useState(true);\n  const [logError, setLogError] = useState('');\n  const [showContent, setShowContent] = useState(false); // State to control content visibility\n\n  // Toggle visibility and fetch logs if becoming visible\n  const handleToggle = useCallback(() => {\n    setShowContent(prev => !prev);\n    onToggleVisibility && onToggleVisibility(!showContent); // Notify parent\n  }, [showContent, onToggleVisibility]);\n\n\n  useEffect(() => {\n    if (!db || !userId || !showContent) { // Only fetch if content is visible and db/userId are ready\n        setIsLoadingLogs(false);\n        return;\n    }\n\n    const logsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/errorLogs`);\n    // Order by timestamp to show most recent errors first\n    const q = query(logsCollectionRef, orderBy('timestamp', 'desc'));\n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const logs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setErrorLogs(logs);\n      setIsLoadingLogs(false);\n      setLogError('');\n      console.log(\"Error logs fetched:\", logs);\n    }, (error) => {\n      console.error(\"Error fetching error logs:\", error);\n      setLogError(`Failed to load error logs: ${error.message}`);\n      setIsLoadingLogs(false);\n    });\n\n    // Cleanup subscription on component unmount or when content is hidden\n    return () => unsubscribe();\n  }, [db, userId, appId, showContent]); // Added showContent to dependencies\n\n  const handleMarkAsFixed = async (logId, currentFixDescription) => {\n    if (!db || !userId) {\n        setLogError(\"Database not ready or user not authenticated. Cannot update error log.\");\n        return;\n    }\n\n    const docRef = doc(db, `artifacts/${appId}/users/${userId}/errorLogs`, logId);\n    try {\n      const newFixDescription = prompt(\"Enter fix description (optional):\", currentFixDescription || \"\");\n      if (newFixDescription !== null) { // User didn't cancel\n        await updateDoc(docRef, {\n          fixed: true,\n          fixDescription: newFixDescription,\n          fixedAt: serverTimestamp()\n        });\n        console.log(`Error log ${logId} marked as fixed.`);\n      }\n    } catch (e) {\n      console.error(\"Error marking log as fixed:\", e);\n      setLogError(`Failed to mark log as fixed: ${e.message}`);\n    }\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg border shadow-lg space-y-4\">\n      <div className=\"flex items-center justify-between mb-4 cursor-pointer\" onClick={handleToggle}>\n        <div className=\"flex items-center gap-2\">\n          <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n          <h3 className=\"text-lg font-semibold text-red-800\">Error Logs</h3>\n          {userId && <span className=\"text-sm text-gray-500 ml-2\">(User ID: {userId.substring(0, 8)}...)</span>} {/* Truncate userId */}\n        </div>\n        <button className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\">\n          {showContent ? 'Hide' : 'Show'}\n        </button>\n      </div>\n\n      {showContent && (\n        <>\n          {isLoadingLogs ? (\n            <div className=\"p-4 bg-gray-50 rounded-lg shadow-sm flex items-center justify-center\">\n              <Loader2 className=\"w-5 h-5 animate-spin mr-2 text-gray-500\" />\n              Loading error logs...\n            </div>\n          ) : logError ? (\n            <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm\">\n              <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n              {logError}\n            </div>\n          ) : errorLogs.length === 0 ? (\n            <p className=\"text-gray-500 text-center py-4\">No errors logged yet. Good job!</p>\n          ) : (\n            <div className=\"space-y-4 max-h-96 overflow-y-auto custom-scrollbar pr-2\">\n              {errorLogs.map(log => (\n                <div key={log.id} className={`p-4 rounded-lg border ${log.fixed ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className={`font-semibold ${log.fixed ? 'text-green-800' : 'text-red-800'}`}>\n                      {log.fixed ? 'Fixed Error' : 'Unfixed Error'}\n                    </span>\n                    {!log.fixed && (\n                      <button\n                        onClick={() => handleMarkAsFixed(log.id, log.fixDescription)}\n                        className=\"px-3 py-1 bg-green-600 text-white text-xs rounded-full hover:bg-green-700 transition-colors\"\n                      >\n                        Mark as Fixed\n                      </button>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-gray-600 mb-1\">\n                    Logged: {log.timestamp?.toDate ? log.timestamp.toDate().toLocaleString() : 'N/A'}\n                    {log.fixed && log.fixedAt?.toDate && ` | Fixed: ${log.fixedAt.toDate().toLocaleString()}`}\n                  </p>\n                  <details className=\"text-sm text-gray-600 cursor-pointer\">\n                    <summary>Stack Trace</summary>\n                    <pre className=\"whitespace-pre-wrap break-all text-xs bg-gray-100 p-2 rounded-md mt-1\">{log.stack}</pre>\n                    {log.componentStack && log.componentStack !== 'N/A' && (\n                      <>\n                        <p className=\"mt-2\">Component Stack:</p>\n                        <pre className=\"whitespace-pre-wrap break-all text-xs bg-gray-100 p-2 rounded-md mt-1\">{log.componentStack}</pre>\n                      </>\n                    )}\n                  </details>\n                  {log.fixed && log.fixDescription && (\n                    <div className=\"mt-2 text-sm text-gray-700\">\n                      <span className=\"font-semibold\">Fix:</span> {log.fixDescription}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nErrorLogViewer.propTypes = {\n  userId: PropTypes.string, // userId can be null initially\n  db: PropTypes.object, // db can be null initially\n  appId: PropTypes.string.isRequired,\n  onToggleVisibility: PropTypes.func,\n};\n\n\n// --- Enhanced Security Utilities ---\nconst SecurityUtils = {\n  // Sanitizes text to remove potentially harmful HTML tags and attributes.\n  sanitizeText: (text) => {\n    if (typeof text !== 'string') return '';\n    // Strips HTML tags, JavaScript URI schemes, and event handlers.\n    return text\n      .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '') // Remove script tags\n      .replace(/<[^>]+>/g, '') // Remove any remaining HTML tags\n      .replace(/javascript:/gi, '') // Remove javascript: URI schemes\n      .replace(/on\\w+=/gi, '') // Remove event handlers (e.g., onclick=)\n      .trim();\n  },\n  // Validates if the file size is within the allowed limit (500MB).\n  validateFileSize: (size) => size <= 500 * 1024 * 1024, // Increased to 500MB\n  // Validates if the file type is among the allowed types.\n  validateFileType: (type) => {\n    // Expanded allowed types to include PDF and DOCX\n    const allowedTypes = [\n      'text/plain',\n      'text/csv',\n      'application/json',\n      'application/pdf', // Portable Document Format\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document' // .docx\n    ];\n    return allowedTypes.includes(type);\n  },\n  // Generates a cryptographically secure random ID.\n  generateSecureId: () => crypto.getRandomValues(new Uint32Array(1))[0].toString(36),\n  // Creates a simple rate-limiting function.\n  createRateLimit: (maxCalls, timeWindow) => {\n    const calls = []; // Stores timestamps of recent calls\n    return () => {\n      const now = Date.now();\n      // Filter out calls that are outside the time window\n      const validCalls = calls.filter(time => now - time < timeWindow);\n      if (validCalls.length >= maxCalls) {\n        throw new Error('Rate limit exceeded');\n      }\n      calls.push(now); // Add current call timestamp\n      return true;\n    };\n  }\n};\n\n// --- Reading Enhancer Engine - Core Innovation ---\nconst ReadingEnhancerEngine = {\n  // Calculates optimal fixation points based on word length and linguistic patterns.\n  calculateFixation: (word, fixationLevel = 0.5) => {\n    if (!word || word.length <= 1) return word.length;\n\n    const lowerWord = word.toLowerCase();\n    const len = word.length;\n    let fixationPoint;\n\n    // Rule 1: Basic length-based fixation\n    fixationPoint = Math.ceil(len * fixationLevel);\n\n    // Rule 2: Adjust for common prefixes (e.g., 'un', 're', 'pre')\n    const prefixes = ['un', 're', 'pre', 'dis', 'in', 'im', 'ir', 'il', 'anti', 'auto', 'bio', 'co', 'de', 'ex', 'fore', 'inter', 'micro', 'mid', 'mono', 'non', 'over', 'post', 'pro', 'sub', 'super', 'trans', 'tri', 'under'];\n    for (const prefix of prefixes) {\n        if (lowerWord.startsWith(prefix) && len > prefix.length) {\n            fixationPoint = Math.min(fixationPoint, prefix.length);\n            break;\n        }\n    }\n\n    // Rule 3: Adjust for common suffixes (e.g., 'ing', 'ed', 'tion')\n    const suffixes = ['ing', 'ed', 'ly', 'tion', 'sion', 'able', 'ible', 'al', 'ent', 'ence', 'ive', 'ize', 'ise', 'ment', 'ness', 'ous', 'ful', 'less'];\n    for (const suffix of suffixes) {\n        if (lowerWord.endsWith(suffix) && len > suffix.length) {\n            fixationPoint = Math.min(fixationPoint, len - suffix.length);\n            break;\n        }\n    }\n\n    // Rule 4: Balance for very short/long words\n    if (len <= 3) {\n        fixationPoint = 1;\n    } else if (len > 8) {\n        fixationPoint = Math.min(fixationPoint + 1, len - 1);\n    }\n\n    // Ensure fixation point is at least 1 and not the very last character\n    return Math.min(Math.max(1, fixationPoint), len - 1);\n  },\n\n  // Processes a text into smaller, enhanced reading-formatted chunks.\n  applyEnhancedFormatting: (text, settings) => {\n    if (!text) return [];\n\n    const { fixation, opacity, maxWordsPerChunk } = settings;\n    const initialChunks = [];\n\n    const paragraphs = text.split(/(?:\\r?\\n){2,}/).filter(p => p.trim() !== '');\n\n    // --- Stage 1: Natural Chunking (Sentence/Clause-based) ---\n    paragraphs.forEach(paragraphContent => {\n      // Tokens: words (including contractions), punctuation, and spaces\n      // This regex attempts to keep common abbreviations like \"Dr.\" together by using a negative lookbehind.\n      const tokens = paragraphContent.match(/(\\b\\w+'?\\w*\\b(?!\\.)|[.,!?;:—-]+(?!\\.)|\\s+)/g) || [];\n\n      let currentChunkItems = [];\n      let currentChunkOriginalTextParts = [];\n\n      tokens.forEach((token) => {\n        if (!token) return; // Skip empty tokens\n\n        const isWord = token.match(/^\\b\\w+'?\\w*\\b$/);\n        const isSpace = token.match(/^\\s+$/);\n        // Expanded punctuation check to include all common sentence/clause terminators\n        const isPunctuation = token.match(/^[.,!?;:—-]+$/);\n\n        if (isWord) {\n          const word = token;\n          const fixationPoint = ReadingEnhancerEngine.calculateFixation(word, fixation);\n          const bold = word.slice(0, fixationPoint);\n          const normal = word.slice(fixationPoint);\n          currentChunkItems.push({ type: 'word', content: token, bold, normal, opacity });\n          currentChunkOriginalTextParts.push(token);\n        } else if (isSpace) {\n          currentChunkItems.push({ type: 'space', content: token });\n          currentChunkOriginalTextParts.push(token);\n        } else if (isPunctuation) {\n          // Try to append punctuation to the preceding word in the current chunk\n          let appended = false;\n          // Iterate backwards to find the last word, skipping spaces\n          for (let i = currentChunkItems.length - 1; i >= 0; i--) {\n            if (currentChunkItems[i].type === 'word') {\n              currentChunkItems[i].content += token;\n              currentChunkItems[i].normal += token;\n              appended = true;\n              break;\n            } else if (currentChunkItems[i].type === 'space') {\n              // Keep looking backwards past spaces\n              continue;\n            } else {\n              // Found another punctuation or unknown type before a word, stop looking backwards\n              break;\n            }\n          }\n          if (!appended) {\n            // If no preceding word (e.g., starts with punctuation or only spaces so far), add as standalone\n            currentChunkItems.push({ type: 'punctuation', content: token, opacity });\n          }\n          currentChunkOriginalTextParts.push(token);\n\n          // Check if this punctuation marks the end of a natural reading chunk (sentence or major clause)\n          // Prioritize full stops, exclamation marks, question marks for hard breaks\n          // Commas, semicolons, em-dashes for softer breaks\n          const endsSentence = token.match(/[.!?]$/);\n          const endsClause = token.match(/[,;—]$/);\n\n          if ((endsSentence || endsClause) && currentChunkItems.length > 0) {\n            initialChunks.push({\n              words: currentChunkItems,\n              originalContent: currentChunkOriginalTextParts.join('')\n            });\n            currentChunkItems = [];\n            currentChunkOriginalTextParts = [];\n          }\n        }\n      });\n\n      // After processing all tokens in a paragraph, add any remaining content as a chunk\n      if (currentChunkItems.length > 0) {\n        initialChunks.push({\n          words: currentChunkItems,\n          originalContent: currentChunkOriginalTextParts.join('')\n        });\n      }\n\n      // Add a paragraph break marker if not the very last paragraph\n      if (paragraphContent.trim().length > 0 && paragraphContent !== paragraphs[paragraphs.length - 1].trim()) {\n        initialChunks.push({ words: [], originalContent: '', isParagraphBreak: true });\n      }\n    });\n\n    // --- Stage 2: maxWordsPerChunk Fallback (for oversized natural chunks) ---\n    const finalChunks = [];\n    initialChunks.forEach(chunk => {\n      if (chunk.isParagraphBreak) {\n        finalChunks.push(chunk); // Preserve paragraph breaks\n        return;\n      }\n\n      const wordItemsInChunk = chunk.words.filter(item => item.type === 'word');\n      // Only apply maxWordsPerChunk fallback if the chunk's word count exceeds the limit\n      // and it's not a natural break (which should have already been handled).\n      // This is primarily for very long sentences without internal punctuation.\n      if (wordItemsInChunk.length > maxWordsPerChunk) {\n        let currentSubChunkItems = [];\n        let currentSubChunkOriginalTextParts = [];\n        let wordsCountInCurrentSubChunk = 0;\n\n        chunk.words.forEach((item, index) => {\n          currentSubChunkItems.push(item);\n          currentSubChunkOriginalTextParts.push(item.content);\n\n          if (item.type === 'word') {\n            wordsCountInCurrentSubChunk++;\n          }\n\n          // If we've hit the maxWordsPerChunk limit OR it's the very last item of the oversized chunk\n          if (wordsCountInCurrentSubChunk >= maxWordsPerChunk || index === chunk.words.length - 1) {\n            // Find the nearest preceding space to break on if possible, for better readability\n            let splitIndex = currentSubChunkItems.length - 1;\n            for (let i = currentSubChunkItems.length - 1; i >= 0; i--) {\n              if (currentSubChunkItems[i].type === 'space') {\n                splitIndex = i;\n                break;\n              }\n            }\n\n            // Create a sub-chunk up to the split point\n            const subChunkToPush = {\n              words: currentSubChunkItems.slice(0, splitIndex + 1),\n              originalContent: currentSubChunkOriginalTextParts.slice(0, splitIndex + 1).join('')\n            };\n\n            // Push if it contains actual content\n            if (subChunkToPush.words.length > 0 && subChunkToPush.originalContent.trim() !== '') {\n              finalChunks.push(subChunkToPush);\n            }\n\n            // Keep the remaining part for the next sub-chunk\n            currentSubChunkItems = currentSubChunkItems.slice(splitIndex + 1);\n            currentSubChunkOriginalTextParts = currentSubChunkOriginalTextParts.slice(splitIndex + 1);\n            wordsCountInCurrentSubChunk = currentSubChunkItems.filter(item => item.type === 'word').length;\n\n            // If we are at the very last item of the original oversized chunk and there's remaining content,\n            // ensure it's pushed as a final sub-chunk.\n            if (index === chunk.words.length - 1 && currentSubChunkItems.length > 0) {\n              finalChunks.push({\n                words: currentSubChunkItems,\n                originalContent: currentSubChunkOriginalTextParts.join('')\n              });\n              currentSubChunkItems = []; // Clear for next iteration\n              currentSubChunkOriginalTextParts = [];\n              wordsCountInCurrentSubChunk = 0;\n            }\n          }\n        });\n      } else {\n        // Chunk is fine, add as is\n        finalChunks.push(chunk);\n      }\n    });\n\n    // Assign final, sequential chunkIndex to all chunks\n    finalChunks.forEach((chunk, index) => {\n      chunk.chunkIndex = index;\n    });\n\n    return finalChunks;\n  }\n};\n\n\n// --- Reading Progress Tracker ---\nconst ProgressTracker = {\n  // Calculates Words Per Minute (WPM).\n  calculateWPM: (wordsRead, timeElapsedSeconds) => {\n    if (timeElapsedSeconds <= 0) return 0;\n    // WPM = (Words Read / Time in Minutes)\n    return Math.round((wordsRead / timeElapsedSeconds) * 60);\n  },\n  // Calculates a simplified comprehension score (conceptual).\n  calculateComprehensionScore: (readingTime, pauseCount, backtrackCount) => {\n    const baseScore = 100;\n    const pausePenalty = pauseCount * 2; // Each pause reduces score by 2\n    const backtrackPenalty = backtrackCount * 5; // Each backtrack reduces score by 5\n    return Math.max(0, baseScore - pausePenalty - backtrackPenalty); // Score cannot be negative\n  }\n};\n\n// --- Accessibility Features Component ---\nconst AccessibilityPanel = ({ settings, onSettingsChange }) => {\n  // Predefined accessibility presets for different reading needs.\n  const accessibilityPresets = {\n    dyslexia: { fixation: 0.7, saccade: 1.2, opacity: 0.9, speed: 3.0, maxWordsPerChunk: 5 }, // Slower speed per chunk, more bolding, smaller chunks\n    adhd: { fixation: 0.6, saccade: 0.8, opacity: 1.0, speed: 1.8, maxWordsPerChunk: 8 }, // Slightly faster speed per chunk, slightly more bolding, medium chunks\n    default: { fixation: 0.5, saccade: 1.0, opacity: 1.0, speed: 2.5, maxWordsPerChunk: 10 } // Standard settings (adjusted for chunk-by-chunk reading, larger chunks)\n  };\n\n  // Applies a selected preset to the current settings.\n  const applyPreset = (preset) => {\n    onSettingsChange({ ...settings, ...accessibilityPresets[preset] });\n  };\n\n  return (\n    <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200 shadow-xl\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Accessibility className=\"w-5 h-5 text-purple-600\" />\n        <h3 className=\"text-lg font-semibold text-purple-800\">Accessibility Presets</h3>\n      </div>\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\"> {/* Responsive grid for buttons */}\n        {Object.keys(accessibilityPresets).map(preset => (\n          <button\n            key={preset}\n            onClick={() => applyPreset(preset)}\n            className=\"p-3 bg-white rounded-lg border hover:bg-purple-100 transition-all duration-300 text-sm font-medium capitalize shadow-sm\n                       focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transform hover:scale-[1.02]\"\n          >\n            {preset === 'default' ? 'Standard' : preset}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nAccessibilityPanel.propTypes = {\n  settings: PropTypes.object.isRequired,\n  onSettingsChange: PropTypes.func.isRequired,\n};\n\n// --- Enhanced Reader Component ---\nconst EnhancedReader = ({ text, settings, onProgress, onSummarize, onExplainSelection, onBuildVocabulary, onGenerateStudyQuestions, onSimplifyText, onRephraseSelectedText, onTranslateSelectedText, onAnalyzeSentiment, onGetContextualInfo }) => {\n  const { readingMode } = settings;\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentChunkIndex, setCurrentChunkIndex] = useState(0); // Used for 'chunk' mode\n  const [currentParagraphIndex, setCurrentParagraphIndex] = useState(0); // Used for 'paragraph' mode\n  const [startTime, setStartTime] = useState(null);\n  const [readingStats, setReadingStats] = useState({\n    wordsRead: 0,\n    wpm: 0,\n    timeElapsed: 0,\n    pauseCount: 0,\n    backtrackCount: 0,\n  });\n  const [isProcessingTextForEnhancedReading, setIsProcessingTextForEnhancedReading] = useState(false);\n  const [selectedText, setSelectedText] = useState('');\n  const [showLLMButtons, setShowLLMButtons] = useState(false);\n\n  // State to hold the result of enhanced reading processing\n  const [processedChunks, setProcessedChunks] = useState([]);\n\n  // Memoize grouped paragraphs\n  const groupedParagraphs = useMemo(() => {\n    if (!processedChunks.length) return [];\n    const paragraphs = [];\n    let currentParagraph = [];\n    processedChunks.forEach(chunk => {\n      if (chunk.isParagraphBreak) {\n        if (currentParagraph.length > 0) {\n          paragraphs.push(currentParagraph);\n        }\n        currentParagraph = [];\n      } else {\n        currentParagraph.push(chunk);\n      }\n    });\n    if (currentParagraph.length > 0) {\n      paragraphs.push(currentParagraph);\n    }\n    return paragraphs;\n  }, [processedChunks]);\n\n  // Effect to process text into enhanced reading chunks whenever text or settings change\n  useEffect(() => {\n    const processText = () => {\n      setIsProcessingTextForEnhancedReading(true);\n      const chunks = ReadingEnhancerEngine.applyEnhancedFormatting(text, settings);\n      setProcessedChunks(chunks);\n      setIsProcessingTextForEnhancedReading(false);\n      setCurrentChunkIndex(0); // Reset chunk index on new text/settings\n      setCurrentParagraphIndex(0); // Reset paragraph index on new text/settings\n      setIsPlaying(false); // Stop playing\n      setStartTime(null); // Clear start time\n      setReadingStats({ wordsRead: 0, wpm: 0, timeElapsed: 0, pauseCount: 0, backtrackCount: 0 }); // Reset stats\n    };\n\n    if (text) {\n      processText();\n    } else {\n      setProcessedChunks([]); // Clear chunks if no text\n    }\n  }, [text, settings]); // Re-run effect when text or settings change\n\n  // Determine current content to display based on readingMode\n  const currentContentToDisplay = useMemo(() => {\n    if (readingMode === 'chunk') {\n      return processedChunks[currentChunkIndex];\n    } else { // 'paragraph' mode\n      const currentParaChunks = groupedParagraphs[currentParagraphIndex];\n      // Flatten the chunks within the current paragraph for rendering\n      return currentParaChunks ? { words: currentParaChunks.flatMap(chunk => chunk.words) } : null;\n    }\n  }, [readingMode, currentChunkIndex, currentParagraphIndex, processedChunks, groupedParagraphs]);\n\n  // Calculate progress based on mode\n  const progress = useMemo(() => {\n    if (readingMode === 'chunk') {\n      return processedChunks.length > 0 ? (currentChunkIndex / processedChunks.length) * 100 : 0;\n    } else { // 'paragraph' mode\n      return groupedParagraphs.length > 0 ? (currentParagraphIndex / groupedParagraphs.length) * 100 : 0;\n    }\n  }, [readingMode, currentChunkIndex, currentParagraphIndex, processedChunks, groupedParagraphs]);\n\n\n  // Effect hook for the automatic reading interval ('chunk' mode only).\n  useEffect(() => {\n    let interval;\n    if (isPlaying && readingMode === 'chunk' && currentChunkIndex < processedChunks.length) {\n      if (!startTime) setStartTime(Date.now()); // Start timer when playing begins\n\n      interval = setInterval(() => {\n        setCurrentChunkIndex(prev => {\n          const newIndex = prev + 1;\n          if (newIndex >= processedChunks.length) {\n            setIsPlaying(false); // Stop playing at end of text\n            return prev;\n          }\n\n          // Sum words read up to the new current chunk for WPM calculation\n          let wordsReadUpToCurrentChunk = 0;\n          for (let i = 0; i < newIndex; i++) {\n            wordsReadUpToCurrentChunk += processedChunks[i].words.filter(word => word.type === 'word').length;\n          }\n\n          const elapsed = (Date.now() - startTime) / 1000; // Time in seconds\n          const wpm = ProgressTracker.calculateWPM(wordsReadUpToCurrentChunk, elapsed);\n\n          setReadingStats(prevStats => ({\n            ...prevStats,\n            wordsRead: wordsReadUpToCurrentChunk,\n            wpm,\n            timeElapsed: elapsed,\n          }));\n\n          // Notify parent component about reading progress\n          onProgress && onProgress({ wordsRead: wordsReadUpToCurrentChunk, wpm, progress: (newIndex / processedChunks.length) * 100 });\n\n          return newIndex;\n        });\n      }, settings.speed * 1000); // Interval based on user-defined speed (per chunk)\n    }\n\n    // Cleanup function: clear the interval when component unmounts or dependencies change\n    return () => clearInterval(interval);\n  }, [isPlaying, currentChunkIndex, processedChunks.length, settings.speed, startTime, onProgress, processedChunks, readingMode]);\n\n  // Handler for Play/Pause button ('chunk' mode only).\n  const handlePlayPause = useCallback(() => {\n    if (readingMode !== 'chunk') return; // Only allow in chunk mode\n\n    if (!isPlaying && !startTime) {\n      setStartTime(Date.now()); // Set start time only once when playback begins initially\n    } else if (isPlaying) {\n      // If pausing, increment pause count\n      setReadingStats(prev => ({ ...prev, pauseCount: prev.pauseCount + 1 }));\n    }\n    setIsPlaying(prev => !prev); // Toggle playing state\n  }, [isPlaying, startTime, readingMode]);\n\n  // Handler for Reset button.\n  const handleReset = useCallback(() => {\n    setIsPlaying(false); // Stop playing\n    setCurrentChunkIndex(0); // Reset chunk index to beginning\n    setCurrentParagraphIndex(0); // Reset paragraph index to beginning\n    setStartTime(null); // Clear start time\n    setReadingStats({ wordsRead: 0, wpm: 0, timeElapsed: 0, pauseCount: 0, backtrackCount: 0 }); // Reset all stats\n  }, []);\n\n  // Handler for text selection\n  const handleTextSelection = useCallback(() => {\n    const selection = window.getSelection();\n    const text = selection.toString().trim();\n    if (text.length > 0) {\n      setSelectedText(text);\n      setShowLLMButtons(true); // Show buttons when text is selected\n    } else {\n      setSelectedText('');\n      setShowLLMButtons(false); // Hide buttons when no text is selected\n    }\n  }, []);\n\n  // Navigation for 'paragraph' mode\n  const handleNextParagraph = useCallback(() => {\n    if (currentParagraphIndex < groupedParagraphs.length - 1) {\n      setCurrentParagraphIndex(prev => prev + 1);\n      // Only increment words read for the current paragraph on forward movement in paragraph mode\n      setReadingStats(prev => ({ ...prev, wordsRead: prev.wordsRead + (groupedParagraphs[currentParagraphIndex]?.flatMap(chunk => chunk.words).filter(word => word.type === 'word').length || 0) }));\n    }\n  }, [currentParagraphIndex, groupedParagraphs]);\n\n  const handlePreviousParagraph = useCallback(() => {\n    if (currentParagraphIndex > 0) {\n      setCurrentParagraphIndex(prev => prev - 1);\n      setReadingStats(prev => ({ ...prev, backtrackCount: prev.backtrackCount + 1 })); // Increment backtrack count\n    }\n  }, [currentParagraphIndex]);\n\n  // Show loading state if text is being processed.\n  if (isProcessingTextForEnhancedReading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center bg-white p-12 rounded-lg border shadow-xl min-h-[300px]\">\n        <Loader2 className=\"w-16 h-16 text-blue-500 animate-spin mb-4\" />\n        <p className=\"text-xl font-semibold text-gray-700\">Processing text for enhanced reading...</p>\n        <p className=\"text-gray-500 text-sm mt-2\">This might take a moment for very large files.</p>\n      </div>\n    );\n  }\n\n  // Display message if no text content is available after processing.\n  if (!currentContentToDisplay || processedChunks.length === 0) {\n    return (\n      <div className=\"text-center p-8 text-gray-500 bg-white rounded-lg border shadow-xl min-h-[300px] flex flex-col justify-center items-center\">\n        <Book className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n        <p className=\"text-lg\">No text content available for enhanced reading. Please upload a file.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white p-6 sm:p-8 rounded-lg border shadow-xl\"> {/* Added responsive padding */}\n      {/* Enhanced Reading Display */}\n      <div className=\"text-center mb-6 sm:mb-8 min-h-[120px] sm:min-h-[150px] flex items-center justify-center\">\n        <p\n          className=\"text-xl sm:text-3xl lg:text-4xl font-mono leading-relaxed px-4 break-words\"\n          onMouseUp={handleTextSelection} // Capture text selection\n        >\n          {currentContentToDisplay.words.map((item, idx) => (\n            item.type === 'word' || item.type === 'punctuation' ? (\n              <span key={item.index + '-' + idx} style={{ opacity: item.opacity }}>\n                <span className=\"font-bold text-blue-900\">{item.bold}</span>\n                <span className=\"font-normal text-gray-600\" style={{ opacity: item.opacity * 0.7 }}>{item.normal}</span>\n              </span>\n            ) : (\n              <span key={item.index + '-' + idx}>{item.content}</span> // Render spaces\n            )\n          ))}\n        </p>\n      </div>\n\n      {/* Reading Controls */}\n      <div className=\"space-y-4\">\n        <div className=\"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4\">\n          {readingMode === 'chunk' && ( // Show Play/Pause only in chunk mode\n            <button\n              onClick={handlePlayPause}\n              className=\"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                         focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\"\n            >\n              {isPlaying ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n              {isPlaying ? 'Pause' : 'Play'}\n            </button>\n          )}\n          {readingMode === 'paragraph' && ( // Show paragraph navigation buttons\n            <>\n              <button\n                onClick={handlePreviousParagraph}\n                disabled={currentParagraphIndex === 0}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <ArrowLeft className=\"w-5 h-5\" />\n                Prev Paragraph\n              </button>\n              <button\n                onClick={handleNextParagraph}\n                disabled={currentParagraphIndex >= groupedParagraphs.length - 1}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Next Paragraph\n                <ArrowRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n\n          <button\n            onClick={handleReset}\n            className=\"flex items-center justify-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                       focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50\"\n          >\n            <RotateCcw className=\"w-5 h-5\" />\n            Reset\n          </button>\n          {text && ( // Only show summarize button if text is loaded\n            <button\n              onClick={onSummarize}\n              className=\"flex items-center justify-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                         focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50\"\n            >\n              <Lightbulb className=\"w-5 h-5\" />\n              Summarize Text ✨\n            </button>\n          )}\n          {selectedText && showLLMButtons && ( // Show LLM buttons if text is selected\n            <>\n              <button\n                onClick={() => { onExplainSelection(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50\"\n              >\n                <Lightbulb className=\"w-5 h-5\" />\n                Explain Selection ✨\n              </button>\n              <button\n                onClick={() => { onBuildVocabulary(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-opacity-50\"\n              >\n                <GraduationCap className=\"w-5 h-5\" />\n                Build Vocabulary ✨\n              </button>\n              <button\n                onClick={() => { onGenerateStudyQuestions(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-blue-800 text-white rounded-lg hover:bg-blue-900 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-blue-700 focus:ring-opacity-50\"\n              >\n                <HelpCircle className=\"w-5 h-5\" />\n                Study Questions ✨\n              </button>\n              <button\n                onClick={() => { onSimplifyText(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-green-800 text-white rounded-lg hover:bg-green-900 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-opacity-50\"\n              >\n                <Lightbulb className=\"w-5 h-5\" />\n                Simplify Text ✨\n              </button>\n              <button\n                onClick={() => { onRephraseSelectedText(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-opacity-50\"\n              >\n                <Shuffle className=\"w-5 h-5\" />\n                Rephrase Selection ✨\n              </button>\n              <button\n                onClick={() => { onTranslateSelectedText(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50\"\n              >\n                <Languages className=\"w-5 h-5\" />\n                Translate Selection ✨\n              </button>\n              <button\n                onClick={() => { onAnalyzeSentiment(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50\"\n              >\n                <Smile className=\"w-5 h-5\" />\n                Analyze Sentiment ✨\n              </button>\n              <button\n                onClick={() => { onGetContextualInfo(selectedText); setSelectedText(''); setShowLLMButtons(false); }}\n                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                           focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-opacity-50\"\n              >\n                <Info className=\"w-5 h-5\" />\n                Contextual Info ✨\n              </button>\n            </>\n          )}\n        </div>\n\n        {/* Progress Bar */}\n        <div className=\"w-full bg-gray-200 rounded-full h-3 shadow-inner mt-4\"> {/* Added margin-top */}\n          <div\n            className=\"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300\"\n            style={{ width: `${progress}%` }}\n          />\n        </div>\n\n        {/* Reading Statistics */}\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-center text-sm mt-4\"> {/* Added margin-top */}\n          <div className=\"bg-blue-50 p-3 rounded-lg shadow-sm\">\n            <div className=\"font-bold text-blue-800 text-base sm:text-lg\">{readingStats.wordsRead}</div>\n            <div className=\"text-blue-600\">Words Read</div>\n          </div>\n          <div className=\"bg-green-50 p-3 rounded-lg shadow-sm\">\n            <div className=\"font-bold text-green-800 text-base sm:text-lg\">{readingStats.wpm}</div>\n            <div className=\"text-green-600\">WPM</div>\n          </div>\n          <div className=\"bg-purple-50 p-3 rounded-lg shadow-sm\">\n            <div className=\"font-bold text-purple-800 text-base sm:text-lg\">{Math.round(progress)}%</div>\n            <div className=\"text-purple-600\">Progress</div>\n          </div>\n          <div className=\"bg-orange-50 p-3 rounded-lg shadow-sm\">\n            <div className=\"font-bold text-orange-800 text-base sm:text-lg\">{Math.round(readingStats.timeElapsed)}s</div>\n            <div className=\"text-orange-600\">Time</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nEnhancedReader.propTypes = {\n  text: PropTypes.string.isRequired,\n  settings: PropTypes.object.isRequired,\n  onProgress: PropTypes.func,\n  onSummarize: PropTypes.func.isRequired,\n  onExplainSelection: PropTypes.func.isRequired,\n  onBuildVocabulary: PropTypes.func.isRequired,\n  onGenerateStudyQuestions: PropTypes.func.isRequired,\n  onSimplifyText: PropTypes.func.isRequired,\n  onRephraseSelectedText: PropTypes.func.isRequired,\n  onTranslateSelectedText: PropTypes.func.isRequired,\n  onAnalyzeSentiment: PropTypes.func.isRequired, // New prop\n  onGetContextualInfo: PropTypes.func.isRequired, // New prop\n};\n\n// --- Enhanced Settings Panel ---\nconst EnhancedSettings = ({ settings, onSettingsChange }) => {\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  // Handles changes to settings, applying validation.\n  const handleSettingChange = useCallback((key, value) => {\n    let validatedValue = parseFloat(value);\n    if (isNaN(validatedValue)) {\n      validatedValue = settings[key]; // Fallback to current setting if input is invalid\n    }\n\n    switch (key) {\n      case 'speed':\n        validatedValue = Math.max(0.5, Math.min(10, validatedValue)); // Speed between 0.5s and 10s per chunk\n        break;\n      case 'fixation':\n        validatedValue = Math.max(0.2, Math.min(0.8, validatedValue)); // Fixation between 20% and 80%\n        break;\n      case 'saccade':\n        validatedValue = Math.max(0.5, Math.min(1.5, validatedValue)); // Saccade between 50% and 150%\n        break;\n      case 'opacity':\n        validatedValue = Math.max(0.3, Math.min(1, validatedValue)); // Opacity between 30% and 100%\n        break;\n      case 'maxWordsPerChunk': // New case for maxWordsPerChunk\n        validatedValue = Math.max(3, Math.min(20, Math.round(validatedValue))); // 3 to 20 words per chunk, integer\n        break;\n      case 'readingMode':\n        validatedValue = value; // 'chunk' or 'paragraph'\n        break;\n      default:\n        break;\n    }\n\n    onSettingsChange({ ...settings, [key]: validatedValue });\n  }, [settings, onSettingsChange]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white p-6 rounded-lg border shadow-xl\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n            <Zap className=\"w-5 h-5 text-blue-600\" />\n            Enhanced Reading Settings\n          </h3>\n          <button\n            onClick={() => setShowAdvanced(prev => !prev)}\n            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-300 rounded-md px-2 py-1 transition-colors duration-200\"\n          >\n            {showAdvanced ? 'Hide' : 'Show'} Advanced\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Reading Mode Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Reading Mode\n            </label>\n            <div className=\"flex space-x-4\">\n              <label className=\"inline-flex items-center\">\n                <input\n                  type=\"radio\"\n                  className=\"form-radio h-4 w-4 text-blue-600\"\n                  name=\"readingMode\"\n                  value=\"chunk\"\n                  checked={settings.readingMode === 'chunk'}\n                  onChange={(e) => handleSettingChange('readingMode', e.target.value)}\n                />\n                <span className=\"ml-2 text-gray-700\">Chunk by Chunk</span>\n              </label>\n              <label className=\"inline-flex items-center\">\n                <input\n                  type=\"radio\"\n                  className=\"form-radio h-4 w-4 text-blue-600\"\n                  name=\"readingMode\"\n                  value=\"paragraph\"\n                  checked={settings.readingMode === 'paragraph'}\n                  onChange={(e) => handleSettingChange('readingMode', e.target.value)}\n                />\n                <span className=\"ml-2 text-gray-700\">Full Paragraph</span>\n              </label>\n            </div>\n          </div>\n\n          {/* Reading Speed */}\n          {settings.readingMode === 'chunk' && ( // Only show speed control for chunk mode\n            <div>\n              <label htmlFor=\"speed-range\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Reading Speed ({settings.speed.toFixed(1)}s per chunk)\n              </label>\n              <input\n                id=\"speed-range\"\n                type=\"range\"\n                min=\"0.5\"\n                max=\"10\"\n                step=\"0.1\"\n                value={settings.speed}\n                onChange={(e) => handleSettingChange('speed', e.target.value)}\n                className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n              />\n              <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                <span>Fast (0.5s)</span>\n                <span>Slow (10s)</span>\n              </div>\n            </div>\n          )}\n\n          {/* Max Words Per Chunk */}\n          {settings.readingMode === 'chunk' && ( // Only show max words per chunk for chunk mode\n            <div>\n              <label htmlFor=\"max-words-per-chunk-range\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Max Words Per Chunk ({settings.maxWordsPerChunk} words)\n              </label>\n              <input\n                id=\"max-words-per-chunk-range\"\n                type=\"range\"\n                min=\"3\"\n                max=\"20\"\n                step=\"1\"\n                value={settings.maxWordsPerChunk}\n                onChange={(e) => handleSettingChange('maxWordsPerChunk', e.target.value)}\n                className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n              />\n              <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                <span>Smaller Chunks</span>\n                <span>Larger Chunks</span>\n              </div>\n            </div>\n          )}\n\n          {/* Fixation Level */}\n          <div>\n            <label htmlFor=\"fixation-range\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Fixation Level ({Math.round(settings.fixation * 100)}%)\n            </label>\n            <input\n              id=\"fixation-range\"\n              type=\"range\"\n              min=\"0.2\"\n              max=\"0.8\"\n              step=\"0.1\"\n              value={settings.fixation}\n              onChange={(e) => handleSettingChange('fixation', e.target.value)}\n              className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n              <span>Less Bold</span>\n              <span>More Bold</span>\n            </div>\n          </div>\n\n          {showAdvanced && (\n            <>\n              {/* Saccade */}\n              <div>\n                <label htmlFor=\"saccade-range\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Saccade ({Math.round(settings.saccade * 100)}%)\n                </label>\n                <input\n                  id=\"saccade-range\"\n                  type=\"range\"\n                  min=\"0.5\"\n                  max=\"1.5\"\n                  step=\"0.1\"\n                  value={settings.saccade}\n                  onChange={(e) => handleSettingChange('saccade', e.target.value)}\n                  className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n                />\n                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>Narrow Gaze</span>\n                  <span>Wide Gaze</span>\n                </div>\n              </div>\n\n              {/* Opacity */}\n              <div>\n                <label htmlFor=\"opacity-range\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Text Opacity ({Math.round(settings.opacity * 100)}%)\n                </label>\n                <input\n                  id=\"opacity-range\"\n                  type=\"range\"\n                  min=\"0.3\"\n                  max=\"1\"\n                  step=\"0.1\"\n                  value={settings.opacity}\n                  onChange={(e) => handleSettingChange('opacity', e.target.value)}\n                  className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 transition-all duration-300\"\n                />\n                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>Fainter</span>\n                  <span>Full Visibility</span>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      <AccessibilityPanel settings={settings} onSettingsChange={onSettingsChange} />\n    </div>\n  );\n};\n\nEnhancedSettings.propTypes = {\n  settings: PropTypes.object.isRequired,\n  onSettingsChange: PropTypes.func.isRequired,\n};\n\n// --- Secure File Importer ---\nconst SecureFileImporter = ({ onFileLoaded, onSecurityStatus }) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errors, setErrors] = useState([]);\n  const [showDriveMessage, setShowDriveMessage] = useState(false); // New state for Drive message\n\n  // Dynamically load PDF.js library\n  const loadPdfJs = useCallback(async () => {\n    // Only load if not already loaded\n    if (typeof window.pdfjsLib === 'undefined') {\n      console.log(\"Loading PDF.js...\");\n      try {\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js';\n          script.onload = () => {\n            // Set up the worker source\n            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';\n            console.log(\"PDF.js loaded successfully.\");\n            resolve();\n          };\n          script.onerror = (e) => {\n            console.error(\"Failed to load PDF.js script:\", e);\n            reject(new Error(\"Failed to load PDF.js script from CDN. This is likely due to network issues or a Content Security Policy (CSP) blocking external scripts. If you control the environment, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library locally.\"));\n          };\n          document.head.appendChild(script);\n        });\n      } catch (error) {\n        throw new Error(`Failed to load PDF.js: ${error.message}`);\n      }\n    }\n  }, []);\n\n  // Dynamically load Mammoth.js library\n  const loadMammothJs = useCallback(async () => {\n    // Only load if not already loaded\n    if (typeof window.mammoth === 'undefined') {\n      console.log(\"Loading Mammoth.js...\");\n      try {\n        await new Promise((resolve, reject) => {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mammoth.js/1.6.0/mammoth.browser.min.js';\n          script.onload = () => {\n            console.log(\"Mammoth.js loaded successfully.\");\n            resolve();\n          };\n          script.onerror = (e) => {\n            console.error(\"Failed to load Mammoth.js script:\", e);\n            reject(new Error(\"Failed to load Mammoth.js script from CDN. This is likely due to network issues or a Content Security Policy (CSP) blocking external scripts. If you control the environment, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library locally.\"));\n          };\n          document.head.appendChild(script);\n        });\n      } catch (error) {\n        throw new Error(`Failed to load Mammoth.js: ${error.message}`);\n      }\n    }\n  }, []);\n\n  // Parses PDF file content\n  const parsePdf = useCallback(async (file) => {\n    console.log(\"Starting PDF parsing for file:\", file.name);\n    try {\n      await loadPdfJs(); // Ensure PDF.js is loaded\n      const arrayBuffer = await file.arrayBuffer();\n      const loadingTask = window.pdfjsLib.getDocument({ data: arrayBuffer });\n      const pdf = await loadingTask.promise;\n      let fullText = '';\n      for (let i = 1; i <= pdf.numPages; i++) {\n        const page = await pdf.getPage(i); // Corrected: use `pdf.getPage`\n        const textContent = await page.getTextContent();\n        fullText += textContent.items.map(item => item.str).join(' ') + '\\n\\n';\n      }\n      console.log(\"PDF parsing completed.\");\n      return fullText;\n    } catch (error) {\n      console.error(\"Error during PDF parsing:\", error);\n      throw new Error(`PDF parsing failed: ${error.message || error.toString()}`);\n    }\n  }, [loadPdfJs]);\n\n  // Parses DOCX file content\n  const parseDocx = useCallback(async (file) => {\n    console.log(\"Starting DOCX parsing for file:\", file.name);\n    try {\n      await loadMammothJs(); // Ensure Mammoth.js is loaded\n      const arrayBuffer = await file.arrayBuffer();\n      const result = await window.mammoth.extractRawText({ arrayBuffer: arrayBuffer });\n      console.log(\"DOCX parsing completed.\");\n      return result.value; // The raw text\n    } catch (error) {\n      console.error(\"Error during DOCX parsing:\", error);\n      throw new Error(`DOCX parsing failed: ${error.message || error.toString()}`);\n    }\n  }, [loadMammothJs]);\n\n  // Validates and processes the selected file.\n  const validateAndProcessFile = useCallback(async (file) => {\n    let newErrors = [];\n\n    console.log(\"File object received in validateAndProcessFile:\", file); // Debugging line\n    console.log(\"Type of file:\", typeof file, \"Is File instance:\", file instanceof File, \"Is Blob instance:\", file instanceof Blob); // Debugging line\n\n    try {\n      if (!file) {\n        newErrors.push('No file selected.');\n      } else {\n        // Add explicit type check for robustness\n        if (!(file instanceof File) && !(file instanceof Blob)) {\n          newErrors.push('Provided input is not a valid file or blob. Please select a file from your device.');\n          setErrors(newErrors);\n          onSecurityStatus(false, newErrors);\n          return;\n        }\n\n        // Validate file size and type using SecurityUtils\n        if (!SecurityUtils.validateFileSize(file.size)) {\n          newErrors.push(`File size (${(file.size / (1024 * 1024)).toFixed(2)}MB) exceeds 500MB limit. Please choose a smaller file.`);\n        }\n\n        if (!SecurityUtils.validateFileType(file.type)) {\n          newErrors.push(`Unsupported file type: \"${file.type}\". Please upload .txt, .csv, .json, .pdf, or .docx files.`);\n        }\n      }\n\n      if (newErrors.length > 0) {\n        setErrors(newErrors);\n        onSecurityStatus(false, newErrors);\n        return; // Stop if there are initial validation errors\n      }\n\n      setIsLoading(true); // Indicate loading state\n      let rawText = '';\n\n      // Determine how to read the file based on its type\n      if (file.type === 'application/pdf') {\n        rawText = await parsePdf(file);\n      } else if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n        rawText = await parseDocx(file);\n      } else {\n        // For text-based files\n        rawText = await file.text();\n      }\n      \n      console.log(\"Raw text extracted. Length:\", rawText.length);\n      const sanitizedText = SecurityUtils.sanitizeText(rawText); // Sanitize content after extraction\n      console.log(\"Text sanitized. Length:\", sanitizedText.length);\n\n      if (sanitizedText.length === 0) {\n        newErrors.push('The file appears to be empty or contains only disallowed content after security sanitization. Please ensure the file has valid text.');\n        setErrors(newErrors);\n        onSecurityStatus(false, newErrors);\n        return;\n      }\n\n      setErrors([]); // Clear any previous errors\n      onSecurityStatus(true, []); // Indicate secure status\n      onFileLoaded(sanitizedText); // Pass the sanitized text to the parent component\n\n    } catch (error) {\n      // Catch any unexpected errors during file processing\n      let errorMsg;\n      if (error instanceof Error) {\n        errorMsg = `File processing failed: ${error.message}. Please try again or use a different file.`;\n      } else if (typeof error === 'object' && error !== null && 'isTrusted' in error) {\n        // This specifically targets the {\"isTrusted\": true} type of error for CDN loading\n        errorMsg = `A script required for file processing (e.g., PDF/DOCX) could not be loaded from its CDN. This might be due to a network issue, ad blocker, or Content Security Policy (CSP). To resolve, please ensure 'https://cdnjs.cloudflare.com' is whitelisted, or serve the library files (pdf.js and mammoth.js) locally with your application.`;\n        console.warn(\"Non-Error object (likely a script load event) caught in file processing:\", error);\n      } else if (typeof error === 'object' && error !== null) {\n        errorMsg = `File operation failed (unexpected error format: ${JSON.stringify(error)}). Please try again or use a different file.`;\n        console.warn(\"Non-Error object caught in file processing:\", error); // Log this unusual object\n      } else {\n        errorMsg = `An unknown error occurred during file processing: ${error}. Please try again.`;\n      }\n      \n      setErrors([errorMsg]);\n      onSecurityStatus(false, [errorMsg]);\n      console.error(\"Final catch block received error:\", error); // Log the full error object for debugging\n    } finally {\n      setIsLoading(false); // End loading state\n    }\n  }, [onFileLoaded, onSecurityStatus, parsePdf, parseDocx]); // Dependencies for useCallback\n\n  // Handles file drop event for drag-and-drop functionality.\n  const handleDrop = useCallback((e) => {\n    e.preventDefault();\n    setIsDragging(false);\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      validateAndProcessFile(files[0]); // Process the first dropped file\n    }\n  }, [validateAndProcessFile]); // Dependency on validateAndProcessFile\n\n  // Handles file selection via input field.\n  const handleFileSelect = useCallback((e) => {\n    const file = e.target.files[0];\n    if (file) {\n      validateAndProcessFile(file); // Process the selected file\n    }\n  }, [validateAndProcessFile]); // Dependency on validateAndProcessFile\n\n  return (\n    <div className=\"space-y-4\">\n      <div\n        className={`border-2 border-dashed rounded-lg p-8 text-center transition-all duration-300 ${\n          isDragging ? 'border-blue-500 bg-blue-50 scale-[1.02] shadow-lg' : 'border-gray-300 bg-white shadow-md'\n        } ${isLoading ? 'opacity-70 cursor-not-allowed' : 'cursor-pointer'}`}\n        onDrop={handleDrop}\n        onDragOver={(e) => e.preventDefault()} // Required to allow drop\n        onDragEnter={() => setIsDragging(true)}\n        onDragLeave={() => setIsDragging(false)}\n      >\n        <Upload className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n        <p className=\"text-lg font-medium text-gray-700 mb-2\">\n          {isLoading ? 'Processing file, please wait...' : 'Drag & drop your text file here or click to browse'}\n        </p>\n        <p className=\"text-sm text-gray-500 mb-4\">\n          Supported formats: .txt, .csv, .json, .pdf, .docx (max 500MB)\n        </p>\n        <input\n          type=\"file\"\n          accept=\".txt,.csv,.json,.pdf,.docx\" // Updated accept attribute\n          onChange={handleFileSelect}\n          className=\"hidden\"\n          id=\"fileInput\"\n          disabled={isLoading} // Disable input while loading\n        />\n        <label\n          htmlFor=\"fileInput\"\n          className=\"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 cursor-pointer disabled:opacity-50 shadow-lg transform hover:scale-[1.05] transition-transform duration-200\"\n        >\n          <FileText className=\"w-4 h-4 mr-2\" />\n          Choose File\n        </label>\n      </div>\n\n      {/* Google Drive Button */}\n      <button\n        onClick={() => setShowDriveMessage(true)}\n        className=\"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-500 to-lime-600 text-white rounded-lg hover:from-green-600 hover:to-lime-700 cursor-pointer disabled:opacity-50 shadow-lg transform hover:scale-[1.02] transition-transform duration-200\"\n        disabled={isLoading}\n      >\n        <HardDrive className=\"w-5 h-5\" />\n        Load from Google Drive (Beta)\n      </button>\n\n      {/* Google Drive Integration Message Modal */}\n      {showDriveMessage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg p-6 shadow-2xl max-w-md w-full space-y-4 animate-fade-in-up\">\n            <h3 className=\"text-xl font-bold text-gray-800 flex items-center gap-2\">\n              <HardDrive className=\"w-6 h-6 text-green-600\" /> Google Drive Integration\n            </h3>\n            <p className=\"text-gray-700\">\n              For a full, secure Google Drive integration, a real-world application would typically:\n            </p>\n            <ul className=\"list-disc list-inside text-gray-600 space-y-1\">\n              <li>Utilize Google OAuth 2.0 for secure user authentication.</li>\n              <li>Employ the Google Picker API for a user-friendly file selection interface.</li>\n              <li>Require a secure backend server to handle file content retrieval due to browser CORS policies and authentication complexities.</li>\n            </ul>\n            <p className=\"text-gray-700 font-semibold\">\n              In this client-side demo environment, direct fetching of arbitrary files from Google Drive is not supported due to these technical limitations and security requirements.\n            </p>\n            <button\n              onClick={() => setShowDriveMessage(false)}\n              className=\"w-full px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md transform hover:scale-[1.02]\"\n            >\n              Got It!\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Display errors if any */}\n      {errors.length > 0 && (\n        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg shadow-md\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <AlertTriangle className=\"w-5 h-5 text-red-600\" />\n            <span className=\"font-medium text-red-800\">Security Issues Detected:</span>\n          </div>\n          <ul className=\"text-sm text-red-700 space-y-1 list-disc pl-5\">\n            {errors.map((error, index) => (\n              <li key={index}>{error}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nSecureFileImporter.propTypes = {\n  onFileLoaded: PropTypes.func.isRequired,\n  onSecurityStatus: PropTypes.func.isRequired,\n};\n\n// --- Security Status Component ---\nconst SecurityStatus = ({ isSecure, errors }) => (\n  <div className={`flex items-center gap-2 p-3 rounded-lg border shadow-md\n    ${isSecure ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}\n  >\n    <Shield className={`w-5 h-5 ${isSecure ? 'text-green-600' : 'text-red-600'}`} />\n    <span className={`font-medium ${isSecure ? 'text-green-800' : 'text-red-800'}`}>\n      Security Status: {isSecure ? 'Secure' : 'Issues Detected'}\n    </span>\n    {errors.length > 0 && (\n      <div className=\"ml-auto text-sm font-semibold text-red-600\">\n        ({errors.length} issue{errors.length > 1 ? 's' : ''})\n      </div>\n    )}\n    {isSecure && errors.length === 0 && (\n      <CheckCircle className=\"w-5 h-5 text-green-600 ml-auto\" />\n    )}\n  </div>\n);\n\nSecurityStatus.propTypes = {\n  isSecure: PropTypes.bool.isRequired,\n  errors: PropTypes.array.isRequired,\n};\n\n// --- Main App Component: SynapseReadApp ---\nconst SynapseReadApp = () => {\n  const [fileContent, setFileContent] = useState('');\n  const [settings, setSettings] = useState({\n    speed: 2.5, // Adjusted default speed for chunk-by-chunk reading\n    fixation: 0.5,\n    saccade: 1,\n    opacity: 1,\n    maxWordsPerChunk: 10, // New default setting for max words per chunk\n    readingMode: 'chunk', // New setting: 'chunk' or 'paragraph'\n  });\n  const [securityStatus, setSecurityStatus] = useState({ isSecure: true, errors: [] });\n  const [readingProgress, setReadingProgress] = useState(null);\n  const [summary, setSummary] = useState(''); // State to store the generated summary\n  const [isSummarizing, setIsSummarizing] = useState(false); // State for summarization loading\n  const [summaryError, setSummaryError] = useState(''); // State for summary errors\n  const [showSummary, setShowSummary] = useState(false); // State to toggle summary visibility\n\n  const [explanation, setExplanation] = useState(''); // State to store the generated explanation\n  const [isExplaining, setIsExplaining] = useState(false); // State for explanation loading\n  const [explanationError, setExplanationError] = useState(''); // State for explanation errors\n  const [showExplanation, setShowExplanation] = useState(false); // State to toggle explanation visibility\n\n  const [vocabulary, setVocabulary] = useState(null); // State to store vocabulary data (object with definition, synonyms, antonyms, examples)\n  const [isBuildingVocabulary, setIsBuildingVocabulary] = useState(false); // State for vocabulary loading\n  const [vocabularyError, setVocabularyError] = useState(''); // State for vocabulary errors\n  const [showVocabulary, setShowVocabulary] = useState(false); // State to toggle vocabulary visibility\n\n  const [studyQuestions, setStudyQuestions] = useState(null); // State for study questions\n  const [isGeneratingStudyQuestions, setIsGeneratingStudyQuestions] = useState(false);\n  const [studyQuestionsError, setStudyQuestionsError] = useState('');\n  const [showStudyQuestions, setShowStudyQuestions] = useState(false);\n\n  const [simplifiedText, setSimplifiedText] = useState(''); // State for simplified text\n  const [isSimplifying, setIsSimplifying] = useState(false);\n  const [simplifyError, setSimplifyError] = useState('');\n  const [showSimplifiedText, setShowSimplifiedText] = useState(false);\n\n  const [faqAnswers, setFaqAnswers] = useState(null); // State for FAQ answers\n  const [isAnsweringFaq, setIsAnsweringFaq] = useState(false);\n  const [faqError, setFaqError] = useState('');\n  const [showFaq, setShowFaq] = useState(false);\n\n  const [keyTakeaways, setKeyTakeaways] = useState(null); // State for key takeaways\n  const [isGeneratingKeyTakeaways, setIsGeneratingKeyTakeaways] = useState(false);\n  const [keyTakeawaysError, setKeyTakeawaysError] = useState('');\n  const [showKeyTakeaways, setShowKeyTakeaways] = useState(false);\n\n  const [rephrasedText, setRephrasedText] = useState(''); // State for rephrased text\n  const [isRephrasingText, setIsRephrasingText] = useState(false);\n  const [rephraseError, setRephraseError] = useState('');\n  const [showRephrasedText, setShowRephrasedText] = useState(false);\n\n  const [translatedText, setTranslatedText] = useState(''); // State for translated text\n  const [isTranslatingText, setIsTranslatingText] = useState(false);\n  const [translateError, setTranslateError] = useState('');\n  const [showTranslatedText, setShowTranslatedText] = useState(false);\n\n  const [sentimentAnalysis, setSentimentAnalysis] = useState(null); // New state for sentiment\n  const [isAnalyzingSentiment, setIsAnalyzingSentiment] = useState(false);\n  const [sentimentError, setSentimentError] = useState('');\n  const [showSentiment, setShowSentiment] = useState(false);\n\n  const [contextualInfo, setContextualInfo] = useState(''); // New state for contextual info\n  const [isGettingContextualInfo, setIsGettingContextualInfo] = useState(false);\n  const [contextualInfoError, setContextualInfoError] = useState('');\n  const [showContextualInfo, setShowContextualInfo] = useState(false);\n\n  // Firestore states\n  const [firebaseDb, setFirebaseDb] = useState(null);\n  const [firebaseAuth, setFirebaseAuth] = useState(null);\n  const [appUserId, setAppUserId] = useState(null);\n  const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-synapse-read-app'; // Use provided __app_id or default\n\n\n  // Initialize Firebase and authenticate\n  useEffect(() => {\n    const initFirebase = async () => {\n      const { db, auth, userId } = await firebaseInitializeAndAuth(JSON.parse(__firebase_config), appId);\n      setFirebaseDb(db);\n      setFirebaseAuth(auth);\n      setAppUserId(userId);\n    };\n    initFirebase();\n  }, [appId]); // Depend on appId\n\n  // Callback for when a file's content is successfully loaded.\n  const handleFileLoaded = useCallback((content) => {\n    setFileContent(content);\n    // Clear all previous LLM results when a new file is loaded\n    setSummary('');\n    setSummaryError('');\n    setShowSummary(false);\n    setExplanation('');\n    setExplanationError('');\n    setShowExplanation(false);\n    setVocabulary(null);\n    setVocabularyError('');\n    setShowVocabulary(false);\n    setStudyQuestions(null);\n    setStudyQuestionsError('');\n    setShowStudyQuestions(false);\n    setSimplifiedText('');\n    setSimplifyError('');\n    setShowSimplifiedText(false);\n    setFaqAnswers(null);\n    setFaqError('');\n    setShowFaq(false);\n    setKeyTakeaways(null);\n    setKeyTakeawaysError('');\n    setShowKeyTakeaways(false);\n    setRephrasedText('');\n    setRephraseError('');\n    setShowRephrasedText(false);\n    setTranslatedText('');\n    setTranslateError('');\n    setShowTranslatedText(false);\n    setSentimentAnalysis(null); // Clear new sentiment state\n    setSentimentError('');\n    setShowSentiment(false);\n    setContextualInfo(''); // Clear new contextual info state\n    setContextualInfoError('');\n    setShowContextualInfo(false);\n  }, []);\n\n  // Callback for when settings are changed.\n  const handleSettingsChange = useCallback((newSettings) => {\n    setSettings(newSettings);\n  }, []);\n\n  // Callback to update the security status.\n  const handleSecurityStatus = useCallback((isSecure, errors) => {\n    setSecurityStatus({ isSecure, errors });\n  }, []);\n\n  // Callback to receive reading progress updates from EnhancedReader.\n  const handleReadingProgress = useCallback((progress) => {\n    setReadingProgress(progress);\n  }, []);\n\n  // Handler for logging errors from ErrorBoundary\n  const handleLogError = useCallback((errorDetails) => {\n    if (firebaseDb && appUserId) {\n      logErrorToFirestore(errorDetails, appUserId, appId);\n    } else {\n      console.warn(\"Firestore not ready for logging. Error details:\", errorDetails);\n    }\n  }, [firebaseDb, appUserId, appId]);\n\n  // --- LLM Powered Summarization Feature ---\n  const handleSummarizeText = useCallback(async () => {\n    if (!fileContent) {\n      setSummaryError(\"Please upload a document first to summarize.\");\n      return;\n    }\n    \n    // Clear previous summary and errors\n    setSummary('');\n    setSummaryError('');\n    setIsSummarizing(true);\n    setShowSummary(true); // Show summary section while loading\n\n    try {\n      const prompt = `Summarize the following text concisely and accurately. Focus on the main points and key information. Ensure the summary is easy to understand and flows well:\\n\\n\"${fileContent}\"`;\n      \n      const chatHistory = [{ role: \"user\", parts: [{ text: prompt }] }];\n      const payload = { contents: chatHistory };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for summarization...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setSummary(generatedText);\n        console.log(\"Summary generated successfully.\");\n      } else {\n        throw new Error(\"No summary content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error summarizing text:\", error);\n      setSummaryError(`Failed to generate summary: ${error.message}. Please try again.`);\n      setSummary(''); // Clear any partial summary\n    } finally {\n      setIsSummarizing(false);\n    }\n  }, [fileContent]); // Dependency on fileContent\n\n  // --- LLM Powered Explanation Feature ---\n  const handleExplainSelection = useCallback(async (textToExplain) => {\n    if (!textToExplain) {\n      setExplanationError(\"No text selected for explanation.\");\n      return;\n    }\n    \n    // Clear previous explanation and errors\n    setExplanation('');\n    setExplanationError('');\n    setIsExplaining(true);\n    setShowExplanation(true); // Show explanation section while loading\n\n    try {\n      const prompt = `Explain the following text or concept in simple, easy-to-understand terms, suitable for someone with reading difficulties. Keep it concise:\\n\\n\"${textToExplain}\"`;\n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for explanation...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setExplanation(generatedText);\n        console.log(\"Explanation generated successfully.\");\n      } else {\n        throw new Error(\"No explanation content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error explaining text:\", error);\n      setExplanationError(`Failed to get explanation: ${error.message}. Please try again.`);\n      setExplanation(''); // Clear any partial explanation\n    } finally {\n      setIsExplaining(false);\n    }\n  }, []); // No dependencies for now as it uses local state and parameters\n\n  // --- LLM Powered Vocabulary Builder Feature ---\n  const handleBuildVocabulary = useCallback(async (wordToLookup) => {\n    if (!wordToLookup) {\n      setVocabularyError(\"No word selected for vocabulary lookup.\");\n      return;\n    }\n\n    setVocabulary(null);\n    setVocabularyError('');\n    setIsBuildingVocabulary(true);\n    setShowVocabulary(true);\n\n    try {\n      // Use a structured prompt to get JSON output\n      const prompt = `Provide definition, 3 synonyms, 3 antonyms (if applicable), and 2 example sentences for the word \"${wordToLookup}\". Format the output as a JSON object with keys: \"word\", \"definition\", \"synonyms\" (array of strings), \"antonyms\" (array of strings, can be empty), \"examples\" (array of strings).`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"OBJECT\",\n            properties: {\n              \"word\": { \"type\": \"STRING\" },\n              \"definition\": { \"type\": \"STRING\" },\n              \"synonyms\": {\n                \"type\": \"ARRAY\",\n                \"items\": { \"type\": \"STRING\" }\n              },\n              \"antonyms\": {\n                \"type\": \"ARRAY\",\n                \"items\": { \"type\": \"STRING\" }\n              },\n              \"examples\": {\n                \"type\": \"ARRAY\",\n                \"items\": { \"type\": \"STRING\" }\n              }\n            },\n            \"propertyOrdering\": [\"word\", \"definition\", \"synonyms\", \"antonyms\", \"examples\"]\n          }\n        }\n      };\n      \n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for vocabulary...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedVocabulary = JSON.parse(jsonString);\n        setVocabulary(parsedVocabulary);\n        console.log(\"Vocabulary generated successfully:\", parsedVocabulary);\n      } else {\n        throw new Error(\"No vocabulary content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error building vocabulary:\", error);\n      setVocabularyError(`Failed to build vocabulary: ${error.message}. Please try again.`);\n      setVocabulary(null);\n    } finally {\n      setIsBuildingVocabulary(false);\n    }\n  }, []);\n\n  // --- LLM Powered Study Questions Feature ---\n  const handleGenerateStudyQuestions = useCallback(async (textToGenerateQuestionsFrom) => {\n    if (!textToGenerateQuestionsFrom) {\n      setStudyQuestionsError(\"No text selected to generate study questions from.\");\n      return;\n    }\n\n    setStudyQuestions(null);\n    setStudyQuestionsError('');\n    setIsGeneratingStudyQuestions(true);\n    setShowStudyQuestions(true);\n\n    try {\n      const prompt = `Generate 3-5 study questions (mix of multiple choice and open-ended) based on the following text. For multiple-choice questions, provide 3 options (A, B, C) and indicate the correct answer. Format the output as a JSON array of objects. Each object should have a \"type\" (either \"multiple-choice\" or \"open-ended\"), a \"question\" string. If \"multiple-choice\", include \"options\" (array of strings) and \"correctAnswer\" (string). If \"open-ended\", omit options and correctAnswer. Example: [{\"type\": \"multiple-choice\", \"question\": \"What is...\", \"options\": [\"A:...\", \"B:...\", \"C:...\"], \"correctAnswer\": \"A:...\"}, {\"type\": \"open-ended\", \"question\": \"Explain...\"}]:\\n\\n\"${textToGenerateQuestionsFrom}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: {\n              type: \"OBJECT\",\n              properties: {\n                \"type\": { \"type\": \"STRING\", \"enum\": [\"multiple-choice\", \"open-ended\"] },\n                \"question\": { \"type\": \"STRING\" },\n                \"options\": {\n                  \"type\": \"ARRAY\",\n                  \"items\": { \"type\": \"STRING\" }\n                },\n                \"correctAnswer\": { \"type\": \"STRING\" }\n              },\n              \"required\": [\"type\", \"question\"]\n            }\n          }\n        }\n      };\n      \n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for study questions...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedQuestions = JSON.parse(jsonString);\n        setStudyQuestions(parsedQuestions);\n        console.log(\"Study questions generated successfully:\", parsedQuestions);\n      } else {\n        throw new Error(\"No study questions content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating study questions:\", error);\n      setStudyQuestionsError(`Failed to generate study questions: ${error.message}. Please try again.`);\n      setStudyQuestions(null);\n    } finally {\n      setIsGeneratingStudyQuestions(false);\n    }\n  }, []);\n\n  // --- LLM Powered Simplify Text Feature ---\n  const handleSimplifyText = useCallback(async (textToSimplify) => {\n    if (!textToSimplify) {\n      setSimplifyError(\"No text selected for simplification.\");\n      return;\n    }\n\n    setSimplifiedText('');\n    setSimplifyError('');\n    setIsSimplifying(true);\n    setShowSimplifiedText(true);\n\n    try {\n      const prompt = `Simplify the following text, making it easier to read and understand for someone with reading difficulties like dyslexia or ADHD. Keep the core meaning intact but use simpler vocabulary and sentence structures:\\n\\n\"${textToSimplify}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\"; // Canvas will provide this at runtime if left empty\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for text simplification...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setSimplifiedText(generatedText);\n        console.log(\"Text simplified successfully.\");\n      } else {\n        throw new Error(\"No simplified text content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error simplifying text:\", error);\n      setSimplifyError(`Failed to simplify text: ${error.message}. Please try again.`);\n      setSimplifiedText(''); // Clear any partial simplified text\n    } finally {\n      setIsSimplifying(false);\n    }\n  }, []);\n\n  // --- LLM Powered FAQ Feature ---\n  const handleGenerateFAQ = useCallback(async () => {\n    if (!fileContent) {\n      setFaqError(\"Please upload a document first to generate FAQs.\");\n      return;\n    }\n\n    setFaqAnswers(null);\n    setFaqError('');\n    setIsAnsweringFaq(true);\n    setShowFaq(true);\n\n    try {\n      const prompt = `Based on the following document, generate 3-5 frequently asked questions (FAQs) and their concise answers. Focus on key information and common queries a user might have after reading the text. Format the output as a JSON array of objects, each with a \"question\" string and an \"answer\" string. Example: [{\"question\": \"What is...\", \"answer\": \"It is...\"}, {\"question\": \"How does...\", \"answer\": \"It works by...\"}]:\\n\\n\"${fileContent}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: {\n              type: \"OBJECT\",\n              properties: {\n                \"question\": { \"type\": \"STRING\" },\n                \"answer\": { \"type\": \"STRING\" }\n              },\n              \"required\": [\"question\", \"answer\"]\n            }\n          }\n        }\n      };\n      \n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for FAQ generation...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedFaq = JSON.parse(jsonString);\n        setFaqAnswers(parsedFaq);\n        console.log(\"FAQ generated successfully:\", parsedFaq);\n      } else {\n        throw new Error(\"No FAQ content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating FAQ:\", error);\n      setFaqError(`Failed to generate FAQ: ${error.message}. Please try again.`);\n      setFaqAnswers(null);\n    } finally {\n      setIsAnsweringFaq(false);\n    }\n  }, [fileContent]);\n\n  // --- LLM Powered Key Takeaways Feature ---\n  const handleGenerateKeyTakeaways = useCallback(async () => {\n    if (!fileContent) {\n      setKeyTakeawaysError(\"Please upload a document first to generate key takeaways.\");\n      return;\n    }\n\n    setKeyTakeaways(null);\n    setKeyTakeawaysError('');\n    setIsGeneratingKeyTakeaways(true);\n    setShowKeyTakeaways(true);\n\n    try {\n      const prompt = `From the following text, extract 3-5 crucial key takeaways or actionable insights. Present them as a concise bulleted list:\\n\\n\"${fileContent}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"ARRAY\",\n            items: { \"type\": \"STRING\" }\n          }\n        }\n      };\n      \n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for key takeaways...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedTakeaways = JSON.parse(jsonString);\n        setKeyTakeaways(parsedTakeaways);\n        console.log(\"Key takeaways generated successfully:\", parsedTakeaways);\n      } else {\n        throw new Error(\"No key takeaways content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error generating key takeaways:\", error);\n      setKeyTakeawaysError(`Failed to generate key takeaways: ${error.message}. Please try again.`);\n      setKeyTakeaways(null);\n    } finally {\n      setIsGeneratingKeyTakeaways(false);\n    }\n  }, [fileContent]);\n\n  // --- LLM Powered Rephrase Selected Text Feature ---\n  const handleRephraseSelectedText = useCallback(async (textToRephrase) => {\n    if (!textToRephrase) {\n      setRephraseError(\"No text selected to rephrase.\");\n      return;\n    }\n\n    setRephrasedText('');\n    setRephraseError('');\n    setIsRephrasingText(true);\n    setShowRephrasedText(true);\n\n    try {\n      const prompt = `Rephrase the following text. Make it more clear and concise without losing its original meaning:\\n\\n\"${textToRephrase}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for rephrasing...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setRephrasedText(generatedText);\n        console.log(\"Text rephrased successfully.\");\n      } else {\n        throw new Error(\"No rephrased content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error rephrasing text:\", error);\n      setRephraseError(`Failed to rephrase text: ${error.message}. Please try again.`);\n      setRephrasedText('');\n    } finally {\n      setIsRephrasingText(false);\n    }\n  }, []);\n\n  // --- LLM Powered Translate Selected Text Feature ---\n  const handleTranslateSelectedText = useCallback(async (textToTranslate) => {\n    if (!textToTranslate) {\n      setTranslateError(\"No text selected to translate.\");\n      return;\n    }\n\n    const targetLanguage = prompt(\"Enter target language (e.g., 'French', 'Spanish', 'German'):\");\n    if (!targetLanguage) {\n      setTranslateError(\"Translation cancelled. Please enter a target language.\");\n      return;\n    }\n\n    setTranslatedText('');\n    setTranslateError('');\n    setIsTranslatingText(true);\n    setShowTranslatedText(true);\n\n    try {\n      const prompt = `Translate the following English text into ${targetLanguage}:\\n\\n\"${textToTranslate}\"`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for translation...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setTranslatedText(generatedText);\n        console.log(\"Text translated successfully.\");\n      } else {\n        throw new Error(\"No translated content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error translating text:\", error);\n      setTranslateError(`Failed to translate text: ${error.message}. Please try again.`);\n      setTranslatedText('');\n    } finally {\n      setIsTranslatingText(false);\n    }\n  }, []);\n\n  // --- LLM Powered Sentiment Analysis Feature ---\n  const handleAnalyzeSentiment = useCallback(async (textToAnalyze) => {\n    if (!textToAnalyze) {\n      setSentimentError(\"No text selected for sentiment analysis.\");\n      return;\n    }\n\n    setSentimentAnalysis(null);\n    setSentimentError('');\n    setIsAnalyzingSentiment(true);\n    setShowSentiment(true);\n\n    try {\n      const prompt = `Analyze the dominant sentiment (e.g., positive, negative, neutral, argumentative, informative, persuasive, critical, humorous) and tone of the following text: \"${textToAnalyze}\". Explain why you chose that sentiment/tone with a brief justification. Format the output as a JSON object with keys: \"sentiment\", \"justification\".`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = {\n        contents: chatHistory,\n        generationConfig: {\n          responseMimeType: \"application/json\",\n          responseSchema: {\n            type: \"OBJECT\",\n            properties: {\n              \"sentiment\": { \"type\": \"STRING\" },\n              \"justification\": { \"type\": \"STRING\" }\n            },\n            \"required\": [\"sentiment\", \"justification\"]\n          }\n        }\n      };\n      \n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for sentiment analysis...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const jsonString = result.candidates[0].content.parts[0].text;\n        const parsedSentiment = JSON.parse(jsonString);\n        setSentimentAnalysis(parsedSentiment);\n        console.log(\"Sentiment analysis generated successfully:\", parsedSentiment);\n      } else {\n        throw new Error(\"No sentiment analysis content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error analyzing sentiment:\", error);\n      setSentimentError(`Failed to analyze sentiment: ${error.message}. Please try again.`);\n      setSentimentAnalysis(null);\n    } finally {\n      setIsAnalyzingSentiment(false);\n    }\n  }, []);\n\n  // --- LLM Powered Contextual Background Information Feature ---\n  const handleGetContextualInfo = useCallback(async (selectedTerm) => {\n    if (!selectedTerm) {\n      setContextualInfoError(\"No term selected for contextual information.\");\n      return;\n    }\n\n    setContextualInfo('');\n    setContextualInfoError('');\n    setIsGettingContextualInfo(true);\n    setShowContextualInfo(true);\n\n    try {\n      const prompt = `Provide concise background information for the term or concept: \"${selectedTerm}\". Focus on its relevance and general context, assuming the user might not be familiar with it, but don't re-summarize the provided document. Keep it brief, no more than 3-4 sentences.`;\n      \n      let chatHistory = [];\n      chatHistory.push({ role: \"user\", parts: [{ text: prompt }] });\n      const payload = { contents: chatHistory };\n      const apiKey = \"\";\n      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;\n\n      console.log(\"Calling Gemini API for contextual info...\");\n      const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(`API Error: ${response.status} ${response.statusText} - ${errorData.error?.message || 'Unknown error'}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.candidates && result.candidates.length > 0 &&\n          result.candidates[0].content && result.candidates[0].content.parts &&\n          result.candidates[0].content.parts.length > 0) {\n        const generatedText = result.candidates[0].content.parts[0].text;\n        setContextualInfo(generatedText);\n        console.log(\"Contextual info generated successfully.\");\n      } else {\n        throw new Error(\"No contextual information content received from the API.\");\n      }\n    } catch (error) {\n      console.error(\"Error getting contextual info:\", error);\n      setContextualInfoError(`Failed to get contextual information: ${error.message}. Please try again.`);\n      setContextualInfo('');\n    } finally {\n      setIsGettingContextualInfo(false);\n    }\n  }, []);\n\n  return (\n    // Wrap the entire application with the ErrorBoundary\n    <ErrorBoundary onErrorLogged={handleLogError}> {/* Pass the error logging handler */}\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-4 sm:p-6 lg:p-8 font-inter\">\n        <div className=\"max-w-7xl mx-auto space-y-6 lg:space-y-8\">\n          {/* Header Section */}\n          <header className=\"text-center py-6 sm:py-8 lg:py-10\">\n            <div className=\"flex items-center justify-center gap-3 sm:gap-4 mb-3 sm:mb-4\">\n              <div className=\"p-2 sm:p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-lg transform rotate-6\">\n                <Eye className=\"w-7 h-7 sm:w-8 sm:h-8 text-white\" />\n              </div>\n              <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-extrabold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent drop-shadow-md\">\n                SynapseRead\n              </h1>\n            </div>\n            <p className=\"text-base sm:text-xl text-gray-600 max-w-xl sm:max-w-2xl mx-auto leading-relaxed\">\n              Enterprise-grade Enhanced Reading technology designed to enhance focus\n              and comprehension for individuals with ADHD and dyslexia.\n            </p>\n          </header>\n\n          {/* Security Status Display */}\n          <SecurityStatus\n            isSecure={securityStatus.isSecure}\n            errors={securityStatus.errors}\n          />\n\n          {/* Main Content Grid */}\n          <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8\">\n            {/* Left Column - Controls (File Importer and Settings) */}\n            <div className=\"xl:col-span-1 space-y-6 lg:space-y-8\">\n              <SecureFileImporter\n                onFileLoaded={handleFileLoaded}\n                onSecurityStatus={handleSecurityStatus}\n              />\n              <EnhancedSettings\n                settings={settings}\n                onSettingsChange={handleSettingsChange}\n              />\n               {/* Error Log Viewer Section */}\n              <ErrorLogViewer\n                userId={appUserId}\n                db={firebaseDb}\n                appId={appId}\n                onToggleVisibility={(isVisible) => console.log('Error logs visibility toggled:', isVisible)}\n              />\n            </div>\n\n            {/* Right Column - Enhanced Reader Display */}\n            <div className=\"xl:col-span-2\">\n              {fileContent && securityStatus.isSecure ? (\n                <>\n                  <EnhancedReader\n                    text={fileContent}\n                    settings={settings}\n                    onProgress={handleReadingProgress}\n                    onSummarize={handleSummarizeText} // Pass the summarization handler\n                    onExplainSelection={handleExplainSelection} // Pass the explanation handler\n                    onBuildVocabulary={handleBuildVocabulary} // Pass the vocabulary handler\n                    onGenerateStudyQuestions={handleGenerateStudyQuestions} // Pass the study questions handler\n                    onSimplifyText={handleSimplifyText} // Pass the simplify text handler\n                    onRephraseSelectedText={handleRephraseSelectedText} // Pass rephrase handler\n                    onTranslateSelectedText={handleTranslateSelectedText} // Pass translate handler\n                    onAnalyzeSentiment={handleAnalyzeSentiment} // Pass new sentiment handler\n                    onGetContextualInfo={handleGetContextualInfo} // Pass new contextual info handler\n                  />\n\n                  {/* New LLM Feature Buttons (Document-level) */}\n                  <div className=\"flex flex-col sm:flex-row justify-center gap-3 sm:gap-4 mt-6\">\n                      {fileContent && (\n                          <button\n                              onClick={handleGenerateFAQ}\n                              className=\"flex items-center justify-center gap-2 px-6 py-3 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                                         focus:outline-none focus:ring-2 focus:ring-purple-700 focus:ring-opacity-50\"\n                          >\n                              <MessageSquare className=\"w-5 h-5\" />\n                              Generate FAQs ✨\n                          </button>\n                      )}\n                      {fileContent && (\n                          <button\n                              onClick={handleGenerateKeyTakeaways}\n                              className=\"flex items-center justify-center gap-2 px-6 py-3 bg-fuchsia-600 text-white rounded-lg hover:bg-fuchsia-700 transition-all duration-300 shadow-md transform hover:scale-[1.02]\n                                         focus:outline-none focus:ring-2 focus:ring-fuchsia-500 focus:ring-opacity-50\"\n                          >\n                              <List className=\"w-5 h-5\" />\n                              Key Takeaways ✨\n                          </button>\n                      )}\n                  </div>\n\n\n                  {/* Summary Section */}\n                  {showSummary && (summary || isSummarizing || summaryError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Lightbulb className=\"w-5 h-5 text-purple-600\" />\n                          Document Summary\n                        </h3>\n                        <button\n                          onClick={() => setShowSummary(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isSummarizing ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-purple-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Generating summary...</span>\n                        </div>\n                      ) : summaryError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {summaryError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{summary}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Explanation Section */}\n                  {showExplanation && (explanation || isExplaining || explanationError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Lightbulb className=\"w-5 h-5 text-indigo-600\" />\n                          Explanation\n                        </h3>\n                        <button\n                          onClick={() => setShowExplanation(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isExplaining ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-indigo-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Generating explanation...</span>\n                        </div>\n                      ) : explanationError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {explanationError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{explanation}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Vocabulary Section */}\n                  {showVocabulary && (vocabulary || isBuildingVocabulary || vocabularyError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <GraduationCap className=\"w-5 h-5 text-teal-600\" />\n                          Vocabulary Builder\n                        </h3>\n                        <button\n                          onClick={() => setShowVocabulary(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isBuildingVocabulary ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-teal-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Building vocabulary...</span>\n                        </div>\n                      ) : vocabularyError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {vocabularyError}\n                        </div>\n                      ) : (\n                        vocabulary && (\n                          <div className=\"space-y-4\">\n                            <div>\n                              <p className=\"text-gray-800 font-bold text-lg mb-1\">{vocabulary.word}</p>\n                              <p className=\"text-gray-700\"><span className=\"font-semibold\">Definition:</span> {vocabulary.definition}</p>\n                            </div>\n                            {vocabulary.synonyms && vocabulary.synonyms.length > 0 && (\n                              <div>\n                                <p className=\"font-semibold text-gray-700\">Synonyms:</p>\n                                <ul className=\"list-disc list-inside text-gray-600 text-sm\">\n                                  {vocabulary.synonyms.map((syn, idx) => <li key={idx}>{syn}</li>)}\n                                </ul>\n                              </div>\n                            )}\n                            {vocabulary.antonyms && vocabulary.antonyms.length > 0 && (\n                              <div>\n                                <p className=\"font-semibold text-gray-700\">Antonyms:</p>\n                                <ul className=\"list-disc list-inside text-gray-600 text-sm\">\n                                  {vocabulary.antonyms.map((ant, idx) => <li key={idx}>{ant}</li>)}\n                                </ul>\n                              </div>\n                            )}\n                            {vocabulary.examples && vocabulary.examples.length > 0 && (\n                              <div>\n                                <p className=\"font-semibold text-gray-700\">Examples:</p>\n                                <ul className=\"list-disc list-inside text-gray-600 text-sm\">\n                                  {vocabulary.examples.map((ex, idx) => <li key={idx}>{ex}</li>)}\n                                </ul>\n                              </div>\n                            )}\n                          </div>\n                        )\n                      )}\n                    </div>\n                  )}\n\n                  {/* Study Questions Section */}\n                  {showStudyQuestions && (studyQuestions || isGeneratingStudyQuestions || studyQuestionsError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <HelpCircle className=\"w-5 h-5 text-blue-800\" />\n                          Study Questions\n                        </h3>\n                        <button\n                          onClick={() => setShowStudyQuestions(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isGeneratingStudyQuestions ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-blue-800 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Generating study questions...</span>\n                        </div>\n                      ) : studyQuestionsError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {studyQuestionsError}\n                        </div>\n                      ) : (\n                        studyQuestions && studyQuestions.length > 0 ? (\n                          <div className=\"space-y-6\">\n                            {studyQuestions.map((q, qIdx) => (\n                              <div key={qIdx} className=\"p-4 border rounded-lg bg-gray-50\">\n                                <p className=\"font-semibold text-gray-800 mb-2\">Q{qIdx + 1}: {q.question}</p>\n                                {q.type === \"multiple-choice\" && q.options && q.options.length > 0 && (\n                                  <div className=\"space-y-1\">\n                                    {q.options.map((option, optIdx) => (\n                                      <p key={optIdx} className=\"text-gray-700 text-sm ml-2\">\n                                        {option}\n                                      </p>\n                                    ))}\n                                    {q.correctAnswer && (\n                                      <p className=\"font-semibold text-green-700 text-sm mt-2\">\n                                        Correct Answer: {q.correctAnswer}\n                                      </p>\n                                    )}\n                                  </div>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-gray-500 text-center py-4\">No study questions generated.</p>\n                        )\n                      )}\n                    </div>\n                  )}\n\n                  {/* Simplified Text Section */}\n                  {showSimplifiedText && (simplifiedText || isSimplifying || simplifyError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Lightbulb className=\"w-5 h-5 text-green-600\" />\n                          Simplified Text\n                        </h3>\n                        <button\n                          onClick={() => setShowSimplifiedText(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isSimplifying ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-green-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Simplifying text...</span>\n                        </div>\n                      ) : simplifyError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {simplifyError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{simplifiedText}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Rephrased Text Section */}\n                  {showRephrasedText && (rephrasedText || isRephrasingText || rephraseError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Shuffle className=\"w-5 h-5 text-orange-600\" />\n                          Rephrased Text\n                        </h3>\n                        <button\n                          onClick={() => setShowRephrasedText(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isRephrasingText ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-orange-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Rephrasing text...</span>\n                        </div>\n                      ) : rephraseError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {rephraseError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{rephrasedText}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Translated Text Section */}\n                  {showTranslatedText && (translatedText || isTranslatingText || translateError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Languages className=\"w-5 h-5 text-pink-600\" />\n                          Translated Text\n                        </h3>\n                        <button\n                          onClick={() => setShowTranslatedText(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isTranslatingText ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-pink-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Translating text...</span>\n                        </div>\n                      ) : translateError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {translateError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{translatedText}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Sentiment Analysis Section */}\n                  {showSentiment && (sentimentAnalysis || isAnalyzingSentiment || sentimentError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Smile className=\"w-5 h-5 text-yellow-600\" />\n                          Sentiment/Tone Analysis\n                        </h3>\n                        <button\n                          onClick={() => setShowSentiment(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isAnalyzingSentiment ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-yellow-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Analyzing sentiment...</span>\n                        </div>\n                      ) : sentimentError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {sentimentError}\n                        </div>\n                      ) : (\n                        sentimentAnalysis && (\n                          <div className=\"space-y-2\">\n                            <p className=\"text-gray-800\"><span className=\"font-semibold\">Dominant Sentiment/Tone:</span> <span className=\"capitalize\">{sentimentAnalysis.sentiment}</span></p>\n                            <p className=\"text-gray-700\"><span className=\"font-semibold\">Justification:</span> {sentimentAnalysis.justification}</p>\n                          </div>\n                        )\n                      )}\n                    </div>\n                  )}\n\n                  {/* Contextual Information Section */}\n                  {showContextualInfo && (contextualInfo || isGettingContextualInfo || contextualInfoError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <Info className=\"w-5 h-5 text-cyan-600\" />\n                          Contextual Information\n                        </h3>\n                        <button\n                          onClick={() => setShowContextualInfo(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isGettingContextualInfo ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-cyan-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Getting contextual information...</span>\n                        </div>\n                      ) : contextualInfoError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {contextualInfoError}\n                        </div>\n                      ) : (\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{contextualInfo}</p>\n                      )}\n                    </div>\n                  )}\n\n                  {/* FAQ Section */}\n                  {showFaq && (faqAnswers || isAnsweringFaq || faqError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <MessageSquare className=\"w-5 h-5 text-purple-800\" />\n                          Frequently Asked Questions\n                        </h3>\n                        <button\n                          onClick={() => setShowFaq(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isAnsweringFaq ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-purple-800 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Generating FAQs...</span>\n                        </div>\n                      ) : faqError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {faqError}\n                        </div>\n                      ) : (\n                        faqAnswers && faqAnswers.length > 0 ? (\n                          <div className=\"space-y-4\">\n                            {faqAnswers.map((item, index) => (\n                              <details key={index} className=\"p-3 bg-gray-50 rounded-lg border cursor-pointer\">\n                                <summary className=\"font-semibold text-gray-800 text-base\">{item.question}</summary>\n                                <p className=\"text-gray-700 mt-2 ml-4\">{item.answer}</p>\n                              </details>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-gray-500 text-center py-4\">No FAQs generated for this document.</p>\n                        )\n                      )}\n                    </div>\n                  )}\n\n                  {/* Key Takeaways Section */}\n                  {showKeyTakeaways && (keyTakeaways || isGeneratingKeyTakeaways || keyTakeawaysError) && (\n                    <div className=\"mt-6 bg-white p-6 rounded-lg border shadow-xl\">\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"text-lg font-semibold flex items-center gap-2\">\n                          <List className=\"w-5 h-5 text-fuchsia-600\" />\n                          Key Takeaways\n                        </h3>\n                        <button\n                          onClick={() => setShowKeyTakeaways(false)}\n                          className=\"text-gray-500 hover:text-gray-700 text-sm font-medium\"\n                        >\n                          Hide\n                        </button>\n                      </div>\n                      {isGeneratingKeyTakeaways ? (\n                        <div className=\"flex items-center justify-center py-4\">\n                          <Loader2 className=\"w-6 h-6 text-fuchsia-500 animate-spin mr-2\" />\n                          <span className=\"text-gray-600\">Generating key takeaways...</span>\n                        </div>\n                      ) : keyTakeawaysError ? (\n                        <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm\">\n                          <AlertTriangle className=\"inline w-4 h-4 mr-2\" />\n                          {keyTakeawaysError}\n                        </div>\n                      ) : (\n                        keyTakeaways && keyTakeaways.length > 0 ? (\n                          <ul className=\"list-disc list-inside text-gray-700 space-y-2\">\n                            {keyTakeaways.map((item, index) => (\n                              <li key={index}>{item}</li>\n                            ))}\n                          </ul>\n                        ) : (\n                          <p className=\"text-gray-500 text-center py-4\">No key takeaways generated for this document.</p>\n                        )\n                      )}\n                    </div>\n                  )}\n                </>\n              ) : (\n                <div className=\"bg-white p-8 sm:p-12 rounded-lg border shadow-xl text-center text-gray-500 min-h-[400px] flex flex-col justify-center items-center\">\n                  <div className=\"p-4 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full w-20 h-20 sm:w-24 sm:h-24 mx-auto mb-6 flex items-center justify-center shadow-lg\">\n                    <Book className=\"w-10 h-10 sm:w-12 sm:h-12 text-blue-600\" />\n                  </div>\n                  <h3 className=\"text-xl sm:text-2xl font-semibold text-gray-700 mb-2\">\n                    Ready for Your Enhanced Reading Experience\n                  </h3>\n                  <p className=\"text-gray-500 text-base sm:text-lg\">\n                    Upload a secure text file to begin your journey with SynapseRead.\n                  </p>\n                  {!securityStatus.isSecure && (\n                    <div className=\"mt-4 text-red-600 font-medium flex items-center gap-2\">\n                      <AlertTriangle className=\"w-5 h-5\" />\n                      Please resolve security issues to proceed.\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Footer Section */}\n          <footer className=\"text-center text-sm text-gray-500 pt-6 sm:pt-8 border-t border-gray-200\">\n            <p className=\"mb-1\">\n              Built with enterprise security standards • POPIA & GDPR compliant •\n              All data processed locally • Designed as an assistive reading tool\n            </p>\n            <p>&copy; {new Date().getFullYear()} SynapseRead. All rights reserved.</p>\n          </footer>\n        </div>\n      </div>\n    </ErrorBoundary>\n  );\n};\n\nexport default SynapseReadApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}